<?xml version='1.0'?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "SS7_Stack_User_Guide.ent">
%BOOK_ENTITIES;
]>
<section id="managing_m3ua">
		<title>M3UA Management</title>
	<section id="managing_m3ua_using_CLI">
		<title>Using CLI</title>
<para>
                        You can manage all M3UA Application Server, Application Server Process and Route related configurations through the Command Line Interface by using the <literal>m3ua</literal> command. You can create, destroy, start and stop ASPs by issuing the <literal>m3ua asp</literal> command with appropriate parameters. You can create, destroy, add and remove AS by issuing the <literal>m3ua as</literal> command with appropriate parameters. You can add and remove M3UA Routes by issuing the <literal>m3ua route</literal> command with appropriate parameters.
                </para>
	</section>
	<section id="managing_m3ua_using_GUI">
		<title>Using GUI</title>
<para>The GUI will allow you to manage your M3UA configurations efficiently using a user-friendly interface. Open a Web Browser and navigate to http://localhost:8080/jss7-management-console/. Click on the 'M3UA' link in the left panel. The main panel will display the names of all configured M3UA Management units. To configure or view the settings of a particular M3UA Management Unit you must click on the name of that unit. The GUI will look similar to the figure below and is divided into four tabs. </para>
<figure>
  		<title>GUI - M3UA Management</title>
  		<mediaobject>
    		<imageobject>
      			<imagedata fileref="images/GUI_M3UA_Management.png" format="PNG" align="center"/>
    		</imageobject>
  		</mediaobject>
	</figure>
		<para>
The first tab will display the properties of the M3UA Management unit. These details displayed here are fetched from the XML descriptor file <filename>jboss-beans.xml</filename>, which is
		located at <filename>$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</filename>, where
		<application>profile_name</application> is the server profile name. These properties can be modified here in the GUI. To modify them you must click the pencil, change value and save.
		The GUI will then display the modified values.
		</para>
		<para>
		The other three tabs will allow you to manage and monitor all Servers, ASPs and Routers within this M3UA Management unit.
		</para>
	</section>


	<section id="m3ua_properties">
		<title>M3UA stack properties</title>

	<section id="m3ua_property_maxsequencenumber">
		<title>Maximum Sequence Number</title>
 <para>You can modify the settings for the parameter 'maxsequencenumber' only when the M3UA Stack is not running. In addition, this parameter cannot be modified through the CLI or GUI. You will have to invoke the setter function directly from the source code.
		 </para>
		 <para>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below) to the XML descriptor file <filename>jboss-beans.xml</filename>, which is located at <filename>$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</filename>, where <application>profile_name</application> is the server profile name.
<screen><![CDATA[
/*Add property for the parameter 'maxsequencenumber' to jboss-beans.xml file and specify the value*/
<property name="maxSequenceNumber">128</property>
]]></screen>
		 </para>
		 <para>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.
		 </para>
			<section id="m3ua_property_maxsequencenumber_CLI">
			<title>Using CLI</title>
				<para>
					You can retrieve the current settings of the parameter 'maxsequencenumber' by issuing the command <command>m3ua get maxsequencenumber</command>. However as explained above, you cannot modify the settings through the CLI.
				</para>
				<screen><![CDATA[
Name
	m3ua get maxsequencenumber

SYNOPSIS
	m3ua get maxsequencenumber stackname <stack-name>

DESCRIPTION
	This command is used to retrieve the current settings of the parameter
	'maxsequencenumber'. The 'maxsequencenumber' parameter is used to specify
	the maximum sequence number used for load-balancing algorithm.

	Sequence number or Signalling Link Selection (SLS) is used for load-balancing
	between ASPs in AS and also between various AS for the same point-code.
	The parameter 'maxsequencenumber' controls the maximum SLS that should be
	used for this. It is safe to leave it at 256.

	The settings can be modified only when the M3UA Stack is not running.
	To modify this parameter you must invoke the setter function
	directly from the code or if you are using the JBoss AS, you can add a
	property to the XML descriptor file jboss-beans.xml. You cannot change the
	settings through the CLI.
			]]></screen>
		</section>
		<section id="m3ua_property_maxsequencenumber_GUI">
			<title>Using GUI</title>
				<para>In the M3UA management page, you can view the current settings of the 'Max Sequence Number' property. But as explained above, you cannot change the settings in the GUI. For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</para>
		</section>
	</section>

	<section id="m3ua_property_maxasforroute">
		<title>Maximum AS for route</title>
		<para>You can modify the settings for the parameter 'maxasforroute' only when the M3UA Stack is not running. In addition, this parameter cannot be modified through the CLI or GUI. You will have to invoke the setter function directly from the source code.
		 </para>
		 <para>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below) to the XML descriptor file <filename>jboss-beans.xml</filename>, which is located at <filename>$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</filename>, where <application>profile_name</application> is the server profile name.
<screen><![CDATA[
/*Add property for the parameter 'maxasforroute' to jboss-beans.xml file and specify the value*/
<property name="maxAsForRoute">4</property>
]]></screen>
		 </para>
		 <para>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.
		 </para>
			<section id="m3ua_property_maxasforroute_CLI">
			<title>Using CLI</title>
				<para>
					You can retrieve the current settings of the parameter 'maxasforroute' by issuing the command <command>m3ua get maxasforroute</command>. However as explained above, you cannot modify the settings through the CLI.
				</para>
				<screen><![CDATA[
Name
	m3ua get maxasforroute

SYNOPSIS
	m3ua get maxasforroute stackname <stack-name>

DESCRIPTION
	This command is used to retrieve the current settings of the parameter
	'maxasforroute'. The 'maxasforroute' parameter is used to specify
	the maximum routes for destination point code.

	Every destination point code should be configured in M3UA with the
	corresponding AS. The parameter 'maxasforroute' controls the
	maximum number of AS that can be used to route the message to the
	same Destination Point Code.

	It is better to always maintain this parameter as an even number for better
	load-sharing and a maximum of 2 is standard and widely accepted. You should
	not change this value if there is at least one route defined, else it will
	throw Exception for that route. You have to delete all the routes,
	change this property and redefine routes.

	The settings can be modified only when the M3UA Stack is not running.
	To modify this parameter you must invoke the setter function
	directly from the code or if you are using the JBoss AS, you can add a
	property to the XML descriptor file jboss-beans.xml. You cannot change the
	settings through the CLI.
			]]></screen>
		</section>
		<section id="m3ua_property_maxasforroute_GUI">
			<title>Using GUI</title>
				<para>In the M3UA management page, you can view the current settings of the 'Max As for Route' property. But as explained above, you cannot change the settings in the GUI. For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</para>
		</section>
	</section>

	<section id="m3ua_property_heartbeattime">
		<title>Heart Beat time</title>

			<section id="m3ua_property_heartbeattime_CLI">
			<title>Using CLI</title>
				<para>
					You can set the 'heartbeattime' by issuing the command <command>m3ua set heartbeattime</command> with appropriate parameters as described below.
					You can verify this by issuing the command <command>m3ua get heartbeattime</command> which will display the value set for this property.
				</para>
				<screen><![CDATA[
Name
	m3ua set heartbeattime

SYNOPSIS
	m3ua set heartbeattime <heartbeattime> stackname <stack-name>

DESCRIPTION
	Each ASP can send HEART_BEAT to peer to determine the availability of
	link. If there is no traffic M3UA will initiate heart beat every
	'heartbeatTime' milli seconds. If 3 consecutive HEART_BEAT are
	missed, stack will close and re-initiate connection.

PARAMETERS

	Standard Parameters

	<heartbeattime>	-	Heart Beat time in milliseconds.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua set heartbeattime 30000
			]]></screen>
		</section>
		<section id="m3ua_property_heartbeattime_GUI">
			<title>Using GUI</title>
				<para>On M3UA management page, click on pencil against the 'Worker Threads' property and text box becomes editable. Change value and save. </para>
		</section>
	</section>

	<section id="m3ua_property_statisticsenabled">
		<title>Enable M3UA statistic</title>

			<section id="m3ua_property_statisticsenabled_CLI">
			<title>Using CLI</title>
				<para>
					You can set the 'statisticsenabled' by issuing the command <command>m3ua set statisticsenabled</command> with appropriate parameters as described below.
					You can verify this by issuing the command <command>m3ua get statisticsenabled</command> which will display the value set for this property.
				</para>
				<screen><![CDATA[
Name
	m3ua set statisticsenabled

SYNOPSIS
	m3ua set statisticsenabled <statisticsenabled> stackname <stack-name>

DESCRIPTION
	You can enable/disable statistic via this property.

PARAMETERS

	Standard Parameters

	<statisticsenabled>	-	true/false.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua set statisticsenabled true
			]]></screen>
		</section>
		<section id="m3ua_property_statisticsenabled_GUI">
			<title>Using GUI</title>
				<para>On M3UA management page, click on pencil against the 'statisticsenabled' property and text box becomes editable. Change value and save. </para>
		</section>
	</section>

	<section id="m3ua_property_routingkeymanagementenabled">
		<title>Enable routing key management</title>

			<section id="m3ua_property_routingkeymanagementenabled_CLI">
			<title>Using CLI</title>
				<para>
					You can set the 'statisticsenabled' by issuing the command <command>m3ua set routingkeymanagementenabled</command> with appropriate parameters as described below.
					You can verify this by issuing the command <command>m3ua get routingkeymanagementenabled</command> which will display the value set for this property.
				</para>
				<screen><![CDATA[
Name
	m3ua set routingkeymanagementenabled

SYNOPSIS
	m3ua set routingkeymanagementenabled <routingkeymanagementenabled> stackname <stack-name>

DESCRIPTION
	You can enable/disable routing key management via this property.

PARAMETERS

	Standard Parameters

	<routingkeymanagementenabled>	-	true/false.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua set routingkeymanagementenabled true
			]]></screen>
		</section>
		<section id="m3ua_property_routingkeymanagementenabled_GUI">
			<title>Using GUI</title>
				<para>On M3UA management page, click on pencil against the 'routingkeymanagementenabled' property and text box becomes editable. Change value and save. </para>
		</section>
	</section>

	<section id="m3ua_property_deliverymessagethreadcount">
		<title>Threads count for processing of incoming messages</title>
		<para>You can modify the settings for the parameter 'deliverymessagethreadcount' only when the M3UA Stack is not running. In addition, this parameter cannot be modified through the CLI or GUI. You will have to invoke the setter function directly from the source code.
		 </para>
		 <para>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below) to the XML descriptor file <filename>jboss-beans.xml</filename>, which is located at <filename>$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</filename>, where <application>profile_name</application> is the server profile name.
<screen><![CDATA[
/*Add property for the parameter 'deliverymessagethreadcount' to jboss-beans.xml file and specify the value*/
<property name="deliveryTransferMessageThreadCount">4</property>
]]></screen>
		 </para>
		 <para>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.
		 </para>
			<section id="m3ua_property_deliverymessagethreadcount_CLI">
			<title>Using CLI</title>
				<para>
					You can retrieve the current settings of the parameter 'deliverymessagethreadcount' by issuing the command <command>m3ua get deliverymessagethreadcount</command>. However as explained above, you cannot modify the settings through the CLI.
				</para>
				<screen><![CDATA[
Name
	m3ua get deliverymessagethreadcount

SYNOPSIS
	m3ua get deliverymessagethreadcount

DESCRIPTION
	Returns the count of threads that will be used for message delivering
	to Mtp3UserPartListener's. Messages from SS7 peers (incoming messages)
	are processed by these threads. Messages to SS7 peers (outgoing messages)
	are processed by threads from user applications (not these threads).

	For single thread model this value should be equal 1.
			]]></screen>
		</section>
		<section id="m3ua_property_deliverymessagethreadcount_GUI">
			<title>Using GUI</title>
				<para>In the M3UA management page, you can view the current settings of the 'Max As for Route' property. But as explained above, you cannot change the settings in the GUI. For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</para>
		</section>
	</section>

	<section id="m3ua_property_routinglabelformat">
		<title>MTP3 RoutingLabel Format</title>
		<para>You can modify the settings for the parameter 'routinglabelformat' only when the M3UA Stack is not running. In addition, this parameter cannot be modified through the CLI or GUI. You will have to invoke the setter function directly from the source code.
		 </para>
		 <para>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below)
		 to the XML descriptor file <filename>jboss-beans.xml</filename>, which is located at <filename>$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</filename>, where <application>profile_name</application>
		 and also an extra separate bean - RoutingLabelFormat (to which we refer from ).
		 is the server profile name.
<screen><![CDATA[
/*Extra bean for RoutingLabelFormat Enum*/
	<bean name="RoutingLabelFormat" class="org.restcomm.protocols.ss7.mtp.RoutingLabelFormat">
		<constructor factoryClass="org.restcomm.protocols.ss7.mtp.RoutingLabelFormat"
			factoryMethod="getInstance">
			<parameter>ITU</parameter>
		</constructor>
	</bean>

/*Add property for the parameter 'routinglabelformat' to jboss-beans.xml file and specify the value into M3UAManagementImpl mbean*/
		<property name="routingLabelFormat">
			<inject bean="RoutingLabelFormat" />
		</property>
]]></screen>
		 </para>
		 <para>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.
		 </para>
			<section id="m3ua_property_routinglabelformat_CLI">
			<title>Using CLI</title>
				<para>
					You can retrieve the current settings of the parameter 'routinglabelformat' by issuing the command <command>m3ua get routinglabelformat</command>.
					However as explained above, you cannot modify the settings through the CLI.
				</para>
				<screen><![CDATA[
Name
	m3ua get routinglabelformat

SYNOPSIS
	m3ua get routinglabelformat stackname <stack-name>

DESCRIPTION
	Returns RoutingLabelFormat option. Possible values are: ITU, ANSI_Sls8Bit,
	ANSI_Sls5Bit, Japan_TTC_DDI, Japan_NTT, China.
			]]></screen>
		</section>
		<section id="m3ua_property_routinglabelformat_GUI">
			<title>Using GUI</title>
				<para>In the M3UA management page, you can view the current settings of the 'MTP3 RoutingLabel Format' property.
				But as explained above, you cannot change the settings in the GUI. For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</para>
		</section>
	</section>

	<section id="m3ua_property_uselsbforlinksetselection">
		<title>Bit of SLS for loadbalancing between Linksets</title>

			<section id="m3ua_property_uselsbforlinksetselection_CLI">
			<title>Using CLI</title>
				<para>
					You can set the 'uselsbforlinksetselection' by issuing the command <command>m3ua set uselsbforlinksetselection</command> with appropriate parameters as described below.
					You can verify this by issuing the command <command>m3ua get uselsbforlinksetselection</command> which will display the value set for this property.
				</para>
				<screen><![CDATA[
Name
	m3ua set uselsbforlinksetselection

SYNOPSIS
	m3ua set uselsbforlinksetselection <true | false> stackname <stack-name>

DESCRIPTION
	Possible values are false or true. Sets which bit of SLS will be used
	for loadbalancing between Linkset.

PARAMETERS

	Standard Parameters

	<true | false>	-	True value means lowest bit of SLS is used for
						loadbalancing between Linkset, false value means
						highest bit of SLS is used. Default value is false.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua set uselsbforlinksetselection false
			]]></screen>
		</section>
		<section id="m3ua_property_uselsbforlinksetselection_GUI">
			<title>Using GUI</title>
				<para>On M3UA management page, click on pencil against the 'Worker Threads' property and text box becomes editable. Change value and save.</para>
		</section>
	</section>



</section>



	<section id="managing_show_m3ua_asp">
		<title>View all M3UA Application Server Processes</title>
		<section id="managing_show_m3ua_asp_cli">
		<title>Using CLI</title>
<para>You can view the details of all configured M3UA Application Server Processes by issuing the command <command>m3ua asp show</command> as described below:
		</para>
<screen><![CDATA[
Name
	m3ua asp show

SYNOPSIS
	m3ua asp show stackname <stack-name>

DESCRIPTION
	This command is used to view the details of all configured Application Server
	Processes. The information displayed will include the name, the SCTP Association
	name and if it is started or stopped.

PARAMETERS

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.
]]>
		</screen>
		</section>
		<section id="managing_show_m3ua_asp_gui">
		<title>Using GUI</title>
<para>Navigate to the specific M3UA Management unit and switch to the 'AspFactories' tab. Here you can view a list of all the ASPs created. Every correctly configured ASP will be displayed in a row and for each ASP, the first column will display the name of the ASP. The icon adjacent to the name will be lit 'green' if the ASP is currently running or if the ASP is stopped the icon will be lit 'orange'. The second column will indicate the current state of the ASP (true / false), the third column will allow you to Start / Stop the ASP and the fourth column will allow you to delete the ASP.
</para>
	<figure>
  		<title>GUI - M3UA Management - AspFactories</title>
  		<mediaobject>
    		<imageobject>
      			<imagedata fileref="images/GUI_M3UA_Management_AspFactories.png" format="PNG" align="center"/>
    		</imageobject>
  		</mediaobject>
	</figure>
<para>
In the screen above, click on the name of the ASP whose details you wish to view. This will launch the ASP Details and display all the configured properties of the selected ASP. The second tab in this view will allow you to view all connected Application Servers. You can click on the bread crumbs at the top to return to any of the previous pages you navigated through.
</para>
	<figure>
  		<title>GUI - M3UA Management - ASP Details</title>
  		<mediaobject>
    		<imageobject>
      			<imagedata fileref="images/GUI_M3UA_Management_AspDetails.png" format="PNG" align="center"/>
    		</imageobject>
  		</mediaobject>
	</figure>
		</section>
	</section>
	<section id="managing_create_m3ua_asp">
		<title>Create a new M3UA Application Server Process</title>
		<section id="managing_create_m3ua_asp_cli">
		<title>Using CLI</title>
<para>You can create a new M3UA ASP by issuing the command <command>m3ua asp create</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua asp create

SYNOPSIS
	m3ua asp create <asp-name> <sctp-association> aspid <aspid> heartbeat <true|false>
	stackname <stack-name>

DESCRIPTION
	This command is used to create a new Application Server Process.

PARAMETERS

	Standard Parameters

	<asp-name>			-	Name of the new Application Server Process
						created. This must be unique and takes any
						String value.

	<sctp-association>		-	Name of the SCTP Association

	Optional Parameters

	<aspid>				-	Identifier for this newly created
						Application Server Process. If this is
						not passed, next available aspid will be
						used.

	heartbeat <true|false>		-	If this parameter is enabled (value set to
						true), then heartbeat mechanism is enabled
						between M3UA peers. When this is enabled,
						it sends a Heartbeat message every 10
						seconds. If there is no response for the
						third heartbeat then it assumes that the
						underlying network is dead. So it closes
						the connection and attempts to connect
						again. The M3UA peers are brought back to
						the same state as they were prior to
						dying.

						This is an optional parameter and if
						unspecified, heartbeat mechanism is
						disabled.

	<stack-name>	-	Name of the stack on which this command is executed.
					    If not passed, the first stack configured in ShellExecutor
					    will be used.

EXAMPLES
	m3ua asp create ASP1 Assoc1 aspid 12 heartbeat true

	The above command will create a new M3UA Application Server Process with name ASP1
	and id 12. Heartbeat mechanism is enabled.
]]></screen>
		</section>
		<section id="managing_create_m3ua_asp_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Create a new Application Server Process using GUI</title>
				<step><para>Navigate to the tab 'AspFactories' in the M3UA Management Unit window and click on the 'Create ASP' button. This will launch a pop-up 'Create AspFactory'.</para></step>
				<step><para>In the 'Create ASP' page, add details of the new ASP. You must ensure that you fill in all the mandatory parameters (Name, SCTP Association Name).  For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section. You must ensure that a correctly configured SCTP Association is created and available prior to creating a new ASP. When the ASP is started or stopped, this corresponding SCTP Association will start / stop automatically.
				</para></step>
				<step><para>Verify the details entered and then click on the 'Create' button. A new ASP will be created with parameters as specified. If there is an error in creating the ASP then you will find the details of the error in the Management Console Log section below.</para></step>
				<step><para>Click on the 'Close' button to close the 'Create Server' pop-up.
				</para></step>
			</procedure>
		</section>
	</section>
	<section id="managing_destroy_m3ua_asp">
		<title>Delete an Application Server Process</title>
		<section id="managing_destroy_m3ua_asp_cli">
		<title>Using CLI</title>
<para>You can delete an existing M3UA ASP by issuing the command <command>m3ua asp destroy</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua asp destroy

SYNOPSIS
	m3ua asp destroy <asp-name> stackname <stack-name>

DESCRIPTION
	This command is used to delete an existing M3UA Application Server Process
	identified by the name 'asp-name'. You must ensure that the ASP is stopped prior
	to issuing the command.

PARAMETERS

	Standard Parameters

	<asp-name>		-	Name of the ASP to be deleted.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua asp destroy ASP1

	The above command will destroy the ASP identified by the name ASP1.
]]></screen>
		</section>
		<section id="managing_destroy_m3ua_asp_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Delete an Application Server Process using GUI</title>
				<step><para>Navigate to the 'ASPs' section in the M3UA Management Unit window and locate the row corresponding to the ASP you wish to delete.</para></step>
				<step><para>You must ensure that the ASP is stopped and unassigned from AS prior to deletion. If the ASP is stopped, the last column for 'Delete' will display a 'x' button in red and will be enabled. If the Server is currently running, the 'x' button will be disabled.</para></step>
				<step><para>Click on the red 'x' button to delete the corresponding ASP.
				</para></step>
			</procedure>
		</section>
	</section>
	<section id="managing_start_m3ua_asp">
		<title>Start an Application Server Process</title>
		<section id="managing_start_m3ua_asp_cli">
		<title>Using CLI</title>
<para>You can start an existing ASP by issuing the command <command>m3ua asp start</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua asp start

SYNOPSIS
	m3ua asp start <asp-name> stackname <stack-name>

DESCRIPTION
	This command is used to start an existing ASP. You must ensure that the ASP is
	assigned to at least one AS prior to starting it.

PARAMETERS

	Standard Parameters

	<asp-name>		-	Name of the ASP to be started.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua asp start ASP1

	The above command will start the ASP identified by the name ASP1.
]]></screen>
		</section>
		<section id="managing_start_m3ua_asp_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Start an Application Server Process</title>
				<step><para>Navigate to the 'AspFactories' tab in the M3UA Management Unit window and locate the row corresponding to the ASP you wish to start.</para></step>
				<step><para>Click on the 'Start' button in the actions column to start the corresponding ASP. You must ensure that the ASP is assigned to at least one AS prior to starting it.
				</para></step>
				<step><para>If the ASP has started successfully you will find the status indicating the ASP running as 'true' and the icon will be lit green.  If there is an error and the ASP failed to start, you will find details of the error in the Management Console log below.</para></step>
			</procedure>
		</section>
	</section>
	<section id="managing_stop_m3ua_asp">
		<title>Stop an Application Server Process</title>
		<section id="managing_stop_m3ua_asp_cli">
		<title>Using CLI</title>
<para>You can stop a currently running ASP by issuing the command <command>m3ua asp stop</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua asp stop

SYNOPSIS
	m3ua asp stop <asp-name> stackname <stack-name>

DESCRIPTION
	This command is used to stop a currently running ASP.

PARAMETERS

	Standard Parameters

	<asp-name>		-	Name of the ASP to be stopped.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua asp stop ASP1

	The above command will stop the ASP identified by the name ASP1.
]]></screen>
		</section>
		<section id="managing_stop_m3ua_asp_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Stop an Application Server Process</title>
				<step><para>Navigate to the 'AspFactories' section in the M3UA Management Unit window and locate the row corresponding to the ASP you wish to stop.</para></step>
				<step><para>Click on the 'Stop' button in the actions column to stop the corresponding ASP.
				</para></step>
				<step><para>If the ASP has stopped successfully you will find the status indicating the ASP running as 'false' and the icon will be lit orange.  If there is an error and the ASP failed to stop, you will find details of the error in the Management Console log below.</para></step>
			</procedure>
		</section>
	</section>
	<section id="managing_m3ua_as_show">
	<title>View all M3UA Application Servers</title>
		<section id="managing_m3ua_as_show_cli">
		<title>Using CLI</title>
<para>You can view the details of all configured M3UA Application Servers by issuing the command <command>m3ua as show</command> as described below:
		</para>
<screen><![CDATA[
Name
	m3ua as show

SYNOPSIS
	m3ua as show stackname <stack-name>

DESCRIPTION
	This command is used to view the details of all configured Application Servers.
	The information displayed will include the configured
	functionality (AS or IPSP or SGW), mode (SE or DE), IPSP type (if applicable),
	routing context, traffic mode and network appearance values.

PARAMETERS

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.
]]></screen>
		</section>
		<section id="managing_m3ua_as_show_gui">
		<title>Using GUI</title>
<para>Navigate to the specific M3UA Management unit and switch to the 'ApplicationServers' tab. Here you can view a list of all the ASs created. Every correctly configured AS will be displayed in a row and for each AS, the first column will display the name of the AS. The icon adjacent to the name will be lit 'green' if the AS is currently running or if the AS is stopped the icon will be lit 'orange'. The second column will indicate the current state of the AS (defined / undefined), the third column will allow you to delete the AS.
</para>
	<figure>
  		<title>GUI - M3UA Management - ApplicationServers</title>
  		<mediaobject>
    		<imageobject>
      			<imagedata fileref="images/GUI_M3UA_Management_ApplicationServers.png" format="PNG" align="center"/>
    		</imageobject>
  		</mediaobject>
	</figure>
<para>
In the screen above, click on the name of the AS whose details you wish to view. This will launch the AS Details and display all the configured properties of the selected AS. The second tab in this view will allow you to view the details of the connected ASP. You can click on the bread crumbs at the top to return to any of the previous pages you navigated through.
</para>
	<figure>
  		<title>GUI - M3UA Management - AS Details</title>
  		<mediaobject>
    		<imageobject>
      			<imagedata fileref="images/GUI_M3UA_Management_ApplicationServer_Details.png" format="PNG" align="center"/>
    		</imageobject>
  		</mediaobject>
	</figure>
		</section>
	</section>
	<section id="managing_show_m3ua_as_create">
	<title>Create a new M3UA AS </title>
		<section id="managing_show_m3ua_as_create_cli">
		<title>Using CLI</title>
<para>You can create a new M3UA AS by issuing the command <command>m3ua as create</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua as create

SYNOPSIS
	m3ua as create <as-name> <AS | SGW | IPSP> mode <SE | DE>
	ipspType <client | server> rc <routing- context> traffic-mode <traffic mode>
	min-asp <minimum asp active for TrafficModeType.Loadshare>
	network-appearance <network appearance value> stackname <stack-name>

DESCRIPTION
	This command is used to create a new Application Server.

PARAMETERS

	Standard Parameters

	<as-name>		-	Name of the new Server created. This must be
					unique and takes any String value.

	<AS | SGW | IPSP>	-	The type of the new Server is specified using this
					parameter. The three possible values are
					AS (Application Server), SGW (Signaling Gateway)
					and IPSP.

	<SE | DE>		-	You must specify if Single Exchange or
					Double Exchange of ASPSM (ASP State Maintenance)
					and ASPTM (ASP Traffic Maintenance) messages
					should be performed.

	<client | server>	-	This is required if the newly created AS is of
					type IPSP. You must specify is if it is of type
					Client or Server.

	Optional Parameters

	<routing-context>	-	This refers to the Routing Context configured for
					M3UA Stack on SGW. This parameter is optional.

					However for an ASP (Application Server Process)
					assigned to this AS to be configured to process
					signaling traffic related to more than one AS over
					a single SCTP Association, it is mandatory to
					specify a routing-context for the AS. If an ASP is
					configured to always process signaling traffic
					from one AS, irrespective of whether the received
					messages have routing context set or not, it will
					always be delivered to AS for further processing.

					However if an ASP is configured to process
					signaling traffic related to more than one AS over
					a single SCTP Association and if a signaling
					message is received without RC, then the ASP will
					drop the message and send back an Error message.
					A respective log4j error will also be logged.

	<traffic-mode>		-	You may choose to specify the traffic mode for
					ASPs. At the moment jSS7 M3UA supports only
					2 modes: loadshare and override. Broadcast mode is
					not supported.

					This is an optional parameter and if not specified
					the default mode is 'loadshare'.

	<min-asp>			-	You may choose to specify the minumum asp
					active for traffic mode 'loadshare' before the
					payload starts flowing.

					This is an optional parameter and if not specified
					the default value is 1. Also if traffic-mode is not
					'loadshare' setting this value has no effect.

	<network-appearance>	-	This is a M3UA local reference (typically an
					integer) shared by SG and AS. This value together
					with a Signaling Point Code, uniquely identifies a
					SS7 node by indicating the specific SS7 network to
					which it belongs. It can be used to distinguish
					between signalling traffic, associated with
					different networks, being sent between the SG and
					the ASP over a common SCTP association.

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua as create AS1 IPSP mode DE ipspType server rc 1 traffic-mode loadshare

	The above command will create a new M3UA Application Server identified as AS1,
	of type IPSP (Server), Double Exchange mode. The Routing Context is 1 and
	traffic-mode is 'loadshare'.

	m3ua as create AS2 AS mode SE rc 100 traffic-mode loadshare 2 network-appearance 12

	The above command will create a new M3UA Application Server identified as AS2,
	of type AS, Single Exchange mode. The Routing Context is 100,
	traffic-mode is 'loadshare' and minimun asp to be active for payload transfer is 2.
	The network-appearance value is 12.
]]></screen>
		</section>
		<section id="managing_show_m3ua_as_create_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Create a new M3UA Application Server using GUI </title>
				<step><para>Navigate to the tab 'ApplicationServers' in the M3UA Management Unit window and click on the 'Create AS' button. This will launch a pop-up 'Create AS'.</para></step>
				<step><para>In the 'Create Application Server' pop-up, add details of the new AS. For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.
				</para></step>
				<step><para>Verify the details entered and then click on the 'Create' button. A new AS will be created with parameters as specified. If there is an error in creating the AS then you will find the details of the error in the Management Console Log section below.</para></step>
				<step><para>Click on the 'Close' button to close the 'Create Application Server' pop-up.
				</para></step>
			</procedure>
		</section>
	</section>
	<section id="managing_show_m3ua_as_destroy">
	<title>Delete a M3UA AS</title>
		<section id="managing_show_m3ua_as_destroy_cli">
		<title>Using CLI</title>
<para>You can create a new M3UA AS by issuing the command <command>m3ua as create</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua as destroy

SYNOPSIS
	m3ua as destroy <as-name> stackname <stack-name>

DESCRIPTION
	This command is used to delete an existing M3UA Application Server instance
	identified by the name 'as-name'. You must ensure that all ASPs are unassigned and
	the AS state is 'INACTIVE' prior to destroying the AS.

PARAMETERS

	Standard Parameters

	<as-name>		-	Name of the AS instance to be deleted.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua as destroy AS1

	The above command will destroy the AS identified by the name AS1.
]]></screen>
		</section>
		<section id="managing_show_m3ua_as_destroy_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Delete a M3UA Application Server using GUI</title>
				<step><para>Navigate to the 'ApplicationServers' tab in the M3UA Management Unit window and locate the row corresponding to the AS you wish to delete.</para></step>
				<step><para> You must ensure that all ASPs are unassigned from this AS and the current state of the AS is 'INACTIVE' (displayed as 'undefined') prior to destroying the AS. If the AS is inactive, the last column for 'Delete' will display a 'x' button in red and will be enabled. You can only delete the AS if it is inactive.</para></step>
				<step><para>Click on the red 'x' button to delete the corresponding AS.
				</para></step>
			</procedure>
		</section>
	</section>
	<section id="managing_show_m3ua_as_add">
	<title>Assign an ASP to an AS</title>
		<section id="managing_show_m3ua_as_add_cli">
		<title>Using CLI</title>
<para>You can assign an ASP to an AS by issuing the command <command>m3ua as add</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua as add

SYNOPSIS
	m3ua as add <as-name> <asp-name> stackname <stack-name>

DESCRIPTION
	This command is used to assign an Application Server Process to an Application
	Server. The AS and ASP must both be created prior to executing this command.

	You can configure an ASP to process signaling traffic related to more than one AS,
	over a single SCTP Association. However you must ensure that all the Application
	Servers that share the ASP are configured with a valid Routing Context value.

PARAMETERS

	Standard Parameters

	<as-name>		-	Name of the AS to which this ASP is being assigned.

	<asp-name>		-	Name of the ASP that is being assigned to the AS.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua as add AS1 ASP1
	- The above command will assign ASP1 to AS1.
]]></screen>
		</section>
		<section id="managing_show_m3ua_as_add_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Assign an ASP to an AS using GUI</title>
				<step><para>Navigate to the 'ApplicationServers' tab in the M3UA Management Unit window, locate the row corresponding to the AS you wish to assign an ASP and click on the name of the AS.</para></step>
				<step><para>This will launch the AS details page where all the properties of the AS will be displayed. Switch to the second tab in this view called "Application Server Processes". As shown in the figure below, you will find a list of all currently assigned ASPs to this selected AS.
	<figure>
  		<title>GUI - M3UA Management - Assign ASP to an AS</title>
  		<mediaobject>
    		<imageobject>
      			<imagedata fileref="images/GUI_M3UA_Management_ASP_Assign.png" format="PNG" align="center"/>
    		</imageobject>
  		</mediaobject>
	</figure>
				</para></step>
				<step><para>Click on the 'Add ASP' button at the bottom. This will launch a pop-up named 'Add ASP' where all available ASPs will be listed in a drop down box.</para></step>
				<step><para>Click on the 'Create' button to add the selected ASP to this AS. The ASP will be assigned to this AS and will be displayed in the ASP list for this AS. </para></step>
				<step><para>
 You can configure an ASP to process signaling traffic related to more than one AS, over a single SCTP Association. However you must ensure that all the Application Servers that share the ASP are configured with a valid Routing Context value.</para></step>
			</procedure>
		</section>
	</section>
	<section id="managing_show_m3ua_as_remove">
	<title>Unassign an ASP from an AS</title>
		<section id="managing_show_m3ua_as_remove_cli">
		<title>Using CLI</title>
<para>You can unassign an ASP from an AS by issuing the command <command>m3ua as remove</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua as remove

SYNOPSIS
	m3ua as remove <as-name> <asp-name> stackname <stack-name>

DESCRIPTION
	This command is used to un-assign an Application Server Process from an
	Application Server that it was previously assigned to.

PARAMETERS

	Standard Parameters

	<as-name>		-	Name of the AS from which this ASP is being
					un-assigned.

	<asp-name>		-	Name of the ASP to be un-assigned.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua as remove AS1 ASP1

	The above command will remove ASP1 from AS1.
]]></screen>
		</section>
		<section id="managing_show_m3ua_as_remove_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Unassign an ASP from an AS using GUI</title>
				<step><para>Navigate to the 'ApplicationServers' tab in the M3UA Management Unit window, locate the row corresponding to the AS you wish to unassign an ASP from and click on the name of the AS.</para></step>
				<step><para>This will launch the AS details page where all the properties of the AS will be displayed. Switch to the second tab in this view called "Application Server Processes". As shown in the figure above, you will find a list of all currently assigned ASPs to this selected AS.

				</para></step>
				<step><para>Locate the row corresponding to the ASP you wish to unassign from this AS.</para></step>
				<step><para>
 Click on the red coloured 'x' remove button in the row corresponding to the ASP you wish to remove. This action will unassign the ASP from this AS.</para></step>
			</procedure>
		</section>
	</section>

	<section id="managing_show_m3ua_route">
		<title>View all M3UA Routes</title>
		<section id="managing_show_m3ua_route_cli">
		<title>Using CLI</title>
<para>You can view the details of all configured M3UA Routes by issuing the command <command>m3ua route show</command> as described below:
		</para>
<screen><![CDATA[
Name
	m3ua route show

SYNOPSIS
	m3ua route show stackname <stack-name>

DESCRIPTION
	This command is used to display all configured routes.

PARAMETERS

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.
]]></screen>
		</section>
		<section id="managing_show_m3ua_route_gui">
		<title>Using GUI</title>
<para>Navigate to the specific M3UA Management unit and switch to the 'Routers' tab. Here you can view a list of all the Routes created as shown in the figure below. Every correctly configured Route will be displayed in a row and for each Route, the first column will display DPC:OPC:SI values. The icon adjacent to the name will be lit 'green' if the Route is currently active or if the Route is inactive the icon will be 'orange'. The second column will indicate the current state of the Route (Active / Inactive) and the third column will display the name of the AS assigned to route messages for this DPC.</para>
	<figure>
  		<title>GUI - M3UA Management - Route</title>
  		<mediaobject>
    		<imageobject>
      			<imagedata fileref="images/GUI_M3UA_Management_Route.png" format="PNG" align="center"/>
    		</imageobject>
  		</mediaobject>
	</figure>
		</section>
	</section>
	<section id="managing_add_m3ua_route">
		<title>Create a new M3UA Route </title>
		<section id="managing_add_m3ua_route_cli">
		<title>Using CLI</title>
<para>You can create a new M3UA Route by issuing the command <command>m3ua route add</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua route add

SYNOPSIS
	m3ua route add <as-name> <dpc> <opc> <si> trafficmode <traffic-mode> stackname <stack-name>

DESCRIPTION
	This command is used to configure an AS to route message, i.e. configure the
	destination point code that the message will be routed to. You must ensure that
	the AS is created prior to executing this command.

PARAMETERS

	Standard Parameters

	<as-name>		-	Name of the AS assigned to route message for
					this dpc.

	<dpc>			-	Destination Point Code.

	<opc>			-	Originating Point Code.

	<si>			-	Service Indicator.

	Optional Parameters
	<traffic-mode>	-	There can be two or more AS defined for each route.
						The M3UA Stack will do load-balancing between these
						AS depending on the traffic-mode set for this m3ua
						route. Possible values are:
						1. Override
						2. Loadshare
						3. Broadcast (Broadcast is not yet supported by M3UA)

	<stack-name>	-	Name of the stack on which this command is executed.
						If this is not passed, the first stack configured in
						ShellExecutor will be used.

EXAMPLES
	m3ua route add AS1 2 -1 -1
]]></screen>
		</section>
		<section id="managing_add_m3ua_route_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Create a new M3UA Route using GUI </title>
				<step><para>Navigate to the 'Routers' tab in the M3UA Management Unit window and click on the 'Create/Remove' button.</para></step>
				<step><para>This will launch the pop-up 'Create/Remove Route', where you can add values for DPC, OPC, SI, traffic-mode and Application Server Name. For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.
				</para></step>
				<step><para>Verify the details entered and then click on the 'Create' button. A new Route will be configured with parameters as specified. If there is an error in creating the Route then you will find the details of the error in the Management Console Log section below.</para></step>
			</procedure>
		</section>
	</section>
	<section id="managing_remove_m3ua_route">
		<title>Delete a M3UA Route </title>
		<section id="managing_remove_m3ua_route_cli">
		<title>Using CLI</title>
<para>You can delete a M3UA Route by issuing the command <command>m3ua route remove</command> with appropriate parameters as described below:
		</para>
<screen><![CDATA[
Name
	m3ua route remove

SYNOPSIS
	m3ua route remove <as-name> <dpc> <opc> <si> stackname <stack-name>

DESCRIPTION
	This command is used to remove a previously configured route.

PARAMETERS

	Standard Parameters

	<as-name>		-	Name of the AS assigned to route message for
					this dpc.

	<dpc>			-	Destination Point Code.

	<opc>			-	Originating Point Code.

	<si>			-	Service Indicator.

	Optional Parameters

	<stack-name>	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua route remove AS1 2 -1 -1
]]></screen>
		</section>
		<section id="managing_remove_m3ua_route_gui">
		<title>Using GUI</title>
			<procedure>
				<title>Delete a M3UA Route using GUI</title>
				<step><para>Navigate to the 'Routers' tab in the M3UA Management Unit window and click on the 'Create/Remove' button.</para></step>
				<step><para>This will launch the pop-up 'Create/Remove Route'. Enter the values for DPC, OPC, SI and Application Server Name that you wish to remove from the list of Routes. For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.
				</para></step>
 				<step><para>Click on the 'Remove' button to delete the Route corresponding to the parameters specified.
				</para></step>
			</procedure>
		</section>
	</section>

</section>
