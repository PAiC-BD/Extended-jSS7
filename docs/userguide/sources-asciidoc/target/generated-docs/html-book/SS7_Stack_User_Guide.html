<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>User Guide to Restcomm jSS7 8.0.0-170</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="book">
<div id="header">
<h1>User Guide to Restcomm jSS7 8.0.0-170</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#preface">Preface</a></li>
<li><a href="#document-conventions">Document Conventions</a>
<ul class="sectlevel2">
<li><a href="#typographic-conventions">Typographic Conventions</a></li>
<li><a href="#pull-quote-conventions">Pull-quote Conventions</a></li>
<li><a href="#notes-and-warnings">Notes and Warnings</a></li>
</ul>
</li>
<li><a href="#provide-feedback-to-the-authors">Provide feedback to the authors!</a></li>
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_jss7_overview">1.1. Restcomm jSS7</a></li>
<li><a href="#_ss7_overview">1.2. About SS7</a></li>
<li><a href="#_jss7_implemented_protocols">1.3. Implemented Protocols and Standards Compliance</a></li>
<li><a href="#_major_features">1.4. Major Features of Restcomm jSS7</a></li>
</ul>
</li>
<li><a href="#_design_jss7">2. Architecture</a>
<ul class="sectlevel2">
<li><a href="#_logical_divisions">2.1. Logical Design</a></li>
<li><a href="#_dir_structure">2.2. Directory Structure</a></li>
<li><a href="#functional-blocks">2.3. Functional Blocks</a></li>
</ul>
</li>
<li><a href="#_technical_notes">3. Technical notes</a>
<ul class="sectlevel2">
<li><a href="#_design_multitenancy">3.1. Multi tenancy support</a></li>
<li><a href="#_design_out_cong_control">3.2. Congestion control for outgoing messageflow</a></li>
<li><a href="#_design_in_cong_control">3.3. Congestion control for incoming messageflow</a></li>
</ul>
</li>
<li><a href="#_running_jss7">4. Running</a>
<ul class="sectlevel2">
<li><a href="#_running_ss7_service">4.1. Running Restcomm  SS7 Service</a></li>
<li><a href="#_running_sgw_binary">4.2. Running Restcomm  Signaling Gateway</a></li>
<li><a href="#_running_standalone">4.3. Running jSS7  as a Standalone library</a></li>
<li><a href="#_running_shell">4.4. Running the Shell`Shell`</a></li>
<li><a href="#_using_gui">4.5. Running the Graphical User Interface</a></li>
<li><a href="#_running_ss7_simulator">4.6. Running Restcomm jSS7  Simulator</a></li>
<li><a href="#_running_ss7_cards">4.7. Running with SS7 cards</a></li>
</ul>
</li>
<li><a href="#_configuring_jss7">5. Configuring jboss-beans.xml</a>
<ul class="sectlevel2">
<li><a href="#_configuring">5.1. Configuring Restcomm  SS7 Service</a></li>
<li><a href="#_configuring_sgw">5.2. Configuring Restcomm  Signaling Gateway</a></li>
</ul>
</li>
<li><a href="#_configuring_standalone">6. Configuring as a Standalone library</a>
<ul class="sectlevel2">
<li><a href="#_standalone_sctp">6.1. Building SCTP</a></li>
<li><a href="#_building_m3ua_standalone">6.2. Building M3UA</a></li>
<li><a href="#building-sccp">6.3. Building SCCP</a></li>
<li><a href="#building-tcap">6.4. Building TCAP</a></li>
<li><a href="#building-map">6.5. Building MAP</a></li>
<li><a href="#common-code">6.6. Common Code</a></li>
</ul>
</li>
<li><a href="#_managing">7. Managing Restcomm jSS7</a>
<ul class="sectlevel2">
<li><a href="#_managing_linksets">7.1. Linkset Management</a></li>
<li><a href="#_managing_sctp">7.2. SCTP Management</a></li>
<li><a href="#_managing_m3ua">7.3. M3UA Management</a></li>
<li><a href="#_managing_sccp">7.4. SCCP Management</a></li>
<li><a href="#_managing_tcap">7.5. TCAP Management</a></li>
<li><a href="#_managing_statistics">7.6. Statistics</a></li>
<li><a href="#_managing_alarms">7.7. Alarms</a></li>
</ul>
</li>
<li><a href="#m3ua">8. M3UA</a>
<ul class="sectlevel2">
<li><a href="#_mobicents_signaling_gateway_m3ua">8.1. Restcomm  Signaling Gateway M3UA Stack</a></li>
<li><a href="#_m3ua_route">8.2. Route</a></li>
<li><a href="#_m3ua_loadsharing">8.3. Load Sharing</a></li>
<li><a href="#m3ua-internal-state-machine">8.4. M3UA Internal State Machine</a></li>
</ul>
</li>
<li><a href="#isup">9. ISUP</a>
<ul class="sectlevel2">
<li><a href="#_isup_config">9.1. ISUP Configuration</a></li>
<li><a href="#isup-usage">9.2. ISUP Usage</a></li>
<li><a href="#isup-example">9.3. ISUP Example</a></li>
</ul>
</li>
<li><a href="#sccp">10. SCCP</a>
<ul class="sectlevel2">
<li><a href="#_sccp_routing">10.1. Routing Management</a></li>
<li><a href="#_sccp_design">10.2. SCCP Usage</a></li>
<li><a href="#_sccp_complete_example">10.3. SCCP User Part Example #1 (connectionless protocol class)</a></li>
<li><a href="#_sccp_complete_example">10.4. SCCP User Part Example #2 (connection-oriented protocol class)</a></li>
</ul>
</li>
<li><a href="#tcap">11. TCAP</a>
<ul class="sectlevel2">
<li><a href="#restcomm-jss7-tcap-usage">11.1. Restcomm jSS7  TCAP Usage</a></li>
<li><a href="#restcomm-jss7-tcap-user-part-example">11.2. Restcomm jSS7  TCAP User Part Example</a></li>
<li><a href="#restcomm-jss7-tcap-statistic-counters">11.3. Restcomm jSS7 TCAP statistic counters</a></li>
</ul>
</li>
<li><a href="#map">12. MAP</a>
<ul class="sectlevel2">
<li><a href="#_map_usage">12.1. jSS7  MAP</a></li>
<li><a href="#_map_send_request">12.2. jSS7  Sending a MAP request (processUnstructuredSS-Request as an example)</a></li>
<li><a href="#_map_usage_example">12.3. jSS7  MAP Usage</a></li>
</ul>
</li>
<li><a href="#cap">13. CAP</a>
<ul class="sectlevel2">
<li><a href="#_cap_usage">13.1. jSS7  CAP</a></li>
<li><a href="#_cap_send_request">13.2. jSS7  Sending a CAP request (InitialDPRequest as an example)</a></li>
<li><a href="#_cap_usage_example">13.3. jSS7  CAP Usage</a></li>
</ul>
</li>
<li><a href="#_simulator">14. SS7 Simulator</a>
<ul class="sectlevel2">
<li><a href="#_simulator_configuring_layers">14.1. Configuring Restcomm jSS7  Simulator</a></li>
<li><a href="#_simulator_tests">14.2. SS7 Simulator Test Cases</a></li>
</ul>
</li>
<li><a href="#_traceparser">15. Trace Parser Tool</a>
<ul class="sectlevel2">
<li><a href="#_traceparser_running">15.1. Running Restcomm jSS7  Trace Parser</a></li>
<li><a href="#_traceparser_configuration">15.2. Configuring Trace Parser</a></li>
</ul>
</li>
<li><a href="#revision-history">Appendix A: Revision History</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="preface"><a class="anchor" href="#preface"></a>Preface</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="document-conventions"><a class="anchor" href="#document-conventions"></a>Document Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This manual uses several conventions to highlight certain words and phrases and draw attention to specific pieces of information.</p>
</div>
<div class="paragraph">
<p>In PDF and paper editions, this manual uses typefaces drawn from the <a href="https://fedorahosted.org/liberation-fonts/">Liberation Fonts</a> set.
The Liberation Fonts set is also used in HTML editions if the set is installed on your system.
If not, alternative but equivalent typefaces are displayed.
Note: Red Hat Enterprise Linux 5 and later includes the Liberation Fonts set by default.</p>
</div>
<div class="sect2">
<h3 id="typographic-conventions"><a class="anchor" href="#typographic-conventions"></a>Typographic Conventions</h3>
<div class="paragraph">
<p>Four typographic conventions are used to call attention to specific words and phrases.
These conventions, and the circumstances they apply to, are as follows.</p>
</div>
<div class="paragraph">
<p><code>Mono-spaced Bold</code></p>
</div>
<div class="paragraph">
<p>Used to highlight system input, including shell commands, file names and paths.
Also used to highlight key caps and key-combinations.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
To see the contents of the file <em class="path">my_next_bestselling_novel</em> in your current working directory, enter the <code>cat my_next_bestselling_novel</code> command at the shell prompt and press <kbd>Enter</kbd> to execute the command.
</blockquote>
</div>
<div class="paragraph">
<p>The above includes a file name, a shell command and a key cap, all presented in Mono-spaced Bold and all distinguishable thanks to context.</p>
</div>
<div class="paragraph">
<p>Key-combinations can be distinguished from key caps by the hyphen connecting each part of a key-combination.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Press <kbd>Enter</kbd> to execute the command.</p>
</div>
<div class="paragraph">
<p>Press  to switch to the first virtual terminal.
Press  to return to your X-Windows session.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The first sentence highlights the particular key cap to press.
The second highlights two sets of three key caps, each set pressed simultaneously.</p>
</div>
<div class="paragraph">
<p>If source code is discussed, class names, methods, functions, variable names and returned values mentioned within a paragraph will be presented as above, in <code>Mono-spaced Bold</code>.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
File-related classes include <code class="class">filesystem</code> for file systems, <code class="class">file</code> for files, and <code class="class">dir</code> for directories.
Each class has its own associated set of permissions.
</blockquote>
</div>
<div class="paragraph">
<p><code class="app">Proportional Bold</code></p>
</div>
<div class="paragraph">
<p>This denotes words or phrases encountered on a system, including application names; dialogue box text; labelled buttons; check-box and radio button labels; menu titles and sub-menu titles.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Choose <span class="menu">System &gt; Preferences &gt; Mouse</span> from the main menu bar to launch <code class="app">Mouse Preferences</code>.
In the <span class="label">Buttons</span> tab, click the <span class="label">Left-handed mouse</span> check box and click <b class="button">Close</b> to switch the primary mouse button from the left to the right (making the mouse suitable for use in the left hand).</p>
</div>
<div class="paragraph">
<p>To insert a special character into a <code class="app">gedit</code> file, choose <span class="menu">Applications &gt; Accessories &gt; Character Map</span> from the main menu bar.
Next, choose <span class="menu">Search &gt; Find</span> from the <code class="app">Character Map</code> menu bar, type the name of the character in the <span class="label">Search</span> field and click <b class="button">Next</b>.
The character you sought will be highlighted in the <span class="label">Character Table</span>.
Double-click this highlighted character to place it in the <span class="label">Text to copy</span> field and then click the <b class="button">Copy</b> button.
Now switch back to your document and choose <span class="menu">Edit &gt; Paste</span> from the <code class="app">gedit</code> menu bar.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The above text includes application names; system-wide menu names and items; application-specific menu names; and buttons and text found within a GUI interface, all presented in Proportional Bold and all distinguishable by context.</p>
</div>
<div class="paragraph">
<p>Note the menu:&gt;[] shorthand used to indicate traversal through a menu and its sub-menus.
This is to avoid the difficult-to-follow 'Select  from the <span class="menuseq"><span class="menu">Preferences</span>&#160;&#9656; <span class="menuitem">] sub-menu in the menu:System[</span></span> menu of the main menu bar' approach.</p>
</div>
<div class="paragraph">
<p><code>Mono-spaced Bold Italic</code> or <code class="app">Proportional Bold Italic</code></p>
</div>
<div class="paragraph">
<p>Whether Mono-spaced Bold or Proportional Bold, the addition of Italics indicates replaceable or variable text.
Italics denotes text you do not input literally or displayed text that changes depending on circumstance.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>To connect to a remote machine using ssh, type <code>ssh <a href="mailto:username@domain.name">username@domain.name</a></code> at a shell prompt.
If the remote machine is <em class="path">example.com</em> and your username on that machine is john, type <code>ssh <a href="mailto:john@example.com">john@example.com</a></code>.</p>
</div>
<div class="paragraph">
<p>The <code>mount -o remount file-system</code> command remounts the named file system.
For example, to remount the <em class="path">/home</em> file system, the command is <code>mount -o remount /home</code>.</p>
</div>
<div class="paragraph">
<p>To see the version of a currently installed package, use the <code>rpm -q package</code> command.
It will return a result as follows: <code>package-version-release</code>.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Note the words in bold italics above &mdash;username, domain.name, file-system, package, version and release.
Each word is a placeholder, either for text you enter when issuing a command or for text displayed by the system.</p>
</div>
<div class="paragraph">
<p>Aside from standard usage for presenting the title of a work, italics denotes the first use of a new and important term.
For example:</p>
</div>
<div class="quoteblock">
<blockquote>
When the Apache HTTP Server accepts requests, it dispatches child processes or threads to handle them.
This group of child processes or threads is known as a <em class="term">server-pool</em>.
Under Apache HTTP Server 2.0, the responsibility for creating and maintaining these server-pools has been abstracted to a group of modules called <em class="term">Multi-Processing Modules</em> (<em class="term">MPMs</em>). Unlike other modules, only one module from the MPM group can be loaded by the Apache HTTP Server.
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="pull-quote-conventions"><a class="anchor" href="#pull-quote-conventions"></a>Pull-quote Conventions</h3>
<div class="paragraph">
<p>Two, commonly multi-line, data types are set off visually from the surrounding text.</p>
</div>
<div class="paragraph">
<p>Output sent to a terminal is set in <code>Mono-spaced Roman</code> and presented thus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>books        Desktop   documentation  drafts  mss    photos   stuff  svn
books_tests  Desktop1  downloads      images  notes  scripts  svgs</pre>
</div>
</div>
<div class="paragraph">
<p>Source-code listings are also set in <code>Mono-spaced Roman</code> but are presented and highlighted as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.jboss.book.jca.ex1;

import javax.naming.InitialContext;

public class ExClient
{
   public static void main(String args[])
       throws Exception
   {
      InitialContext iniCtx = new InitialContext();
      Object         ref    = iniCtx.lookup("EchoBean");
      EchoHome       home   = (EchoHome) ref;
      Echo           echo   = home.create();

      System.out.println("Created Echo");

      System.out.println("Echo.echo('Hello') = " + echo.echo("Hello"));
   }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="notes-and-warnings"><a class="anchor" href="#notes-and-warnings"></a>Notes and Warnings</h3>
<div class="paragraph">
<p>Finally, we use three visual styles to draw attention to information that might otherwise be overlooked.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>A note is a tip or shortcut or alternative approach to the task at hand.
Ignoring a note should have no negative consequences, but you might miss out on a trick that makes your life easier.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Important</div>
<div class="paragraph">
<p>Important boxes detail things that are easily missed: configuration changes that only apply to the current session, or services that need restarting before an update will apply.
Ignoring Important boxes won&#8217;t cause data loss but may cause irritation and frustration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Warning</div>
<div class="paragraph">
<p>A Warning should not be ignored.
Ignoring warnings will most likely cause data loss.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="provide-feedback-to-the-authors"><a class="anchor" href="#provide-feedback-to-the-authors"></a>Provide feedback to the authors!</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>If you find a typographical error in this manual, or if you have thought of a way to make this manual better, we would love to hear from you! Please submit a report in the the {this-issue.tracker.ur}, against the product Restcomm jSS7`   `, or contact the authors.</p>
</div>
<div class="paragraph">
<p>When submitting a bug report, be sure to mention the manual&#8217;s identifier: Restcomm jSS7</p>
</div>
<div class="paragraph">
<p>If you have a suggestion for improving the documentation, try to be as specific as possible when describing it.
If you have found an error, please include the section number and some of the surrounding text so we can find it easily.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_jss7_overview"><a class="anchor" href="#_jss7_overview"></a>1.1. Restcomm jSS7</h3>
<div class="paragraph">
<p>Restcomm jSS7 is the only Open Source Java based implementation of the SS7 protocol stack.
It provides implementation for <code>MTP2</code>, <code>MTP3</code>, <code>ISUP</code>, <code>SCCP</code>, <code>TCAP</code>, <code>CAMEL (Phase I, Phase II, Phase III and Phase IV)</code> and <code>MAP</code> protocols for a dedicated equipment.
It also has in-built support for <code>SIGTRAN (M3UA)</code> over IP and strictly adheres to the standards and specifications defined by the International Telecommunications Union (ITU) and American National Standards Institute (ANSI). The platform offers developers with a flexible API set that hides the lower layer details (legacy SS7 links or SIGTRAN) and therefore makes it simple and easy to develop SS7 applications as well as to migrate your applications from TDM equipments to M3UA. Restcomm  jSS7  is based on an easily scalable and configurable load-balancing architecture.</p>
</div>
<div class="paragraph">
<p>Restcomm jSS7 supports TDM hardware offered by major vendors in the market, namely Intel family boards (Dialogic) and  Zaptel/Dahdi (Digium, Sangoma).</p>
</div>
<div class="paragraph">
<p>If you intend to use only <code>M3UA</code> you can install the jSS7  on any Operating System that supports Java.
However if you wish to use SS7 cards, the native libaries for these are only compiled for Linux at the moment. Restcomm  jSS7  can work as a standalone library.
However if you wish to use JSLEE Resource Adapters, the Command Line Interface (Shell Management tool) or the GUI Management Console for run-time configuration, then you must have JBoss Application Server installed and running. Restcomm  jSS7  comes with JSLEE TCAP, MAP, CAP and ISUP Resource Adaptors (RA) that enable developers to build SS7  applications with ease.
Developers only require an understanding of Resource Adaptors and can focus on building applications quickly and efficiently rather than worry about the SS7 stack.</p>
</div>
<div class="paragraph">
<p>The Open Source Software gives you the flexibility to understand the readily available source code and customise the product for your Enterprise needs.</p>
</div>
<div class="paragraph">
<p>This guide provides details on configuring and using the platform and information regarding the supported protocols and compliant standards.
For installation instructions, please refer to the Installation Guide published along with this.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ss7_overview"><a class="anchor" href="#_ss7_overview"></a>1.2. About SS7</h3>
<div class="paragraph">
<p>SS7 (Signaling System No.7) is a set of signaling protocols defined for information exchange in telephony.
It is the global standard for telecommunications and is defined by the <a href="http://www.voip-info.org/wiki/view/ITU">International Telecommunication Union (ITU) - Telecommunication Standardization Sector (ITU-T)</a>.
It is also commonly referred to as Common Channel Signaling System No.
7 (i.e., SS7 or C7).</p>
</div>
<div class="paragraph">
<p>In telephony (wireless and wireline), the information associated with a call must be exchanged between a telephone and the telephone exchange or between exchanges, transit nodes and other elements in the network.
Information exchange is required to set up, control and tear down calls and this exchange of information is called Signaling.
SS7 is the global standard that defines the procedures and protocol to be followed by network elements in the Public Switched Telephone Network (PSTN) in order to exchange information over a digital signaling network to effect wireless (cellular) and wireline call setup, route,control, monitor and terminate.</p>
</div>
<div class="paragraph">
<p>The ITU definition of SS7 allows for national variants such as the American National Standards Institute (ANSI) and Bell Communications Research (Telcordia Technologies) standards used in North America and the European Telecommunications Standards Institute ( <a href="http://www.voip-info.org/wiki/view/ETSI">ETSI</a> ) standard used in Europe.</p>
</div>
<div class="paragraph">
<p>The hardware and software functions of the  protocol are divided into functional abstractions called "levels". These levels map loosely to the Open Systems Interconnect (OSI) 7-layer model defined by the <a href="http://www.iso.ch/">International Standards Organization (ISO)</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/ss7-fig3.gif" alt="ss7 fig3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jss7_implemented_protocols"><a class="anchor" href="#_jss7_implemented_protocols"></a>1.3. Implemented Protocols and Standards Compliance</h3>
<div class="paragraph">
<p>Restcomm jSS7 is a software based implementation of the SS7 protocol.
It provides implementation for Level 2 and above in the SS7 protocol Stack.
The Restcomm jSS7 is a platform in the sense that it does not provide the application itself but rather allows users to build their own SS7 applications using Restcomm jSS7 as a platform.</p>
</div>
<div class="paragraph">
<p>The figure below depicts the various SS7 protocols implemented by Restcomm jSS7 .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/MobicentsjSS7Layers.jpg" alt="MobicentsjSS7Layers">
</div>
</div>
<div class="paragraph">
<p>Restcomm jSS7 adheres to the standards specified by ITU and ANSI.
The table below depicts the implementation standards compliance matrix.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Standards Compliance</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Stack</th>
<th class="tableblock halign-left valign-top">Compliance</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISUP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ITU-T Q.761 to Q.764 and Q.767</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ITU-T Q.711 to Q.716, ANSI T1.112-2000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ITU-T Q.771 to Q.775, ANSI T1.114-2000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GSM 09.02, GSM 29.002, GSM 03.40</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GSM 09.78 - CAMEL Phase - I, II, III and IV</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">M3UA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RFC 4666</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>M3UA, SCCP and TCAP stacks are compliant with ANSI standard.
ANSI support for MAP, CAP and ISUP is not ready.</p>
</div>
</div>
<div class="sect2">
<h3 id="_major_features"><a class="anchor" href="#_major_features"></a>1.4. Major Features of Restcomm jSS7</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Java-based</dt>
<dd>
<p>Restcomm jSS7 is the only Java based SS7 stack.
It is robust and reliable and can be installed on any Operating System that supports Java (JDK 7 and SCTP).</p>
</dd>
<dt class="hdlist1">Open Source</dt>
<dd>
<p>The Software is open-source, giving you the freedom the understand the code and customise it to your enterprise needs.
It is supported by a vibrant Open source community.</p>
</dd>
<dt class="hdlist1">SS7 Hardware Cards</dt>
<dd>
<p>Restcomm jSS7 can be used with Intel family boards (Dialogic SS7 cards) or Zaptel/Dahdi compatible TDM devices (Digium, Sangoma).</p>
</dd>
<dt class="hdlist1">SIGTRAN (M3UA)</dt>
<dd>
<p>It also has in-built support for SIGTRAN (M3UA using SCTP).Restcomm jSS7 M3UA is based on RFC 4666 and supports ASP, SGW or IPSP modes.
It supports both Single Exchange and Double Exchange of messages.</p>
</dd>
<dt class="hdlist1">Flexibile and Consistent API</dt>
<dd>
<p>It offers a flexible and consistent API set to develop SS7 applications quickly and efciently irrespective of the lower layer details (legacy SS7 links or SIGTRAN). For example, applications using Restcomm jSS7 SCCP (and/or upper layers) can be easily migrated from TDM equipments to Restcomm jSS7 M3UA with just configuration changes without having to modify a single line of code.</p>
</dd>
<dt class="hdlist1">Standalone or JSLEE RA</dt>
<dd>
<p>You can use it as a standalone library or make use of JSLEE RA (Resource Adaptors) that come with it to manage the Stack and develop applications effectively.</p>
</dd>
<dt class="hdlist1">Easy Configuration and Management</dt>
<dd>
<p>Restcomm jSS7 comes with an efficient Command Line Interface (CLI) tool allowing you to completely configure the Stack at run-time and manage it using simple commands rather than do everything manually. Restcomm jSS7 also comes with a Graphical User Interface that will allow you to configure, monitor and manage the Stack through a convenient user-friendly interface.</p>
</dd>
<dt class="hdlist1">Scalability</dt>
<dd>
<p>Restcomm jSS7 is easily scalable with a configurable load-balancing architecture.</p>
</dd>
<dt class="hdlist1">Statistics</dt>
<dd>
<p>Restcomm jSS7 provides teal time statistics at <code>TCAP</code> level indicating number of dialogs, components, error&#8217;s etc for given time period</p>
</dd>
<dt class="hdlist1">Technical Specifications</dt>
<dd>
<p>Restcomm jSS7 is not restricted by any license or Transaction Per Second model.
The only restricting factor is memory + CPU capacity of the host servers.</p>
<div class="ulist">
<ul>
<li>
<p>Restcomm SCTP supports as many associations as supported by the underlying Operating System.</p>
</li>
<li>
<p>Restcomm M3UA can be confgured to have as many ASP&#8217;s / IPSP&#8217;s as needed by the system.</p>
</li>
<li>
<p>Restcomm SCCP can be confgured to have virtually unlimited Global Title Translation rules and also supports wild characters for partial matching of Global Title digits.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_design_jss7"><a class="anchor" href="#_design_jss7"></a>2. Architecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_logical_divisions"><a class="anchor" href="#_logical_divisions"></a>2.1. Logical Design</h3>
<div class="paragraph">
<p>The Restcomm jSS7 is logically divided into two sections - lower and upper.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The lower section provides implementation for SS7 Level 2 and Level 3.
This section is therefore influenced by the type of SS7 hardware (Level 1) used.</p>
</li>
<li>
<p>The upper section provides implementation for SS7 Level 4 and above.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This logical division offers great flexibility where hardware is concerned.
Irrespective of the type of hardware used in the lower section, Restcomm jSS7 Level 4 and above remains the same.
Since the API set is consistent regardless of the lower layers, you can easily migrate your applications from TDM equipments to M3UA.
For example, applications using Restcomm SCCP stack (and/or upper layers) can easily be migrated from TDM equipments to Restcomm M3UA with just configuration changes and without changing a single line of code.</p>
</div>
<div class="paragraph">
<p>Restcomm jSS7 is designed efficiently to offer you the flexibility to install and use the Levels 2,3 and 4 in the same JVM and machine where SS7 Hardware (Level 1) is installed.
Alternately, you can also install Level 1,2 and 3 in one machine and install Level 4 on a separate machine.
In the second scenario, <code>M3UA</code> over <code>SCTP</code>  is used for communication between Level 3 and Level 4 (on different machines) and this is referred to as Restcomm  Signaling Gateway.
The figures below illustrate the above 2 scenarios.</p>
</div>
<div class="paragraph">
<p>Scenario 1: The complete Restcomm jSS7 is installed in one machine.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/SS7StackSimple.jpg" alt="SS7StackSimple">
</div>
</div>
<div class="paragraph">
<p>The above two sce</p>
</div>
<div class="paragraph">
<p>Scenario 2: Restcomm Signaling Gateway - Level 3 and below are installed on one machine and Level 4 is installed on a different machine.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/MobicentsSgw.jpg" alt="MobicentsSgw">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you use Restcomm M3UA stack, you must use JDK 7 to run the stack as well as to compile the source code.
M3UA leverages Java SCTP which is available only in JDK 7.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more details regarding installation, please refer to the Restcomm jSS7 Installation Guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dir_structure"><a class="anchor" href="#_dir_structure"></a>2.2. Directory Structure</h3>
<div class="paragraph">
<p>The top-level directory is named <em class="path">-</em> and immediately below this are five sub-directories named <em class="path">asn</em>, <em class="path">_docs</em>, <em class="path">oam</em>, <em class="path">sctp</em> and <em class="path">ss7</em>.
All the functional modules of the Stack reside in the <em class="path">ss7</em> folder.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>|- restcomm-jss7-<version>
		|- asn

		|- docs

		|- oam

		|- sctp

		|- ss7
				|+ protocols
				|+ shell
				|+ restcomm-ss7-service
				|+ restcomm-ss7-sgw
				|+ restcomm-ss7-simulator
				|+ restcomm-ss7-traceparser
				|+ template</pre>
</div>
</div>
<div class="paragraph">
<p>The following is a description of the important services and libraries that make up Restcomm jSS7</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em class="path">asn</em></dt>
<dd>
<p>Abstract Syntax Notation One (ASN.1) library is used by various Restcomm jSS7 protocols to encode/decode the structured data exchanged between Signaling Points over networks.
For more details on the <code>asn</code> library, refer to the  document included in the <em class="path">_docs</em> folder.
Applications using any of the Restcomm  jSS7  User Protocols may never need to call an <code>asn</code> API directly, however it must be in the classpath since Restcomm  jSS7  User Protocols refer to this library.</p>
</dd>
<dt class="hdlist1"><em class="path">docs</em></dt>
<dd>
<p>All relevant documentation for Restcomm jSS7 .</p>
</dd>
<dt class="hdlist1"><em class="path">oam</em></dt>
<dd>
<p>UI Management module</p>
</dd>
<dt class="hdlist1"><em class="path">sctp</em></dt>
<dd>
<p>Stream Control Transmission Protocol (SCTP) Library provides the APIs over Java SCTP.
This library will be used only if M3UA layer is used.
For more details on the <code>sctp</code> library, refer to the documentation included in the <em class="path">docs</em> folder.</p>
</dd>
<dt class="hdlist1"><em class="path">ss7</em></dt>
<dd>
<p>This folder contains the core protocol libraries that will be used by end applications as well as by the SS7 Service deployed in JBoss AS.
The sub-directories included in the <em class="path">ss7</em> folder are:</p>
<div class="ulist">
<ul>
<li>
<p><em class="path">restcomm-ss7-sgw</em> : Standalone Signaling Gateway</p>
</li>
<li>
<p><em class="path">restcomm-ss7-service</em> : SS7 service is the core engine and is used in conjunction with JBoss AS.
The installation guide will teach you to install the Stack as a standalone component if you do not wish to run it as a JBoss AS Service.</p>
</li>
<li>
<p><em class="path">restcomm-ss7-simulator</em> : SS7 Simulator is an application for testing the SS7 stack and displaying its functionality.
It is also a good example of how to use this stack.</p>
</li>
<li>
<p><em class="path">restcomm-ss7-traceparser</em> : mobicents jSS7 Stack Trace Parser is a simple tool that can parse trace capture data files (of some formats) and log its content in some log file in a text form</p>
</li>
<li>
<p><em class="path">protocols</em> : Restcomm  jSS7  User Protocols libraries.
Your application will directly  call the APIs exposed by these libraries.
Depending on the application, you may be interested in either <code>TCAP</code> or <code>MAP</code>, or both, or <code>ISUP</code> libraries.</p>
</li>
<li>
<p><em class="path">shell</em> : This holds the Command Line Interface (CLI) module to manage the Restcomm  jSS7 .</p>
</li>
<li>
<p><em class="path">template</em> : This folder contains templates that are needed for JSS7 stack configuring.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="functional-blocks"><a class="anchor" href="#functional-blocks"></a>2.3. Functional Blocks</h3>
<div class="paragraph">
<p>The major functional modules of the jSS7 are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SS7 Service <em class="path">[dir: restcomm-ss7-service]</em></p>
</li>
<li>
<p>Signaling Gateway <em class="path">[dir: restcomm-ss7-sgw]</em></p>
</li>
<li>
<p>Shell <em class="path">[dir: shell]</em></p>
</li>
<li>
<p>GUI <em class="path">[dir: ui]</em></p>
</li>
<li>
<p>SS7 Simulator <em class="path">restcomm-ss7-simulator]</em></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following sub-sections discuss in detail about the functionality of these individual components.</p>
</div>
<div class="sect3">
<h4 id="_design_overview_ss7_service"><a class="anchor" href="#_design_overview_ss7_service"></a>2.3.1. SS7 Service</h4>
<div class="paragraph">
<p>SS7 Service creates an instance of higher layer of the Restcomm Stack and binds the instance to JNDI.
SS7 Service is a JMX based service deployed in JBoss Application Server.
It hides the underlying details like whether Level 4 and above are connected to peer via <code>M3UA</code> or if connected to the SS7 Hardware installed in the same machine as Level 4.</p>
</div>
<div class="paragraph">
<p>Following services are bound:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. SS7 Services</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Stack Name</th>
<th class="tableblock halign-left valign-top">JNDI Name</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java:/restcomm/ss7/tcap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes TCAP Stack via JNDI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java:/restcomm/ss7/map	Exposes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MAP Stack via JNDI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java:/restcomm/ss7/cap	Exposes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAP Stack via JNDI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISUP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java:/restcomm/ss7/isup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes ISUP stack via JNDI</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The figure below depicts the elements that are deployed as part of the SS7 MAP Service.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/ss7-design-overview3.jpg" alt="ss7 design overview3">
</div>
<div class="title">Figure 1. Restcomm jSS7 Stack Service Elements</div>
</div>
<div class="paragraph">
<p>SS7 Service Elements serve the following purposes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Expose protocol access points</dt>
<dd>
<p>Access points allow users to access lower layer protocols like <code>MAP</code> and interact with the SS7 network through such protocols.</p>
</dd>
<dt class="hdlist1">Expose management interface</dt>
<dd>
<p><code>Shell Executor</code> allows the  <code>Shell</code> client to connect and issue commands.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The figure below depicts the elements that are deployed as part of SS7 Service.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/ss7-design-overview3.jpg" alt="ss7 design overview3">
</div>
<div class="title">Figure 2. Restcomm jSS7 Stack Service Elements</div>
</div>
<div class="paragraph">
<p>For more details on Running and Configuring the SS7 Service Elements, please refer to the chapter <a href="#_running_jss7">Running</a>.</p>
</div>
<div class="sect4">
<h5 id="_design_functional_ss7_service"><a class="anchor" href="#_design_functional_ss7_service"></a>2.3.1.1. Stack Usage</h5>
<div class="paragraph">
<p>The figure below depicts how Restcomm jSS7 is used.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/ss7-design-overview2.jpg" alt="ss7 design overview2">
</div>
<div class="title">Figure 3. Restcomm jSS7 Stack General Design</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mobicents_signaling_gateway"><a class="anchor" href="#_mobicents_signaling_gateway"></a>2.3.2. Signaling Gateway</h4>
<div class="paragraph">
<p>Restcomm Signaling Gateway (SG) is a signaling agent that receives and sends Switched Circuit Network (SCN)  native signaling at the edge of the IP network. Restcomm Signaling Gateway leverages MTP and Restcomm <code>M3UA</code> Stack  explained in <a href="#_mobicents_signaling_gateway_m3ua">Restcomm  Signaling Gateway M3UA Stack</a>.</p>
</div>
<div class="paragraph">
<p>The figure below shows the components included in Restcomm Signaling Gateway.
Configuring the Signaling Gateway is explained in the chapter <a href="#_running_jss7">Running</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/MobicentsSS7Gateway.jpg" alt="MobicentsSS7Gateway">
</div>
<div class="title">Figure 4. Restcomm Signaling Gateway Components</div>
</div>
</div>
<div class="sect3">
<h4 id="_design_overview_shell"><a class="anchor" href="#_design_overview_shell"></a>2.3.3. Shell - Comman Line Interface</h4>
<div class="paragraph">
<p><code>Shell</code> is a Command Line Interface (CLI) tool that will allow you to manage different aspects of Restcomm  jSS7  in an interactive manner.
It connects to different instances of Restcomm  jSS7  which manages <code>Linksets</code>, <code>SCCP</code> resource, routing and <code>M3UA</code>.					Usually <code>Shell</code> will be invoked from a remote machine(remote to <code>Linksets</code> and application protocols).</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_overview_gui"><a class="anchor" href="#_design_overview_gui"></a>2.3.4. Graphical User Interface</h4>
<div class="paragraph">
<p>The Graphical User Interface will allow you to manage different aspects of Restcomm jSS7 through a convenient user-friendly interface.
You can launch the GUI in any Web Browser and manage the Stack instance efficiently using the GUI operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_ss7_simulator"><a class="anchor" href="#_design_ss7_simulator"></a>2.3.5. SS7 Simulator</h4>
<div class="paragraph">
<p>Restcomm jSS7 comes with a Simulator that will help you to understand the functionality of the Stack.
The Simulator may be used as an application for testing the SS7 Stack or as an example of how to use this Stack.
You can run several instances of the Simulator in a single machine and each instance can have its own configuration.
In addition, the Simulator offers you the flexibility to run it locally or remotely.
You must remember to configure all layers before running tests with the Simulator.</p>
</div>
<div class="paragraph">
<p>The Simulator contains three layers of SS7 stack components and one testing task layer which presents the concrete testing task.
You can select from these layers as required, however some layers demand corresponding lower layers.
For example, the <code>TCAP+MAP</code> layer demands <code>SCCP</code> as layer 2.
Depending on your testing goals, you can configure each of these layers separately but the configuration options are limited and do not cover all possible SS7 Stack options.</p>
</div>
<div class="sect4">
<h5 id="simulator-layers"><a class="anchor" href="#simulator-layers"></a>2.3.5.1. Simulator Layers</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Layer 1 [MTP3]</p>
<div class="ulist">
<ul>
<li>
<p>M3UA</p>
</li>
<li>
<p>DialogicCard</p>
</li>
<li>
<p>DahdiCard [yet to be implemented]</p>
</li>
</ul>
</div>
</li>
<li>
<p>Layer 2</p>
<div class="ulist">
<ul>
<li>
<p>SCCP</p>
</li>
<li>
<p>ISUP [yet to be implemented]</p>
</li>
</ul>
</div>
</li>
<li>
<p>Layer 3</p>
<div class="ulist">
<ul>
<li>
<p>TCAP + MAP</p>
</li>
<li>
<p>TCAP + CAP</p>
</li>
<li>
<p>TCAP + INAP [yet to be implemented]</p>
</li>
</ul>
</div>
</li>
<li>
<p>Testing Task Layer</p>
<div class="ulist">
<ul>
<li>
<p>USSD client test</p>
</li>
<li>
<p>USSD server test</p>
</li>
<li>
<p>SMS server test</p>
</li>
<li>
<p>SMS client test</p>
</li>
<li>
<p>CAP SSF test</p>
</li>
<li>
<p>CAP SCF test</p>
</li>
<li>
<p>MAP ATI client test</p>
</li>
<li>
<p>MAP ATI server test</p>
</li>
<li>
<p>MAP Check IMEI client test</p>
</li>
<li>
<p>MAP Check IMEI server test</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_technical_notes"><a class="anchor" href="#_technical_notes"></a>3. Technical notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_design_multitenancy"><a class="anchor" href="#_design_multitenancy"></a>3.1. Multi tenancy support</h3>
<div class="paragraph">
<p>Multi tenancy allows same instance of Restcomm jSS7 to connect to different operators, each having its own  links and point-codes.</p>
</div>
<div class="paragraph">
<p>Multi tenancy is achieved by having a model of SS7 network as a splitted to several logical networks.
Each logical network has a corresponded key "networkId". It is digital one and default value (if we do not specify it) - 0.</p>
</div>
<div class="paragraph">
<p>NetworkId value is assigned for a configurable objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SCCP SAP</p>
</li>
<li>
<p>SCCP Rule</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>NetworkId is also assigned to activities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SccpMessage (assigned by Service Access Point (SAP) for SS7 originated messages, assigned by TCAP Dialog for TCAP originated messages)</p>
</li>
<li>
<p>TCAP Dialog (assigned by SccpMessage for SCCP originated messages, assigned by upper Dialog for user messages)</p>
</li>
<li>
<p>MAP / CAP Dialog (same as TCAP Dialog)</p>
</li>
<li>
<p>SCCP rule is taken into account only when SCCP rule networkId == SccpMessage networkId</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When an SCCP message comes to SCCP stack the a networkId is assigned to the SCCP message depending on DPC and OPC values of the message.
In order to SCCP stack can properly assign a networkId value, then at least either DPC or DPC of messages for different networkId subnetworks must be different  and SAPs / Destinations for SAPs were configured for unintersected intervals.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_out_cong_control"><a class="anchor" href="#_design_out_cong_control"></a>3.2. Congestion control for outgoing messageflow</h3>
<div class="paragraph">
<p>The target of outgoing congestion control is to report to upper stacks that SS7 links are congested (or down) so upper stacks / SS7 users can reduce traffic load or stop of message sending. Overload / disconnection cases are calculated per a networkID area.</p>
</div>
<div class="paragraph">
<p>For outgoing messageflow (when we are sending messages to SS7 network) low level counters are implemented at SCTP library (MTP2 level for the sigtran stack). SCTP library measures delays between message delivering from MTP3 level for delivering and a real sending to the IP network.
There are 3 levels of congestion (1, 2 or 3) depending on the delay length.
Then m3ua checks this data and issues MTP-STATUS indications to upper layers (ISUP or SCCP). If we use MTP3 stacks from Dialogic or Dahdi legacy cards, we use MTP-STATUS indications that are issued by MTP3 levels of these cards.
SCCP level has a congestion control from SS7 specification, where SCCP by timers TIMER_A and TIMER_D processes a congestion measurement logic.
At the SCCP level the blocking of outgoing SCCP messages is also implemented (it is disabled (and not used) by default but can be activated).</p>
</div>
<div class="paragraph">
<p>SCCP and M3UA levels use the outgoing congestion control results for sharing of the outgoing SS7 traffic between primary / backup links.
When primary (for dominant scenario) or some link (for loadsharing scenario) is congested up to at least level 2 SCCP stack routes the traffic to a backup / another link.
M3UA stack when loadsharing between ASP destinations when some link for loadshare traffic-mode is congested up to at least level 2 also tries to route the traffic to another link.
(For loadsharing between AS destinations the congestion levels are not taken into account).</p>
</div>
<div class="paragraph">
<p>TCAP level (and upper stack levels) provides methods for the congestion control monitoring for SS7 stack users:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    /**
     * The collection of netwokIds that are marked as prohibited or congested.
     *
     * @return The collection of pairs: netwokId value - NetworkIdState (prohibited / congested state)
     */
    FastMap&lt;Integer, NetworkIdState&gt; getNetworkIdStateList();

    /**
     * Returns the state of availability / congestion for a networkId subnetwork.
     * Returns null if there is no info (we need to
     * treat it as available)
     *
     * @param networkId
     * @return
     */
    NetworkIdState getNetworkIdState(int networkId);</code></pre>
</div>
</div>
<div class="paragraph">
<p>By these methods the TCAP stack provides the congestion and availability status for a SS7 subnetwork for a networkId.
NetworkIdState has two parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    boolean isAvailavle();
    int getCongLevel();</code></pre>
</div>
</div>
<div class="paragraph">
<p>and helps us to understand if the networkId is not available (connected) / not available (down) or congested / not.
Then TCAP / CAP / MAP user can check it and reduce / temporary block the outgoing traffic.</p>
</div>
<div class="paragraph">
<p>At the SCTP and SCCP levels we have several congestion control parameters that should be tuned depending on connection type (legacy / sigtran) and capacity for the best productivity.
See chapter <a href="#_sctp_property_cc_delaythreshold">Thresholds for outgoing congestion control</a> for configuring of congestion control settings for SCTP level and chapters <a href="#_sccp_property_cc_timer_a">Timer A value for the congestion control</a>, <a href="#_sccp_property_cc_timer_d">Timer D value for the congestion control</a>, <a href="#_sccp_property_cc_algo">Algorithm of the congestion control at SCCP level</a> and <a href="#_sccp_property_cc_blockingoutgoungsccpmessages">Blocking of outgoing messages in case of the congestion</a> for configuring of congestion control settings for SCCP level.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_in_cong_control"><a class="anchor" href="#_design_in_cong_control"></a>3.3. Congestion control for incoming messageflow</h3>
<div class="paragraph">
<p>The target of incoming congestion control is to measure of server load and prevent of accepting new incoming from a peer new dialogs / messages. This load info can also be used by SS7 stack users for reduce of generating of traffic load.</p>
</div>
<div class="paragraph">
<p>There are following sources of load measuring:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ExecutorCongestionMonitor - measuring of how much time events wait at a Executor queue before processing start. This CongestionMonitors are added at the MTP stack levels and reports results to TCAP level.</p>
</li>
<li>
<p>MemoryCongestionMonitor - measuring a percentage of usege of memory.</p>
</li>
<li>
<p>UserPartCongestionMonitor - TCAP users can provide to TCAP level extra info of congestion to some external for SS7 stack resourse.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then TCAP level calculate a cumulative congestion level (the maximul level is taken). There are 4 levels of congestion (0-3). 0 level means no congestion, 3 level means max congetion. When <a href="#_tcap_property_blockingincomingtcapmessages">Blocking of incoming messages in congestion case</a> option is turned on (disabled by default) the in case of 2 congestion level all incoming new dialogs are rejected and in case of 3 congestion level - all incoming TCAP messages are rejected.</p>
</div>
<div class="paragraph">
<p>By a following method of TCAPProvider interface upper levels can provide a congestion level of a TCAP user part:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    /**
     * Setting of a congestion level for a TCAP user "congObject"
     *
     * @param congObject a String with the name of an object
     * @param level a congestion level for this object
     */
    void setUserPartCongestionLevel(String congObject, int level);</code></pre>
</div>
</div>
<div class="paragraph">
<p>By a following methods of TCAPProvider interface upper levels can get info of a congestion level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    /**
     * Returns a congestion level of a Memory congestion monitor
     *
     * @return
     */
    int getMemoryCongestionLevel();

    /**
     * Returns a congestion level of thread Executors for processing of incoming messages
     *
     * @return
     */
    int getExecutorCongestionLevel();

    /**
     * Returns a max congestion level for UserPartCongestion, MemoryCongestion and ExecutorCongestionLevel
     *
     * @return
     */
    int getCumulativeCongestionLevel();</code></pre>
</div>
</div>
<div class="paragraph">
<p>See configuring parameters of Executors congestion control in <a href="#_tcap_property_executordelaythreshold">Thresholds for Executors congestion control</a> chapter and configuring parameters of Memory congestion control in
<a href="#_tcap_property_memorythreshold">Thresholds for Memory congestion control</a> chapter.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_jss7"><a class="anchor" href="#_running_jss7"></a>4. Running</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You must ensure that you follow the steps outlined in the Restcomm jSS7 Installation Guide to install the Components.
As explained in the Installation Guide, you may install  jSS7 as a standalone library or as a JBoss AS SS7 Service or as a Signaling Gateway.
Once installed, you can run the different Components as described in the sections below.</p>
</div>
<div class="sect2">
<h3 id="_running_ss7_service"><a class="anchor" href="#_running_ss7_service"></a>4.1. Running Restcomm  SS7 Service</h3>
<div class="olist arabic">
<div class="title">Procedure: Start SS7 Service</div>
<ol class="arabic">
<li>
<p>Pre-requisite: You must have SS7 Service deployed in the JBoss Application Server as explained in the Installation Guide.</p>
</li>
<li>
<p>All you have to do to start the Service is start the JBoss AS.
This will automatically start the SS7 Service.
To start the JBoss Server you must execute the <em class="path">run.sh</em> (Unix) or <em class="path">run.bat</em> (Microsoft Windows) startup script in the <em class="path">&lt;jboss_install_directory&gt;/bin</em> folder (on Unix or Windows).</p>
</li>
<li>
<p>Result: If the service started properly you should see following lines in the Unix terminal or Command Prompt depending on your environment:</p>
<div class="listingblock">
<div class="content">
<pre>14:07:47,580 INFO  [TomcatDeployment] deploy, ctxPath=/admin-console
14:07:47,650 INFO  [config] Initializing Mojarra (1.2_12-b01-FCS) for context '/admin-console'
14:07:49,980 INFO  [TomcatDeployment] deploy, ctxPath=/
14:07:50,032 INFO  [TomcatDeployment] deploy, ctxPath=/jmx-console
14:07:50,235 INFO  [ManagementImpl] SCTP configuration file path /home/vinu/jboss-5.1.0.GA/server/default/data/SCTPManagement_sctp.xml
14:07:50,262 INFO  [ManagementImpl] Started SCTP Management=SCTPManagement WorkerThreads=0 SingleThread=true
14:07:50,269 INFO  [SelectorThread] SelectorThread for Management=SCTPManagement started.
14:07:50,422 INFO  [M3UAManagement] M3UA configuration file path /home/vinu/jboss-5.1.0.GA/server/default/data/Mtp3UserPart_m3ua.xml
14:07:50,512 INFO  [M3UAManagement] Started M3UAManagement
14:07:50,605 INFO  [SccpStackImpl-SccpStack] Starting ...
14:07:50,665 INFO  [Router] SCCP Router configuration file path /home/vinu/jboss-5.1.0.GA/server/default/data/SccpStack_sccprouter.xml
14:07:50,667 INFO  [Router] Started SCCP Router
14:07:50,668 INFO  [SccpResource] SCCP Resource configuration file path /home/vinu/jboss-5.1.0.GA/server/default/data/SccpStack_sccpresource.xml
14:07:50,669 INFO  [SccpResource] Started Sccp Resource
14:07:50,671 INFO  [SccpStackImpl-SccpStack] Starting routing engine...
14:07:50,671 INFO  [SccpStackImpl-SccpStack] Starting management ...
14:07:50,671 INFO  [SccpStackImpl-SccpStack] Starting MSU handler...
14:07:50,696 INFO  [ShellExecutor] Starting SS7 management shell environment
14:07:50,714 INFO  [ShellExecutor] ShellExecutor listening at /127.0.0.1:3435
14:07:50,776 INFO  [TCAPStackImpl] Starting ...org.restcomm.protocols.ss7.tcap.TCAPProviderImpl@14d18a1
14:07:50,776 INFO  [TCAPProviderImpl] Starting TCAP Provider
14:07:50,776 INFO  [TCAPProviderImpl] Registered SCCP listener with address 8
14:07:51,012 INFO  [SS7Service]  [[[[[[[[[ Mobicents jSS7 3.0.0 service started ]]]]]]]]]
14:07:51,156 INFO  [Http11Protocol] Starting Coyote HTTP/1.1 on http-127.0.0.1-8080
14:07:51,177 INFO  [AjpProtocol] Starting Coyote AJP/1.3 on ajp-127.0.0.1-8009
14:07:51,184 INFO  [ServerImpl] JBoss (Microcontainer) [5.1.0.GA (build: SVNTag=JBoss_5_1_0_GA date=200905221053)] Started in 40s:691ms</pre>
</div>
</div>
</li>
<li>
<p>If you are starting Restcomm-jSS7-8.0.0-170 for the first time, SS7 is not configured.
You need to use the Shell Client to connect to Restcomm-jSS7-8.0.0-170 .
Using CLI you can configure how service interacts with SS7 network, that is you configure either installed SS7 card and its native library , or <code>M3UA</code> layer.
You can also use the GUI to achieve the same.
Once configured, the state and configuration of SS7 is persisted which stands server re-start.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure: Stop SS7 Service</div>
<ol class="arabic">
<li>
<p>To stop the SS7 service, you must shut down the JBoss Application Server.
To shut down the server(s) you must execute the <code>shutdown.sh -s</code> (Unix) or  <code>shutdown.bat -s</code> (Microsoft Windows) script in the <em class="path">&lt;jboss_install_directory&gt;/bin</em>  directory (on Unix or Windows).</p>
</li>
<li>
<p>If the Service stopped properly, you will see the following three lines as the  last output in the Unix terminal or Command Prompt:</p>
<div class="listingblock">
<div class="content">
<pre>[Server] Shutdown complete
Halting VM</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_running_sgw_binary"><a class="anchor" href="#_running_sgw_binary"></a>4.2. Running Restcomm  Signaling Gateway</h3>
<div class="sect3">
<h4 id="_starting_sgw_binary"><a class="anchor" href="#_starting_sgw_binary"></a>4.2.1. Start the Gateway</h4>
<div class="olist arabic">
<div class="title">Procedure: Start the Restcomm  Signaling Gateway on</div>
<ol class="arabic">
<li>
<p>Change the working directory to the installation directory (the one into which the zip file&#8217;s contents was extracted to)</p>
<div class="listingblock">
<div class="content">
<pre>downloads]$ cd restcomm-jss7-<version>/ss7/restcomm-ss7-sgw</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Ensure that the <em class="path">bin/run.sh</em>							start script is executable.</p>
<div class="listingblock">
<div class="content">
<pre>restcomm-ss7-sgw$ chmod +x bin/run.sh</pre>
</div>
</div>
</li>
<li>
<p>Execute the <em class="path">run.sh</em>							Bourne shell script.</p>
<div class="listingblock">
<div class="content">
<pre>restcomm-ss7-sgw$ ./bin/run.sh</pre>
</div>
</div>
</li>
<li>
<p>In the Linux terminal, the Restcomm Signaling Gateway has started successfully if the last line of output is similar to the following</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>15:51:18,247 INFO  [MainDeployer] [[[[[[[[[ Mobicents Signaling Gateway: release.version= Started ]]]]]]]]]</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure: Start the Restcomm  Signaling Gateway on</div>
<ol class="arabic">
<li>
<p>Using Windows Explorer, navigate to the <em class="path">restcomm-jss7-&lt;version&gt;/ss7/restcomm-ss7-sgw/bin</em> subfolder in the installation directory.</p>
</li>
<li>
<p>The preferred way to start the Restcomm Signaling Gateway is from the Command Prompt.
The command line interface displays details of the startup process, including any problems encountered during the startup process.</p>
<div class="paragraph">
<p>Open the Command Prompt via the <span class="label">Start</span> menu and navigate to the correct folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>C:\Users\<user>\My	Downloads>cd "restcomm-jss7-<version>\ss7{this-folder}-ss7-sgw"</pre>
</div>
</div>
</li>
<li>
<p>Start the Gateway by executing the <em class="path">run.bat</em> file:</p>
<div class="ulist">
<ul>
<li>
<p><em class="path">run.bat</em> batch file:</p>
<div class="listingblock">
<div class="content">
<pre>C:\Users\&lt;user&gt;\My Downloads\mms-standalone&lt;version&gt;&gt;bin\run.bat</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_sgw_stopping"><a class="anchor" href="#_sgw_stopping"></a>4.2.2. Stop the Gateway</h4>
<div class="paragraph">
<p>The only option to stop the gateway is by pressing <code>Ctrl c</code>  and bringing down the JVM or killing the process.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sgw_running_alter"><a class="anchor" href="#_sgw_running_alter"></a>4.2.3. Bind the Gateway to IP</h4>
<div class="paragraph">
<p>Using <code>run.sh</code> without any arguments binds the gateway to <code>127.0.0.1</code>.
To bind the Gateway to a different IP, pass the IP address as value to the <code>-b</code> command line option.
For example to bind the server to <code>115.252.103.220</code> you will use the command as below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>restcomm-ss7-sgw$ ./bin/run.sh -b 115.252.103.220</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_standalone"><a class="anchor" href="#_running_standalone"></a>4.3. Running jSS7  as a Standalone library</h3>
<div class="paragraph">
<p>If you do not wish to use the JBoss Container and do not require JSLEE RAs you can configure and run the Stack as a Standalone library.
For more details, refer to <a href="#_configuring_standalone">Configuring as a Standalone library</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_running_shell"><a class="anchor" href="#_running_shell"></a>4.4. Running the Shell`Shell`</h3>
<div class="sect3">
<h4 id="_shell_start"><a class="anchor" href="#_shell_start"></a>4.4.1. Start the Shell Client</h4>
<div class="paragraph">
<p>Shell client can be started with following command from <em class="path">$JBOSS_HOME/bin</em>			:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[$] ./ss7-cli.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once console starts, it will print following like information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>version=6.2.8.493,name={this-platform} CLI,prefix={this-folder},vendor=TeleStax
{this-folder}&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ss7-cli</code>			script supports the following options</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Usage: SS7 [OPTIONS]
Valid Options
-v           Display version number and exit
-h           This help screen</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_connect_shell"><a class="anchor" href="#_connect_shell"></a>4.4.2. Connect to Managed Instance</h4>
<div class="paragraph">
<p>Shell needs to connect to managed instance.
Command to connect has following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>connect &lt;IP&gt; &lt;PORT&gt;</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 1. Connect to remote machine</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>mobicents&gt;connect 10.65.208.215 3435

mobicents(10.65.208.215:3435)&gt;</pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Host IP and port are optional, if not specified, shell will try to connect to <code>127.0.0.1:3435</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_disconnect_shell"><a class="anchor" href="#_disconnect_shell"></a>4.4.3. Disconnect</h4>
<div class="paragraph">
<p>Command to disconnect has following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>ss7 discconnect</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. Disconnect</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>mobicents(10.65.208.215:3435)&gt;ss7 disconnect

Bye
mobicents&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cli_security"><a class="anchor" href="#_cli_security"></a>4.4.4. Authentication and Audit Logs</h4>
<div class="sect4">
<h5 id="security"><a class="anchor" href="#security"></a>4.4.4.1. Security</h5>
<div class="paragraph">
<p>Security is a fundamental requirement of any Telecom application.
You must control access to your SS7 network and restrict who is allowed to access what and perform what operations.</p>
</div>
<div class="paragraph">
<p>Restcomm jSS7 CLI Security is based on the JBoss Security Framework.
The JBoss Security framework provides support for a role-based declarative security model as well as integration of custom security via a security proxy layer.
The default implementation of the declarative security model is based on Java Authentication and Authorization Service (JAAS) login modules and subjects.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Enable Security</div>
<ol class="arabic">
<li>
<p>Add a new parameter named &#8220;securityDomain&#8221; to the "ShellExecutor" bean in the configuration file <em class="path">jboss-5.1.0.GA/server/default/deploy/restcomm-ss7-service/META-INF/jboss-beans.xml</em> and save the changes.</p>
<div class="listingblock">
<div class="content">
<pre>&lt;property name="securityDomain"&gt;java:/jaas/jmx-console&lt;/property&gt;</pre>
</div>
</div>
</li>
<li>
<p>Configure the security domain in the file <em class="path">jboss-5.1.0.GA/server/default/conf/login-config.xml</em> following the instructions in the JBoss Admin Guide.</p>
</li>
<li>
<p>Create entries for user id and password in the file [path]_ jboss-5.1.0.GA/server/default/conf/props/jmx-console-users.properties_ for every user allowed to access the CLI.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure: Disable Security</div>
<ol class="arabic">
<li>
<p>Delete all configurations created as mentioned above and remove the parameter &#8220;securityDomain&#8221; from the "Shell Executor" bean defined in <em class="path">jboss-5.1.0.GA/server/default/deploy/restcomm-ss7-service/META-INF/jboss-beans.xml</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you would like to read more about the JBoss Security Framework, please refer to the JBoss Admin Guide available in their website.</p>
</div>
</div>
<div class="sect4">
<h5 id="_audit"><a class="anchor" href="#_audit"></a>4.4.4.2. Audit Configuration</h5>
<div class="paragraph">
<p>If security is enabled then you can log the operations performed by every user.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Enable Audit</div>
<ol class="arabic">
<li>
<p>Add a new appender to the file <em class="path">jboss-5.1.0.GA/server/default/conf/jboss-log4j.xml</em> as below:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;appender name="AUDIT" class="org.jboss.logging.appender.DailyRollingFileAppender"&gt;
	&lt;errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/&gt;
	&lt;param name="File" value="${jboss.server.log.dir}/audit.log"/&gt;
	&lt;param name="Append" value="true"/&gt;
	&lt;param name="DatePattern" value="'.'yyyy-MM-dd"/&gt;
	&lt;layout class="org.apache.log4j.PatternLayout"&gt;
		&lt;param name="ConversionPattern" value="%d %-5p [%c] (%t:%x) %m%n"/&gt;
	&lt;/layout&gt;
&lt;/appender&gt;</pre>
</div>
</div>
</li>
<li>
<p>Add a new category to the file <em class="path">jboss-5.1.0.GA/server/default/conf/jboss-log4j.xml</em> as below:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;category name="org.jboss.security.audit.providers.LogAuditProvider" additivity="false"&gt;
	&lt;priority value="TRACE"/&gt;
	&lt;appender-ref ref="AUDIT"/&gt;
&lt;/category&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>When security and audit is enabled, a sample audit log looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2012-11-28 22:17:27,005 TRACE [org.jboss.security.audit.providers.LogAuditProvider] (pool-19-thread-8:) [Success]message=login success;principal=admin;
2012-11-28 22:17:47,659 TRACE [org.jboss.security.audit.providers.LogAuditProvider] (pool-19-thread-1:) [Info]response=Successfully added client Association=SCTPAssoc1;principal=admin;command=sctp association create SCTPAssoc1 CLIENT 127.0.0.1 2775 127.0.0.1 2776;
2012-11-28 22:18:06,773 TRACE [org.jboss.security.audit.providers.LogAuditProvider] (pool-19-thread-3:) [Success]message=logout success;principal=admin;</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_commands_help"><a class="anchor" href="#_commands_help"></a>4.4.5. Command-line Completion</h4>
<div class="paragraph">
<p>Restcomm jSS7 Shell supports Command-line completion (Tab Completion) allowing you to type the first (or first few) character(s) of the comand and press tab to fill in the rest of the command.
As soon as you enter the CLI (by executing the <em class="path">ss7-cli.sh</em> script) you can make use of this feature to view all possible commands.</p>
</div>
<div class="paragraph">
<p>When you first enter CLI and press the "tab" key, CLI will display all operations permitted in that context.
Once you connect to a managed instance and while staying connected if you press the "tab" key it will display all other commands allowed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>mobicents&gt; [tab key press]
history  connect  exit
mobicents&gt;connect 10.65.208.215 3435
mobicents(10.65.208.215:3435)&gt; [tab key press]
sctp        linkset     m3ua        sccp        history     disconnect</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you enter the first few characters of a command and press "tab", CLI will automatically fill in the rest of the command or display all possible commands if there is more than one command beginning with the characters entered by you.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>mobicents(10.65.208.215:3435)&gt;sctp [tab key press]
server       association  --help
mobicents(10.65.208.215:3435)&gt;sctp</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, help files are also available for every command using the --help option.
The help files provide details of the command including possible parameters and examples of usage if applicable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>mobicents(10.65.208.215:3435)&gt;sctp --help
Name
	sctp
	Manage M3UA - SCTP

SYNOPSIS
	sctp server [create | destroy | start | stop | show]  [parameters]

	sctp association [create | destroy | show]  [parameters]

	parameters
		Command Line parameters.

DESCRIPTION
	This command is used to manage M3UA - SCTP. You can create, destroy, start and
	stop a SCTP Server and view the Server configuration using the sctp server
	command. You can create, destroy and view SCTP Associations using the
	sctp association command.

SEE ALSO
	sctp server create, sctp server destroy, sctp server start, sctp server stop,
	sctp server show, sctp association create, sctp association destroy,
	sctp association show

mobicents(10.65.208.215:3435)&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_gui"><a class="anchor" href="#_using_gui"></a>4.5. Running the Graphical User Interface</h3>
<div class="paragraph">
<p>Open a Web Browser and navigate to <a href="http://localhost:8080/jss7-management-console/" class="bare">http://localhost:8080/jss7-management-console/</a>. The window will look similar to the figure below.
The GUI is divided into three sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A left panel listing the management units (Services, SCTP, M3UA, Linkset, SCCP, TCAP, Alarms, Manage Campaigns and Metrics). You can click on any of these to select and navigate to the specific management unit.</p>
</li>
<li>
<p>A main panel displaying the currently selected management unit.
At the top of this panel you will find a bread crumb trail providing links back to each previous page that you navigated through in order to get to the current page.
The main view is categorized into multiple tabs to manage different aspects of the selected layer.</p>
</li>
<li>
<p>A bottom panel displaying the log data.
You can clear the log anytime by clicking on the trash icon at the top right corner of this panel.
You can also minimize or maximize this panel to suit your needs.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_services.png" alt="GUI services">
</div>
<div class="title">Figure 5. GUI - Services</div>
</div>
<div class="paragraph">
<p>The main window will display all the configured services and their current state (running or stopped). In the example above MAP, CAP, TCAP and ISUP are configured and running.
If any of these services is not running currently, the page will indicate that service as 'Stopped'. This page only indicates the current state of a service and does not allow you to start or stop the service dynamically.
You can view this screen anytime by clicking on the 'Services' link in the left panel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will notice bread crumbs at the top of the main panel, allowing you to return to any of the previous pages you navigated through.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_connect_gui"><a class="anchor" href="#_connect_gui"></a>4.5.1. Connect to a new Instance</h4>
<div class="paragraph">
<p>You can connect to a new instance by entering the IP:Port values and the login credentials in the top left corner of the GUI.
However please note that this feature is not available in this release but will be fully functional in the next release.</p>
</div>
</div>
<div class="sect3">
<h4 id="_gui_security"><a class="anchor" href="#_gui_security"></a>4.5.2. Authentication</h4>
<div class="paragraph">
<p>Restcomm jSS7 GUI Management Security is based on the JBoss Security Framework.
This is explained in <a href="#_security">[_security]</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_ss7_simulator"><a class="anchor" href="#_running_ss7_simulator"></a>4.6. Running Restcomm jSS7  Simulator</h3>
<div class="paragraph">
<p>The Restcomm jSS7 comes with a Simulator module that will enable you to test and understand the functionality of the Stack.
You can install and run the Simulator module on any machine.
In addition, you can run several instances of the Simulator from one folder and each of these instances can have it&#8217;s own configuration options.
Configuration options are saved into a xml configuration file.</p>
</div>
<div class="paragraph">
<p>Each running instance of the Simulator has its own name (called "host name") and the name of configuration file depends on this "host name". For example if the host name is "a1", then the name of the configuration file will be "a1_simulator.xml". You must ensure that you provide each running Simulator instance with a unique host name in order to allow each running Simulator instance to have different configuration options.</p>
</div>
<div class="paragraph">
<p>You can run and manage the Simulator locally or remotely.
For running the Simulator locally you will be using a GUI interface.
If you are intending to run the Simulator remotely, then you can do so using RMI access (via a GUI interface) or a HTML interface (using a HTML Browser).</p>
</div>
<div class="sect3">
<h4 id="_simulator_configuring_locally"><a class="anchor" href="#_simulator_configuring_locally"></a>4.6.1. Running the Simulator Locally</h4>
<div class="olist arabic">
<div class="title">Procedure: Launching the Simulator Locally</div>
<ol class="arabic">
<li>
<p>Pre-requisite: You must have SS7 Simulator installed locally in the machine.</p>
</li>
<li>
<p>Change the working directory to the bin folder in the Simulator&#8217;s installation directory.</p>
<div class="listingblock">
<div class="content">
<pre>downloads]$ cd restcomm-jss7-<version>/ss7/restcomm-ss7-simulator/bin</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Ensure that the <em class="path">run.sh</em>							start script is executable.</p>
<div class="listingblock">
<div class="content">
<pre>bin$ chmod +x run.sh</pre>
</div>
</div>
</li>
<li>
<p>Execute the <em class="path">run.sh</em>							Bourne shell script with the command <code>./run.sh gui</code>.
If you wish to pass the "host name" parameter (say for example "a1") you can do so by issuing the command as <code>./run.sh gui -na1</code> or <code>./run.sh gui --name=a1</code> where "a1" is the "host name" of this simulator instance.</p>
<div class="listingblock">
<div class="content">
<pre>bin$ ./run.sh gui --name=a1</pre>
</div>
</div>
</li>
<li>
<p>Result: This will launch the GUI application form ""Connecting to a testerHost &#8230;&#8203;" as in the figure below:</p>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example1.png" alt="Simulator Example1">
</div>
<div class="title">Figure 6. Running Simulator Locally</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure: Creating a Local testerHost</div>
<ol class="arabic">
<li>
<p>Pre-requisite: You must have the GUI application form "Connecting to a testerHost" launched by running the simulator locally as explained in the above procedure.</p>
</li>
<li>
<p>In the GUI application form "Connecting to a testerHost &#8230;&#8203;" enter a value for the Host name field if it is empty.</p>
</li>
<li>
<p>Select the option "Create a local testerHost" and press the "Start" button.</p>
</li>
<li>
<p>Result: This will create a local testerHost and launch a new form <span class="menuseq"><span class="menu">SS7 Simulator: &lt;host name</span>&#160;&#9656; <span class="menuitem">-local</span></span> as in the figure below:</p>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example2.png" alt="Simulator Example2">
</div>
<div class="title">Figure 7. The main form of the Simulator</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure: Running a Test</div>
<ol class="arabic">
<li>
<p>Pre-requisite: You must have the main Simulator form launched as explained in the above procedure.</p>
</li>
<li>
<p>Select required modules for Layers 1 - 3 and the Testing Task.</p>
</li>
<li>
<p>Configure the modules to meet your requirements.
Click on the button "&#8230;&#8203;" to the right of the selected module.
When layer configuring you can press one of two buttons "Load default values for side A" and "Load default values for side B" for loading default values for testing.
These default values can be used if you are using SS7 Simulators in the one computer host as the side A and the side B for interaction.
To save the configured layers to the disk, click the "Save" button.
To reload the saved configuration, use the "Reload" button.</p>
</li>
<li>
<p>When all required layers are correctly configured, click the "Run test" button.</p>
</li>
<li>
<p>Result: The form for testing will be displayed as in the figure below:</p>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example3.png" alt="Simulator Example3">
</div>
<div class="title">Figure 8. Example Simulator testing form</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The form has three sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The top section displays information regarding the Simulator layers and the state of Testing.
This information is refreshed every 5 seconds automatically.
You can also choose to refresh this manually by clicking the "Refresh state" button.
When you click the "Start" button, all modules will start and be ready for testing.
When you click the "Stop" button all modules will stop.</p>
</li>
<li>
<p>The middle section of the form displays notifications from testing modules.</p>
</li>
<li>
<p>The bottom section of the form holds test dependant information whose details are displayed in the corresponding test definition.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more details on executing tests, please refer to <a href="#_simulator_tests">SS7 Simulator Test Cases</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_simulator_configuring_remotely"><a class="anchor" href="#_simulator_configuring_remotely"></a>4.6.2. Running SS7 Simulator remotely</h4>
<div class="paragraph">
<p>The Simulator can be run remotely using RMI and/or HTML Adaptors.
But prior to launching the Simulator remotely, you must first run a tester host in the host machine as explained in the procedure below:</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Launching a Tester Host in the host machine</div>
<ol class="arabic">
<li>
<p>Pre-requisite: You must have SS7 Simulator installed locally in the host machine.</p>
</li>
<li>
<p>Change the working directory to the bin folder in the Simulator&#8217;s installation directory.</p>
<div class="listingblock">
<div class="content">
<pre>downloads]$ cd restcomm-jss7-<version>/ss7/restcomm-ss7-simulator/bin</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Ensure that the <em class="path">run.sh</em> start script is executable.</p>
<div class="listingblock">
<div class="content">
<pre>bin$ chmod +x run.sh</pre>
</div>
</div>
</li>
<li>
<p>Execute the <em class="path">run.sh</em> Bourne shell script with the command <code>./run.sh core -na1 -t8001 -r9999,9998</code> or <code>./run.sh core --name=a1 --http=8001 --rmi=9999,9998</code>.
You can use a <code>rmi</code> connector or <code>http</code> connector or both simultaneously.
The command options are explained below:</p>
<div class="ulist">
<ul>
<li>
<p>"-n" (or "--name=") defines a host name (in the example above: "a1").</p>
</li>
<li>
<p>"-r" (or "--rmi=") defines a port&#8217;s listening for rmi requests (in the example above: "9999 and 9998"). RMI protocol uses 2 ports for server access.
The first port (9999 above) is rmi port and 9998  is second port used by RMI.
Usually RMI randomly selects this 2nd port, however if the core simulator is behind firewall,  the GUI will not be able to connect from remote machine without admin opening up all the ports.
This can be risky, hence --rmi takes two ports as comma separated and admin can open these two ports on firewall.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please note that fixing the 2nd port in RMI contradicts the RMI specification.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>"-t" (or "--http=") defines a port listening for html requests (in the example above: "8001").</p>
</li>
<li>
<p>"-Djava.rmi.server.hostname=192.168.1.1" - if remote host contains several IP addresses you need to specify by this command which exactly IP address RMI will use.</p>
<div class="listingblock">
<div class="content">
<pre>bin$ ./run.sh core -na1 -t8001 -r9999,9998</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bin$ ./run.sh core --name=a1 --http=8001 --rmi=9999,9998</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Result: This will start the Tester Host in this machine and the output displayed in the console will be as below:</p>
<div class="listingblock">
<div class="content">
<pre>=========================================================================

  SS7 Simulator Bootstrap Environment

  SIMULATOR_HOME: /home/vinu/restcomm-jss7-6.1.3.GA/ss7/restcomm-ss7-simulator

  JAVA: /usr/lib/jvm/jre-1.7.0-openjdk/bin/java

  JAVA_OPTS: -Dprogram.name=run.sh  -Djava.net.preferIPv4Stack=true -Xms256m -Xmx512m -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000

  CLASSPATH: /home/vinu/restcomm-jss7-6.1.3.GA/ss7/restcomm-ss7-simulator/bin/run.jar

=========================================================================
.
.
.
.
.
All beans have been loaded...
RMI connector initializing...
RMI connector has been started...
Html connector initializing...
Html connector has been started...
Waiting for commands...</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the Tester Host is running successfully in the host machine, you can now run the Simulator tests remotely from any machine which has the Simulator installed.
The following procedures provide instructions to run the Simulator remotely using the two interfaces (RMI and HTML).</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Managing the Simulator Remotely using RMI Interface</div>
<ol class="arabic">
<li>
<p>Pre-Requisite: The Tester Host must be launched in the host machine as explained in the above procedure.
The local machine must have the Simulator installed.</p>
</li>
<li>
<p>The best client for managing the Simulator via a RMI interface is the GUI interface of Simulator.
It can be launched in the same way as launching a Simulator locally:</p>
<div class="listingblock">
<div class="content">
<pre>		./run.sh gui</pre>
</div>
</div>
<div class="paragraph">
<p>This will launch the GUI form "Connecting to a testerHost&#8230;&#8203;".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example4.png" alt="Simulator Example4">
</div>
<div class="title">Figure 9. Launching Simulator GUI for a remote mode</div>
</div>
</li>
<li>
<p>In the form, select the option "Connect to the existing testerHost via JMX".</p>
</li>
<li>
<p>In the default RMI connection string, replace "localhost" with the correct IP address of the tester host computer and the value "9999" with the correct RMI port (the port from option "-r" or "--rmi=" as provided when launching the testerHost in the host machine).</p>
</li>
<li>
<p>Once successfully connected, the management will be similar to the procedures explained for running the Simulator application locally (see <a href="#_simulator_configuring_locally">Running the Simulator Locally</a>). "Jconsole" application can be also used as the client.
But this application is less convenient when compared to the easy RMI interface.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure: Managing the Simulator Remotely using HTML Interface</div>
<ol class="arabic">
<li>
<p>HTML management is less convenient than RMI management.
But it can be used if RMI is not acceptable (for example if you are behind a proxy). For configuring the parameters and running the tests you can use any HTML browser.
In the URL field of the browser, type <span class="menuseq"><span class="menu"><a href="http://&lt;IP" class="bare">http://&lt;IP</a> address</span>&#160;&#9656; <span class="menuitem">:&lt;port</span></span> where IP address is the host machine&#8217;s address and port is the value specified for "-t" or "--http=" option when launching the Tester Host in the remote machine.</p>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example5.png" alt="Simulator Example5">
</div>
<div class="title">Figure 10. Managing remotely with a HTML Interface</div>
</div>
</li>
<li>
<p>The web page will display all Beans.
"TesterHost" is the main MBean in which you can select the mode for test working, start/stop testing (buttons "Start"/"Stop") and quit a tester host (button "quit"). You can use other Beans for setting different options for layers and test tasks.</p>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example6.png" alt="Simulator Example6">
</div>
<div class="title">Figure 11. TesterHost Bean</div>
</div>
</li>
<li>
<p>The Results of the tests can be found at the console (in the server) or in the log file (file name is "a1.log" where "a1" is the name of the Simulator instance).</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_ss7_cards"><a class="anchor" href="#_running_ss7_cards"></a>4.7. Running with SS7 cards</h3>
<div class="paragraph">
<p>Apart from the simulator a Restcomm USSD Demo SLEE Application has been tested with Dialogic&#8217;s MAP Test Utility (MTU) tool in a process that is described below.
<br>
It is assumed that you have two Servers (each fitted with Dialogic card) connected to each other via cross cable and the OS is Linux-based. To understand how to set-up the environment for Dialogic card please download respective Programmers Manual. This test was carried out on <a href="https://www.dialogic.com/~/media/manuals/ss7/cd/ProductSpecific/SPCI-CPM8/ProgrammersManual/SPCI-PM.pdf">Dialogic SPCI2S cards</a>. It is recommened to read the <a href="http://resource.dialogic.com/telecom/support/ss7/cd/GenericInfo/GeneralDocumentation/U30SSS03-MTU-MTR-UG.pdf">MTU/MTR guide</a> before proceeding further.</p>
</div>
<div class="sect3">
<h4 id="mtu-setup"><a class="anchor" href="#mtu-setup"></a>4.7.1. MTU setup</h4>
<div class="paragraph">
<p>Please download the <a href="http://www.dialogic.com/support/helpweb/helpweb.aspx/1580/ussd_map_sample_code/Signaling_SS7">modified MTU code for USSD</a> and build it to create the executable.</p>
</div>
<div class="paragraph">
<p>Rename <a href="http://www.dialogic.com/den/cfs-file.ashx/__key/CommunityServer.Discussions.Components.Files/10/0654.config.txt">this file</a> to config.txt and <a href="http://www.dialogic.com/den/cfs-file.ashx/__key/CommunityServer.Discussions.Components.Files/10/0121.system.txt">this file</a> to system.txt and place them at /opt/dpklnx/ before loading the driver and activating links. Its is assumed that MTP2/MTP3 is loaded onboard and Dialogic SCCP, TCAP, MAP and MTU is loaded on host system.
<br>
Command at /opt/dpklnx/ to load drivers</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">/opt/dpklnx# ./gctload -d</code></pre>
</div>
</div>
<div class="paragraph">
<p>Command at /opt/dpklnx/ to activate link</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">/opt/dpklnx# ./mtpsl act 0 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the link is activated, don&#8217;t forget to execute the mtucfg.ms7 script. This script registers the MTU with Dialogic SCCP stack.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./s7_play -f/home/abhayani/workarea/mobicents/dialogic/upd_tar_FILES/RUN/MTU/SCRIPTS/mtucfg.ms7</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ussd-application-setup"><a class="anchor" href="#ussd-application-setup"></a>4.7.2. USSD Application Setup</h4>
<div class="paragraph">
<p>Download the configuration and system files for Restcomm USSD from <a href="https://developer.jboss.org/wiki/USSDMAPTestingWithDialogicBoards">here</a> and rename them to config.txt and system.txt respectively and place it to corect folder (/opt/dpklnx/ for linux) before loading the driver and activating links. Use same commands as shown above to load drivers and activate link. It is assumed here that MTP2/MTP3 is loaded onboard. The Mobicents Dialogic native driver (libmobicents-dialogic-linux.so) communicates with MTP3 onboard.
<br>
Once link is active start the Restcomm JAIN SLEE (JBoss Application) Server. Remember before starting application server, place the native file in correct folder (for example incase of 32bit linux mobicents-jainslee-2.4.0.CR1-jboss-5.1.0.GA/jboss-5.1.0.GA/bin/META-INF/lib/linux2/x86/libmobicents-dialogic-linux.so) or the java.library.path should be set to point the directory containing native component.
<br>
Deploy the Restcomm SS7 Service as explained in Mobicents SS7 Docs.
Deploy the Restcomm MAP RA as explained in Mobicents JSLEE Docs. Use the following as map-default-ra.properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sccp.service=java:/mobicents/ss7/sccp
sccp.pointcode=0
sccp.ssn=8</code></pre>
</div>
</div>
<div class="paragraph">
<p>Deploy your demo
<br>
One last step before the application can be tested is configuring the Linkset and SCCP rule. Fire the CLI and connect to Restcomm SS7 Service as explained in Restcomm SS7 Doc. Following configuration is to be done only once and it survives system restarts.
<br>
Execute bellow command to register routing rule based on DPC + SSN</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mobicents(127.0.0.1:3435)&gt;sccprule create Rule4 dpc 1 ssn 8 mtpinfo name name1 opc 2 apc 1 sls 16</code></pre>
</div>
</div>
<div class="paragraph">
<p>Execute bellow command to register dialogic linkset</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mobicents(127.0.0.1:3435)&gt;linkset create dialogic opc 2 apc 1 ni 3 srcmod 61 destmod 34 linkset1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Execute bellow command to activate linkset</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mobicents(10.65.208.215)&gt;linkset activate linkset1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="test"><a class="anchor" href="#test"></a>4.7.3. Test</h4>
<div class="paragraph">
<p>Execute the following MTU command from MTU machine</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">ussdtest -d6 -g43010008 -a43020008 -i987654321 -s"1" -U*88#</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see the [INFO] messages in the Mobicents JAIN SLEE Server console about received USSD short codes and response sent.</p>
</div>
<div class="paragraph">
<p>The /opt/dpklnx in both machines will have mtp.pcap and mtp.txt showing the USSD messages exchanged.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_jss7"><a class="anchor" href="#_configuring_jss7"></a>5. Configuring jboss-beans.xml</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_configuring"><a class="anchor" href="#_configuring"></a>5.1. Configuring Restcomm  SS7 Service</h3>
<div class="paragraph">
<p>Configuration is done through an XML descriptor file named <em class="path">jboss-beans.xml</em> located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where  <code>profile_name</code> is the name of the server profile. Default <em class="path">jboss-beans.xml</em> contains only m3ua usage. Templates for usage of Dialogic boards or m3ua and Dialogic boards together can be found in the release binaries in folders: <em class="path">ss7/template/META-INF-dialogic</em> and <em class="path">ss7/template/META-INF-m3ua-dialogic</em></p>
</div>
<div class="paragraph">
<p>Restcomm SS7 Layer 4 (<code>SCCP, ISUP</code>) leverages either of the following <code>MTP</code>  layers to exchange signaling messages with remote signaling points:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>M3UA</code></p>
</li>
<li>
<p><code>dahdi</code></p>
</li>
<li>
<p><code>dialogic</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_configuring_rem_sgw"><a class="anchor" href="#_configuring_rem_sgw"></a>5.1.1. Configuring M3UA</h4>
<div class="paragraph">
<p>You must configure <code>M3UAManagement</code> if the underlying SS7 service will leverage <code>M3UA</code>.
For more details on configuring <code class="class">M3UAManagement</code>, please refer to <a href="#_managing_m3ua">M3UA Management</a>.</p>
</div>
<div class="paragraph">
<p>Scroll down to the section for M3UA Layer in the <em class="path">jboss-beans.xml</em> file and define the properties to suit your requirements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">        &lt;!-- ==================================================================== --&gt;
        &lt;!-- SCTP Properties                                                      --&gt;
        &lt;!-- Used by M3UA layer                                                   --&gt;
        &lt;!-- ==================================================================== --&gt;
        &lt;bean name="SCTPManagement" class="org.mobicents.protocols.sctp.netty.NettySctpManagementImpl"&gt;
                &lt;constructor&gt;
                        &lt;parameter&gt;SCTPManagement&lt;/parameter&gt;
                &lt;/constructor&gt;
                &lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
        &lt;/bean&gt;

        &lt;bean name="SCTPShellExecutor"
                class="org.restcomm.protocols.ss7.m3ua.impl.oam.SCTPShellExecutor"&gt;
            &lt;property name="sctpManagements"&gt;
                &lt;map keyClass="java.lang.String" valueClass="org.mobicents.protocols.sctp.netty.NettySctpManagementImpl"&gt;
                    &lt;entry&gt;
                        &lt;key&gt;SCTPManagement&lt;/key&gt;
                        &lt;value&gt;
                            &lt;inject bean="SCTPManagement" /&gt;
                        &lt;/value&gt;
                    &lt;/entry&gt;
                &lt;/map&gt;
            &lt;/property&gt;
        &lt;/bean&gt;

        &lt;!-- ==================================================================== --&gt;
        &lt;!-- M3UA --&gt;
        &lt;!-- M3UAManagement is managing the m3ua side commands --&gt;
        &lt;!-- ==================================================================== --&gt;
        &lt;!-- --&gt;
        &lt;bean name="Mtp3UserPart" class="org.restcomm.protocols.ss7.m3ua.impl.M3UAManagementImpl"&gt;
            &lt;constructor&gt;
                &lt;parameter&gt;Mtp3UserPart&lt;/parameter&gt;
                &lt;parameter&gt;{this-platform}-jSS7&lt;/parameter&gt;
            &lt;/constructor&gt;
            &lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
            &lt;property name="maxSequenceNumber"&gt;256&lt;/property&gt;
            &lt;property name="maxAsForRoute"&gt;2&lt;/property&gt;
            &lt;property name="deliveryMessageThreadCount"&gt;1&lt;/property&gt;
            &lt;property name="routingLabelFormat"&gt;
                &lt;inject bean="RoutingLabelFormat" /&gt;
            &lt;/property&gt;
            &lt;property name="transportManagement"&gt;
                &lt;inject bean="SCTPManagement" /&gt;
            &lt;/property&gt;
        &lt;/bean&gt;

        &lt;bean name="M3UAShellExecutor"
                class="org.restcomm.protocols.ss7.m3ua.impl.oam.M3UAShellExecutor"&gt;
            &lt;property name="m3uaManagements"&gt;
                &lt;map keyClass="java.lang.String" valueClass="org.restcomm.protocols.ss7.m3ua.impl.M3UAManagementImpl"&gt;
                    &lt;entry&gt;
                        &lt;key&gt;Mtp3UserPart&lt;/key&gt;
                        &lt;value&gt;
                            &lt;inject bean="Mtp3UserPart" /&gt;
                        &lt;/value&gt;
                    &lt;/entry&gt;
                &lt;/map&gt;
            &lt;/property&gt;
        &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title"><code class="class">org.mobicents.protocols.sctp.netty.NettySctpManagementImpl</code></div>
<p>This SCTP Management Bean takes a <code class="class">String</code> as a constructor argument.
The name is prepended to the name of the XML file created by the SCTP stack for persisting the state of SCTP resources.
This XML file is stored in the path specified by the property <code>persistDir</code>.
For example, in the above case, when Restcomm  SS7 Service is started, a file named <em class="path">SCTPManagement_sctp.xml</em> will be created at <em class="path">$JBOSS_HOME/server/profile_name/data</em> directory.
You can disable of using persistent configuration via using <code>org.mobicents.protocols.sctp.netty.NonPersistentNettySctpManagementImpl</code> class. The other properties of the Stack are defined below:</p>
</div>
<div class="paragraph">
<div class="title"><code class="class">org.restcomm.protocols.ss7.m3ua.impl.M3UAManagementImpl</code></div>
<p>This M3UA Management Bean takes a <code class="class">String</code> as a first constructor argument.
The name is prepended to the name of the XML file created by the M3UA stack for persisting the state of M3UA resources.
The second constructor argument of M3UA Management Bean is also a <code class="class">String</code>. This is a productName parameter.</p>
</div>
<div class="paragraph">
<p>This XML file is stored in the path specified by the property <code>persistDir</code>.
For example, in the above case, when Restcomm  SS7 Service is started, a file named <em class="path">Mtp3UserPart_m3ua1.xml</em> will be created at <em class="path">$JBOSS_HOME/server/profile_name/data</em> directory.
You can disable of using persistent configuration via using <code>org.restcomm.protocols.ss7.m3ua.impl.NonPersistentM3UAManagementImpl</code> class.
The other properties of the Stack are defined below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">persistDir</dt>
<dd>
<p>As explained above</p>
</dd>
<dt class="hdlist1">routingLabelFormat</dt>
<dd>
<p>The routing label format supported by this network.
See <a href="#_configuring_routing_label_format">Configuring MTP3 routing label</a> for further details.</p>
</dd>
<dt class="hdlist1">transportManagement</dt>
<dd>
<p>SCTPManagement mbean should be provided here.</p>
</dd>
<dt class="hdlist1">other parameters</dt>
<dd>
<p>See <a href="#_m3ua_properties">M3UA stack properties</a></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_dahdi"><a class="anchor" href="#_configuring_dahdi"></a>5.1.2. Configuring dahdi</h4>
<div class="paragraph">
<p><code>Dahdi</code> based MTP layer will only be used if you have installed <code>dahdi</code> based SS7 hardware (Sangoma or Diguim) cards.
 <code>DahdiLinksetFactory</code> is responsible for creating new instances of <code>DahdiLinkset</code> when instructed by  the <code>LinksetManager</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The corresponding native libraries for <code>dahdi</code> (<code>libmobicents-dahdi-linux</code> library) must be compiled before stack configuring and put into <code>$JBOSS_HOME/bin/META-INF/lib/linux2/x86</code> if OS is 32 bit or <code>$JBOSS_HOME/bin/META-INF/lib/linux2/x64</code> if OS and JAVA is 64 bit.</p>
</div>
<div class="paragraph">
<p>See JSS7 Installation Guide for more details.</p>
</div>
<div class="paragraph">
<p>Libraries are compiled only for linux OS for 32-bit JAVA for now.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;bean name="DahdiLinksetFactory" class="org.restcomm.ss7.hardware.dahdi.oam.DahdiLinksetFactory"&gt;
    &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>LinksetFactoryFactory</code> is just a call-back class listening for new factories deployed.
It maintains a Map of available 'factory name' vs 'factory'. You should never touch this bean.</p>
</div>
<div class="paragraph">
<p><code>LinksetManager</code> is responsible for managing <code>Linkset</code> and <code>Link</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ================================================ --&gt;
    &lt;!-- Linkset manager Service                          --&gt;
    &lt;!-- ================================================ --&gt;
    &lt;bean name="LinksetFactoryFactory" class="org.restcomm.ss7.linkset.oam.LinksetFactoryFactory"&gt;
            &lt;incallback method="addFactory" /&gt;
            &lt;uncallback method="removeFactory" /&gt;
    &lt;/bean&gt;

    &lt;bean name="DahdiLinksetFactory" class="org.restcomm.ss7.hardware.dahdi.oam.DahdiLinksetFactory"&gt;
    &lt;/bean&gt;

    &lt;bean name="LinksetManager" class="org.restcomm.ss7.linkset.oam.LinksetManagerImpl"&gt;
        &lt;constructor&gt;
            &lt;parameter&gt;LinksetManager&lt;/parameter&gt;
        &lt;/constructor&gt;
        &lt;property name="scheduler"&gt;
            &lt;inject bean="SS7Scheduler" /&gt;
        &lt;/property&gt;
        &lt;property name="linksetFactoryFactory"&gt;
            &lt;inject bean="LinksetFactoryFactory" /&gt;
        &lt;/property&gt;
        &lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean name="LinksetExecutor" class="org.restcomm.ss7.linkset.oam.LinksetExecutor"&gt;
        &lt;property name="linksetManager"&gt;
            &lt;inject bean="LinksetManager" /&gt;
        &lt;/property&gt;
    &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When LinksetManagerImpl is started it looks for the file  <em class="path">linksetmanager.xml</em> containing serialized information about underlying linksets and links.
The directory path is configurable by changing the value of the property <code>persistDir</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<em class="path">linksetmanager.xml</em> should never be edited by you manually.
Always use the Shell Client to connect to the Stack and execute appropriate commands.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>LinksetExecutor</code> accepts the <code>linkset</code> commands and executes necessary operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_dialogic"><a class="anchor" href="#_configuring_dialogic"></a>5.1.3. Configuring dialogic</h4>
<div class="paragraph">
<p><code>Dialogic</code> based MTP layer will only be used if you have installed Dialogic cards.
 <code>DialogicMtp3UserPart</code> communicates with Dialogic hardware.
It is assumed here that MTP3 and MTP2 is leveraged from the Dialogic Stack either on-board or on-host.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The corresponding native libraries for <code>dialogic</code> (native lib <code>libgctjni.so</code> and gctApi library <code>gctApi.jar</code>) should be downloaded from the Dialogic site and copied :
* <code>libgctjni.so</code> - to the folder <code>$JBOSS_HOME/bin/META-INF/lib/linux2/x86</code> if OS is 32 bit or   <code>$JBOSS_HOME/bin/META-INF/lib/linux2/x64</code> if OS and JAVA is 64 bit.
* <code>gctApi.jar</code> - to the folder <code>jboss-5.1.0.GA/server/default/deploy/Restcomm-ss7-service/lib</code></p>
</div>
<div class="paragraph">
<p>See JSS7 Installation Guide for more details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ==================================================================== --&gt;
    &lt;!-- Dialogic Mtp3UserPart --&gt;
    &lt;!-- ==================================================================== --&gt;
    &lt;!----&gt;
    &lt;bean name="Mtp3UserPart" class="org.restcomm.ss7.hardware.dialogic.DialogicMtp3UserPart"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;{this-platform}-jSS7&lt;/parameter&gt;
		&lt;/constructor&gt;
            &lt;property name="sourceModuleId"&gt;61&lt;/property&gt;
            &lt;property name="destinationModuleId"&gt;34&lt;/property&gt;
            &lt;property name="routingLabelFormat"&gt;
                    &lt;inject bean="RoutingLabelFormat" /&gt;
            &lt;/property&gt;
    &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This Dialogic Bean takes a <code class="class">String</code> as a first constructor argument. This is a productName parameter.</p>
</div>
<div class="paragraph">
<p>The other properties of the Stack are defined below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">sourceModuleId</dt>
<dd>
<p><code>sourceModuleId</code> is the id of source module and should match with the value configured in the file <em class="path">system.txt</em> used by <code>dialogic</code> drivers.
In the above example, 61 is assigned for mobicents process.</p>
</dd>
<dt class="hdlist1">destinationModuleId</dt>
<dd>
<p><code>destinationModuleId</code> is the id of destination module.
In the above example, 34 is the id of Dialogic MTP3 module.</p>
</dd>
<dt class="hdlist1">routingLabelFormat</dt>
<dd>
<p>The routing label format supported by this network.
See <a href="#_configuring_routing_label_format">Configuring MTP3 routing label</a> for further details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_routing_label_format"><a class="anchor" href="#_configuring_routing_label_format"></a>5.1.4. Configuring MTP3 routing label</h4>
<div class="paragraph">
<p>MTP Level 3 routes messages based on the routing label in the signaling information field (SIF) of message signal units.
The routing label is comprised of the destination point code (DPC), originating point code (OPC), and signaling link selection (SLS) field.
Overtime different standards  cameup with different routing label format.
For example An ANSI routing label uses 7 octets; an ITU-T routing label uses 4 octets.</p>
</div>
<div class="paragraph">
<p>Restcomm jSS7 is flexible to configure the routing label as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">        &lt;!-- ==================================================================== --&gt;
        &lt;!-- MTP3 Properties --&gt;
        &lt;!-- Define MTP3 routing label Format --&gt;
        &lt;!-- ==================================================================== --&gt;
        &lt;bean name="RoutingLabelFormat" class="org.restcomm.protocols.ss7.mtp.RoutingLabelFormat"&gt;
                &lt;constructor factoryClass="org.restcomm.protocols.ss7.mtp.RoutingLabelFormat"
                        factoryMethod="getInstance"&gt;
                        &lt;parameter&gt;ITU&lt;/parameter&gt;
                &lt;/constructor&gt;
        &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Following table shows various routing formats supported</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Routing Format</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">point code length</th>
<th class="tableblock halign-left valign-top">sls length</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ITU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14-bits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4-bits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ANSI_Sls8Bit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24-bits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ANSI_Sls5Bit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24-bits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5-bits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Japan_TTC_DDI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not supported yet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not supported yet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Japan_NTT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not supported yet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not supported yet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">China</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not supported yet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not supported yet</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuring-sccp"><a class="anchor" href="#configuring-sccp"></a>5.1.5. Configuring SCCP</h4>
<div class="paragraph">
<p>As name suggests <code>SccpStack</code> initiates the SCCP stack routines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ==================================================================== --&gt;
    &lt;!-- SCCP Service --&gt;
    &lt;!-- ==================================================================== --&gt;
    &lt;!--&lt;bean name="RuleComparator" class="org.restcomm.protocols.ss7.sccp.impl.router.RuleByIdComparator"/&gt;--&gt;
	  &lt;bean name="RuleComparator" class="org.restcomm.protocols.ss7.sccp.impl.router.RuleComparator"/&gt;
	  &lt;bean name="RuleComparatorFactory" class="org.restcomm.protocols.ss7.sccp.impl.router.RuleComparatorFactory"&gt;
		    &lt;constructor factoryClass="org.restcomm.protocols.ss7.sccp.impl.router.RuleComparatorFactory"
					   factoryMethod="getInstance"&gt;
			        &lt;parameter&gt;RuleComparatorFactory&lt;/parameter&gt;
		    &lt;/constructor&gt;
		    &lt;property name="ruleComparator"&gt;
			     &lt;inject bean="RuleComparator"/&gt;
		    &lt;/property&gt;
	  &lt;/bean&gt;
    &lt;bean name="SccpStack" class="org.restcomm.protocols.ss7.sccp.impl.SccpStackImpl"&gt;
        &lt;constructor&gt;
            &lt;parameter&gt;
                &lt;inject bean="SS7Scheduler" /&gt;
            &lt;/parameter&gt;
            &lt;parameter&gt;SccpStack&lt;/parameter&gt;
        &lt;/constructor&gt;
        &lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
        &lt;property name="mtp3UserParts"&gt;
            &lt;map keyClass="java.lang.Integer" valueClass="org.restcomm.protocols.ss7.mtp.Mtp3UserPart"&gt;
                &lt;entry&gt;
                    &lt;key&gt;1&lt;/key&gt;
                        &lt;value&gt;
                                &lt;inject bean="Mtp3UserPart" /&gt;
                        &lt;/value&gt;
                &lt;/entry&gt;
            &lt;/map&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean name="SccpExecutor" class="org.restcomm.protocols.ss7.sccp.impl.oam.SccpExecutor"&gt;
		&lt;property name="sccpStacks"&gt;
			&lt;map keyClass="java.lang.String" valueClass="org.restcomm.protocols.ss7.sccp.impl.SccpStackImpl"&gt;
				&lt;entry&gt;
					&lt;key&gt;SccpStack&lt;/key&gt;
					&lt;value&gt;
						&lt;inject bean="SccpStack" /&gt;
					&lt;/value&gt;
				&lt;/entry&gt;
			&lt;/map&gt;
		&lt;/property&gt;
    &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code class="class">org.restcomm.protocols.ss7.sccp.impl.SccpStackImpl</code> takes <code class="class">String</code> as constructor argument.
The name is prepend to <code>xml</code> file created by SCCP stack for persisting state of SCCP resources.
The <code>xml</code> is stored in path specified by <code>persistDir</code> property above.</p>
</div>
<div class="paragraph">
<p>For example in above case, when Restcomm SS7 Service is started 3 file&#8217;s <em class="path">SccpStack_management2.xml</em>, <em class="path">SccpStack_sccpresource2.xml</em>  and <em class="path">SccpStack_sccprouter2.xml</em> will be created at <em class="path">$JBOSS_HOME/server/profile_name/data</em> directory
You can disable of using persistent configuration via using <code>org.restcomm.protocols.ss7.sccp.impl.NonPersistentSccpStackImpl</code> class.
Stack has following properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">persistDir</dt>
<dd>
<p>As explained above</p>
</dd>
<dt class="hdlist1">mtp3UserParts</dt>
<dd>
<p>specifies SS7 Level 3 to be used as transport medium(be it SS7 card or M3UA). Restcomm jSS7 SCCP allows configuring multiple MTP3 layers for  same SCCP stack.
This allows to have multiple local point-code and connecting to various networks while SCCP layer remains same</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>SccpExecutor</code> accepts <code>sccp</code> commands and executes necessary operations</p>
</div>
<div class="paragraph">
<p>For sorting SCCP rules by ID we need to set  <code>RuleComparator</code> to <code>org.restcomm.protocols.ss7.sccp.impl.router.RuleByIdComparator</code>. By default it sorts by calledDigits and callingDigits patterns.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-tcap"><a class="anchor" href="#configuring-tcap"></a>5.1.6. Configuring TCAP</h4>
<div class="paragraph">
<p><code>TcapStack</code> initiates the TCAP stack routines.
Respective TCAP stack beans are instantiated for each <code>MAP</code>, <code>CAP</code>                                Service.
If you are using either one, feel free to delete the other.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ==================================================================== --&gt;
    &lt;!-- TCAP Service --&gt;
    &lt;!-- ==================================================================== --&gt;
    &lt;bean name="TcapStackMap" class="org.restcomm.protocols.ss7.tcap.TCAPStackImpl"&gt;
        &lt;constructor&gt;
			&lt;parameter&gt;TcapStackMap&lt;/parameter&gt;
            &lt;parameter&gt;
                &lt;inject bean="SccpStack" property="sccpProvider" /&gt;
            &lt;/parameter&gt;
            &lt;parameter&gt;8&lt;/parameter&gt;
        &lt;/constructor&gt;
		&lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
		&lt;property name="previewMode"&gt;false&lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean name="TcapStackCap" class="org.restcomm.protocols.ss7.tcap.TCAPStackImpl"&gt;
        &lt;constructor&gt;
			&lt;parameter&gt;TcapStackCap&lt;/parameter&gt;
                &lt;parameter&gt;
                    &lt;inject bean="SccpStack" property="sccpProvider" /&gt;
                &lt;/parameter&gt;
                &lt;parameter&gt;146&lt;/parameter&gt;
            &lt;/constructor&gt;
		&lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
		&lt;property name="previewMode"&gt;false&lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean name="TcapStack" class="org.restcomm.protocols.ss7.tcap.TCAPStackImpl"&gt;
        &lt;constructor&gt;
            &lt;parameter&gt;TcapStack&lt;/parameter&gt;
            &lt;parameter&gt;
                &lt;inject bean="SccpStack" property="sccpProvider" /&gt;
            &lt;/parameter&gt;
            &lt;parameter&gt;9&lt;/parameter&gt;
        &lt;/constructor&gt;
		&lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
		&lt;property name="previewMode"&gt;false&lt;/property&gt;
    &lt;/bean&gt;

	&lt;bean name="TcapExecutor" class="org.restcomm.protocols.ss7.tcap.oam.TCAPExecutor"&gt;
		&lt;property name="tcapStacks"&gt;
			&lt;map keyClass="java.lang.String" valueClass="org.restcomm.protocols.ss7.tcap.TCAPStackImpl"&gt;
				&lt;entry&gt;
					&lt;key&gt;TcapStackMap&lt;/key&gt;
					&lt;value&gt;
						&lt;inject bean="TcapStackMap" /&gt;
					&lt;/value&gt;
				&lt;/entry&gt;
				&lt;entry&gt;
					&lt;key&gt;TcapStackCap&lt;/key&gt;
					&lt;value&gt;
						&lt;inject bean="TcapStackCap" /&gt;
					&lt;/value&gt;
				&lt;/entry&gt;
				&lt;entry&gt;
					&lt;key&gt;TcapStack&lt;/key&gt;
					&lt;value&gt;
						&lt;inject bean="TcapStack" /&gt;
					&lt;/value&gt;
				&lt;/entry&gt;
			&lt;/map&gt;
		&lt;/property&gt;
	&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code class="class">org.restcomm.protocols.ss7.tcap.TCAPStackImpl</code> takes <code class="class">String</code> as a first constructor argument.
The name is prepend to <code>xml</code> file created by TCAP stack for persisting state of TCAP resources.
The <code>xml</code> is stored in path specified by <code>persistDir</code> property above.</p>
</div>
<div class="paragraph">
<p>For example in above case, when Restcomm SS7 Service is started 3 file&#8217;s <em class="path">TcapStack_management.xml</em>, <em class="path">TcapStack_managementMap.xml</em>  and <em class="path">TcapStack_managementCap.xml</em> will be created at <em class="path">$JBOSS_HOME/server/profile_name/data</em> directory. Then <code class="class">org.restcomm.protocols.ss7.tcap.TCAPStackImpl</code> takes <code class="class">SccpStack</code> as second constructor argument.
TCAP uses passed SCCP stack. Constructor also takes the sub system number (SSN) which is registered with passed SCCP stack (this is the third parameter).
You can disable of using persistent configuration via using <code>org.restcomm.protocols.ss7.tcap.NonPersistentTCAPStackImpl</code> class.
TCAP Stack has following configurable properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">persistDir</dt>
<dd>
<p>As explained above</p>
</dd>
<dt class="hdlist1">previewMode: public void setPreviewMode(boolean val);</dt>
<dd>
<p>PreviewMode is needed for special processing mode.
By default TCAP is not set in PreviewMode.
When PreviewMode set in TCAP level:</p>
<div class="ulist">
<ul>
<li>
<p>Stack only listens for incoming messages and does not send anything.
The methods <code>send()</code>, <code>close()</code>, <code>sendComponent()</code> and other such methods do nothing.</p>
</li>
<li>
<p>A TCAP Dialog is temporary.
TCAP Dialog is discarded after any incoming message like TC-BEGIN or TC-CONTINUE has been processed.</p>
</li>
<li>
<p>For any incoming messages (including TC-CONTINUE, TC-END, TC-ABORT) a new TCAP Dialog is created (and then deleted).</p>
</li>
<li>
<p>There are no timers and timeouts.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>TcapExecutor</code> accepts <code>tcap</code> commands and executes necessary operations</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-shellexecutor"><a class="anchor" href="#configuring-shellexecutor"></a>5.1.7. Configuring ShellExecutor</h4>
<div class="paragraph">
<p><code>ShellExecutor</code> is responsible for listening incoming commands.
Received commands are executed on local resources to  perform actions like creation and management of <code>TCAP</code>, <code>SCCP</code>, <code>SCTP</code> and  <code>M3UA</code> stack.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ==================================================================== --&gt;
    &lt;!-- Shell Service --&gt;
    &lt;!-- ==================================================================== --&gt;
    &lt;!-- Define Shell Executor --&gt;
	&lt;bean name="ShellExecutor" class="com.mobicents.ss7.management.console.ShellServer"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="SS7Scheduler" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;list class="javolution.util.FastList" elementClass="org.restcomm.ss7.management.console.ShellExecutor"&gt;
					&lt;inject bean="SccpExecutor" /&gt;
					&lt;inject bean="M3UAShellExecutor" /&gt;
					&lt;inject bean="SCTPShellExecutor" /&gt;
					&lt;inject bean="TcapExecutor" /&gt;
					&lt;!-- &lt;inject bean="LinksetExecutor" /&gt; --&gt;
				&lt;/list&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;

		&lt;property name="address"&gt;${jboss.bind.address}&lt;/property&gt;
		&lt;property name="port"&gt;3435&lt;/property&gt;
		&lt;property name="securityDomain"&gt;java:/jaas/jmx-console&lt;/property&gt;
	&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default ShellExecutor listens at <code>jboss.bind.address</code> and port <code>3435</code>. (This is used when you use CLI access after running of ss7-cli command). You may set the <code>address</code> property to any valid IP address that your host is assigned.
The shell commands are exchanged over TCP/IP.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To understand JBoss bind options look at  <a href="http://docs.jboss.org/jbossas/docs/Installation_And_Getting_Started_Guide/5/html_single/index.html">Installation_And_Getting_Started_Guide</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>SCTPShellExecutor</code> and <code>M3UAShellExecutor</code> is declared only if MTP layer <code>M3UA</code> is used.
If <code>dialogic</code> MTP layer is used these beans are not decalred and should be removed from <code class="class">FastList</code> too.
For <code>dahdi</code> need to declare <code>LinksetExecutor</code> bean and add in <code class="class">FastList</code> above.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-map"><a class="anchor" href="#configuring-map"></a>5.1.8. Configuring MAP</h4>
<div class="paragraph">
<p><code>MapStack</code> initiates the MAP stack routines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ==================================================================== --&gt;
    &lt;!-- MAP Service --&gt;
    &lt;!-- ==================================================================== --&gt;
    &lt;bean name="MapStack" class="org.restcomm.protocols.ss7.map.MAPStackImpl"&gt;
        &lt;constructor&gt;
            &lt;parameter&gt;MapStack&lt;/parameter&gt;
            &lt;parameter&gt;
                &lt;inject bean="TcapStackMap" property="provider" /&gt;
            &lt;/parameter&gt;
        &lt;/constructor&gt;
        &lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
    &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code class="class">org.restcomm.protocols.ss7.tcap.MAPStackImpl</code> takes <code class="class">String</code> as a first constructor argument.
The name is prepend to <code>xml</code> file created by MAP stack for persisting state of MAP resources.
The <code>xml</code> is stored in path specified by <code>persistDir</code> property above.
The second constructor argument is <code class="class">TcapStack</code>. MAP uses passed TCAP stack.</p>
</div>
<div class="paragraph">
<p>Feel free to delete declaration of this bean if your service is not consuming MAP messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-cap"><a class="anchor" href="#configuring-cap"></a>5.1.9. Configuring CAP</h4>
<div class="paragraph">
<p><code>CapStack</code> initiates the CAP stack routines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ==================================================================== --&gt;
    &lt;!-- CAP Service --&gt;
    &lt;!-- ==================================================================== --&gt;
    &lt;bean name="CapStack" class="org.restcomm.protocols.ss7.cap.CAPStackImpl"&gt;
        &lt;constructor&gt;
            &lt;parameter&gt;CapStack&lt;/parameter&gt;
            &lt;parameter&gt;
                &lt;inject bean="TcapStackCap" property="provider" /&gt;
            &lt;/parameter&gt;
        &lt;/constructor&gt;
        &lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
    &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code class="class">org.restcomm.protocols.ss7.tcap.CAPStackImpl</code> takes <code class="class">String</code> as a first constructor argument.
The name is prepend to <code>xml</code> file created by CAP stack for persisting state of CAP resources.
The <code>xml</code> is stored in path specified by <code>persistDir</code> property above.
The second constructor argument is <code class="class">TcapStack</code>. CAP uses passed TCAP stack.</p>
</div>
<div class="paragraph">
<p>Feel free to delete declaration of this bean if your service is not consuming CAP messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-isup"><a class="anchor" href="#configuring-isup"></a>5.1.10. Configuring ISUP</h4>
<div class="paragraph">
<p><code>IsupStack</code> initiates the ISUP stack routines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ==================================================================== --&gt;
    &lt;!-- ISUP Service --&gt;
    &lt;!-- ==================================================================== --&gt;
    &lt;bean name="CircuitManager" class="org.restcomm.protocols.ss7.isup.impl.CircuitManagerImpl"&gt;
    &lt;/bean&gt;

    &lt;bean name="IsupStack" class="org.restcomm.protocols.ss7.isup.impl.ISUPStackImpl"&gt;
        &lt;constructor&gt;
            &lt;parameter&gt;
                &lt;inject bean="SS7Scheduler" /&gt;
            &lt;/parameter&gt;
            &lt;parameter&gt;22234&lt;/parameter&gt;
            &lt;parameter&gt;2&lt;/parameter&gt;
        &lt;/constructor&gt;
        &lt;property name="mtp3UserPart"&gt;
            &lt;inject bean="Mtp3UserPart" /&gt;
        &lt;/property&gt;
        &lt;property name="circuitManager"&gt;
            &lt;inject bean="CircuitManager" /&gt;
        &lt;/property&gt;
    &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code class="class">org.restcomm.protocols.ss7.isup.impl.ISUPStackImpl</code> takes <code class="class">SS7Scheduler</code>, local signaling pointcode and network indicator as constructor argument.</p>
</div>
<div class="paragraph">
<p>Stack has following properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">mtp3UserPart</dt>
<dd>
<p>specifies SS7 Level 3 to be used as transport medium (be it SS7 card or M3UA).</p>
</dd>
<dt class="hdlist1">circuitManager</dt>
<dd>
<p>CIC management bean</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Feel free to delete declaration of this bean if your service is not consuming ISUP messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-ss7service"><a class="anchor" href="#configuring-ss7service"></a>5.1.11. Configuring SS7Service</h4>
<div class="paragraph">
<p>SS7Service acts as core engine binding all the components together.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ==================================================================== --&gt;
    &lt;!-- RestComm SS7 Service --&gt;
    &lt;!-- ==================================================================== --&gt;
    &lt;bean name="TCAPSS7Service" class="org.restcomm.ss7.SS7Service"&gt;
        &lt;constructor&gt;&lt;parameter&gt;TCAP&lt;/parameter&gt;&lt;/constructor&gt;
        &lt;annotation&gt;@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.restcomm.ss7:service=TCAPSS7Service",exposedInterface=org.restcomm.ss7.SS7ServiceMBean.class,registerDirectly=true)
        &lt;/annotation&gt;
        &lt;property name="jndiName"&gt;java:/restcomm/ss7/tcap&lt;/property&gt;
        &lt;property name="stack"&gt;
            &lt;inject bean="TcapStack" property="provider" /&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean name="MAPSS7Service" class="org.restcomm.ss7.SS7Service"&gt;
        &lt;constructor&gt;&lt;parameter&gt;MAP&lt;/parameter&gt;&lt;/constructor&gt;
        &lt;annotation&gt;@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.restcomm.ss7:service=MAPSS7Service",exposedInterface=org.restcomm.ss7.SS7ServiceMBean.class,registerDirectly=true)
        &lt;/annotation&gt;
        &lt;property name="jndiName"&gt;java:/restcomm/ss7/map&lt;/property&gt;
        &lt;property name="stack"&gt;
            &lt;inject bean="MapStack" property="MAPProvider" /&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean name="CAPSS7Service" class="org.restcomm.ss7.SS7Service"&gt;
        &lt;constructor&gt;&lt;parameter&gt;CAP&lt;/parameter&gt;&lt;/constructor&gt;
        &lt;annotation&gt;@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.restcomm.ss7:service=CAPSS7Service",exposedInterface=org.restcomm.ss7.SS7ServiceMBean.class,registerDirectly=true)
        &lt;/annotation&gt;
        &lt;property name="jndiName"&gt;java:/restcomm/ss7/cap&lt;/property&gt;
        &lt;property name="stack"&gt;
            &lt;inject bean="CapStack" property="CAPProvider" /&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean name="ISUPSS7Service" class="org.restcomm.ss7.SS7Service"&gt;
        &lt;constructor&gt;&lt;parameter&gt;ISUP&lt;/parameter&gt;&lt;/constructor&gt;
        &lt;annotation&gt;@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.restcomm.ss7:service=ISUPSS7Service",exposedInterface=org.restcomm.ss7.SS7ServiceMBean.class,registerDirectly=true)
        &lt;/annotation&gt;
        &lt;property name="jndiName"&gt;java:/restcomm/ss7/isup&lt;/property&gt;
        &lt;property name="stack"&gt;
            &lt;inject bean="IsupStack" property="isupProvider" /&gt;
        &lt;/property&gt;
    &lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>TCAPSS7Service binds TcapStack to JNDI <code>java:/restcomm/ss7/tcap</code>.</p>
</div>
<div class="paragraph">
<p>MAPSS7Service binds MapStack to JNDI <code>java:/restcomm/ss7/map</code>.</p>
</div>
<div class="paragraph">
<p>CAPSS7Service binds CapStack to JNDI <code>java:/restcomm/ss7/cap</code>.</p>
</div>
<div class="paragraph">
<p>ISUPSS7Service binds IsupStack to JNDI <code>java:/restcomm/ss7/isup</code>.</p>
</div>
<div class="paragraph">
<p>The JNDI name can be configured to any valid JNDI name specific to your application.</p>
</div>
<div class="paragraph">
<p>Feel free to delete service that your application is not using.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-jss7-management-service"><a class="anchor" href="#configuring-jss7-management-service"></a>5.1.12. Configuring jSS7 Management Service</h4>
<div class="paragraph">
<p>jSS7 Managemenet Service provides some extra functionality for stack management including jmx access to stacks, performance (statistics) and alarm management.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">	&lt;bean name="Ss7Management"
		class="org.restcomm.protocols.ss7.oam.common.jmxss7.Ss7Management"&gt;
		&lt;annotation&gt;@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.restcomm.ss7:service=Ss7Management",exposedInterface=org.restcomm.protocols.ss7.oam.common.jmxss7.Ss7ManagementMBean.class,registerDirectly=true)&lt;/annotation&gt;
		&lt;property name="agentId"&gt;jboss&lt;/property&gt;
	&lt;/bean&gt;

	&lt;bean name="RestcommAlarmManagement"
		class="org.restcomm.protocols.ss7.oam.common.alarm.AlarmProvider"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;

	&lt;bean name="RestcommStatisticManagement"
		class="org.restcomm.protocols.ss7.oam.common.statistics.CounterProviderManagement"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
		&lt;property name="persistDir"&gt;${jboss.server.data.dir}&lt;/property&gt;
	&lt;/bean&gt;

	&lt;bean name="RestcommSctpManagement"
		class="org.restcomm.protocols.ss7.oam.common.sctp.SctpManagementJmx"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;inject bean="SCTPManagement" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;

	&lt;bean name="RestcommM3uaManagement"
		class="org.restcomm.protocols.ss7.oam.common.m3ua.M3uaManagementJmx"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;inject bean="Mtp3UserPart" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;

	&lt;bean name="RestcommSccpManagement"
		class="org.restcomm.protocols.ss7.oam.common.sccp.SccpManagementJmx"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;inject bean="SccpStack" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;

	&lt;bean name="RestcommTcapManagement"
		class="org.restcomm.protocols.ss7.oam.common.tcap.TcapManagementJmx"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;inject bean="TcapStack" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;

	&lt;bean name="RestcommTcapMapManagement"
		class="org.restcomm.protocols.ss7.oam.common.tcap.TcapManagementJmx"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;inject bean="TcapStackMap" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;

	&lt;bean name="RestcommTcapCapManagement"
		class="org.restcomm.protocols.ss7.oam.common.tcap.TcapManagementJmx"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;inject bean="TcapStackCap" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;

&lt;!--
	&lt;bean name="RestcommLinksetManagement"
		class="org.restcomm.protocols.ss7.oam.common.linkset.LinksetManagerJmx"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Ss7Management" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;inject bean="LinksetManager" /&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;
--&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_sgw"><a class="anchor" href="#_configuring_sgw"></a>5.2. Configuring Restcomm  Signaling Gateway</h3>
<div class="paragraph">
<p>Configuration is done through an XML descriptor named <em class="path">sgw-beans.xml</em> and is  located at <em class="path">restcomm-ss7-sgw/deploy</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before Restcomm Signaling Gateway is configured the corresponding native libraries for <code>dahdi</code> or <code>dialogic</code> should be copied to <code>restcomm-ss7-sgw/native/32</code> or <code>restcomm-ss7-sgw/native/64</code> folders and gctApi library to <code>restcomm-ss7-sgw/lib</code> folder. See more details for where to get native libraries in <a href="#_configuring_dahdi">Configuring dahdi</a> and <a href="#_configuring_dialogic">Configuring dialogic</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_sgw_configuring_m3ua"><a class="anchor" href="#_sgw_configuring_m3ua"></a>5.2.1. Configuring M3UA (Signaling Gateway)</h4>
<div class="paragraph">
<p>SGW will expose the SS7 signals received from legacy network to IP network over M3UA</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;bean name="SCTPManagement" class="org.mobicents.protocols.sctp.netty.NettySctpManagementImpl"&gt;
        &lt;constructor&gt;
            &lt;parameter&gt;SCTPManagement&lt;/parameter&gt;
        &lt;/constructor&gt;
        &lt;property name="persistDir"&gt;${sgw.home.dir}/ss7&lt;/property&gt;
    &lt;/bean&gt;

	&lt;bean name="SCTPShellExecutor" class="org.restcomm.protocols.ss7.m3ua.impl.oam.SCTPShellExecutor"&gt;
		&lt;property name="sctpManagements"&gt;
			&lt;map keyClass="java.lang.String" valueClass="org.mobicents.protocols.sctp.ManagementImpl"&gt;
				&lt;entry&gt;
					&lt;key&gt;SCTPManagement&lt;/key&gt;
					&lt;value&gt;
						&lt;inject bean="SCTPManagement" /&gt;
					&lt;/value&gt;
				&lt;/entry&gt;
			&lt;/map&gt;
		&lt;/property&gt;
	&lt;/bean&gt;

	&lt;bean name="Mtp3UserPart" class="org.restcomm.protocols.ss7.m3ua.impl.M3UAManagementImpl"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;Mtp3UserPart&lt;/parameter&gt;
			&lt;parameter&gt;Restcomm-jSS7&lt;/parameter&gt;
		&lt;/constructor&gt;
        &lt;property name="persistDir"&gt;${sgw.home.dir}/ss7&lt;/property&gt;
		&lt;property name="transportManagement"&gt;
			&lt;inject bean="SCTPManagement" /&gt;
		&lt;/property&gt;
	&lt;/bean&gt;

	&lt;bean name="M3UAShellExecutor" class="org.restcomm.protocols.ss7.m3ua.impl.oam.M3UAShellExecutor"&gt;
		&lt;property name="m3uaManagements"&gt;
			&lt;map keyClass="java.lang.String" valueClass="org.restcomm.protocols.ss7.m3ua.impl.M3UAManagementImpl"&gt;
				&lt;entry&gt;
					&lt;key&gt;Mtp3UserPart&lt;/key&gt;
					&lt;value&gt;
						&lt;inject bean="Mtp3UserPart" /&gt;
					&lt;/value&gt;
				&lt;/entry&gt;
			&lt;/map&gt;
		&lt;/property&gt;
	&lt;/bean&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sgw_configuring_linksetfactory"><a class="anchor" href="#_sgw_configuring_linksetfactory"></a>5.2.2. Configuring LinksetFactory</h4>
<div class="paragraph">
<p>Concrete implementation of <code>LinksetFactory</code> is responsible to create  new instances of corresponding <code>Linkset</code> when instructed by <code>LinksetManager</code>.
Restcomm  Signaling Gateway defines two linkset factories :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DahdiLinksetFactory</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">	&lt;bean name="DahdiLinksetFactory"
		class="org.restcomm.ss7.hardware.dahdi.oam.DahdiLinksetFactory"&gt;
		&lt;property name="scheduler"&gt;
			&lt;inject bean="Scheduler" /&gt;
		&lt;/property&gt;
	&lt;/bean&gt;</code></pre>
</div>
</div>
</li>
<li>
<p><code>DialogicLinksetFactory</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">	&lt;bean name="DialogicLinksetFactory"
		class="org.restcomm.ss7.hardware.dialogic.oam.DialogicLinksetFactory"&gt;
	&lt;/bean&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Its highly unlikely that you would require both the factories on same gateway.
If you have <code>dahdi</code> based  SS7 card installed, keep <code>DahdiLinksetFactory</code> and remove other.
If you have <code>dialogic</code> based  SS7 card installed, keep <code>DialogicLinksetFactory</code> and remove other.</p>
</div>
<div class="paragraph">
<p><code>LinksetFactoryFactory</code> is just a call-back class listening for new factories deployed  and maintains Map of available factory name vs factory.
You should never touch this bean.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sgw_configuring_linksetmanager"><a class="anchor" href="#_sgw_configuring_linksetmanager"></a>5.2.3. Configuring LinksetManager</h4>
<div class="paragraph">
<p><code>LinksetManager</code> is responsible for managing <code>Linkset</code> and <code>Link</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ================================================ --&gt;
    &lt;!-- Linkset manager Service                                              --&gt;
    &lt;!-- ================================================ --&gt;
	&lt;bean name="LinksetManager" class="org.restcomm.ss7.linkset.oam.LinksetManagerImpl"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;LinksetManager&lt;/parameter&gt;
		&lt;/constructor&gt;
		&lt;property name="scheduler"&gt;
			&lt;inject bean="Scheduler" /&gt;
		&lt;/property&gt;

		&lt;property name="linksetFactoryFactory"&gt;
			&lt;inject bean="LinksetFactoryFactory" /&gt;
		&lt;/property&gt;
		&lt;property name="persistDir"&gt;${sgw.home.dir}/ss7&lt;/property&gt;
	&lt;/bean&gt;

	&lt;bean name="LinksetExecutor" class="org.restcomm.ss7.linkset.oam.LinksetExecutor"&gt;
		&lt;property name="linksetManager"&gt;
			&lt;inject bean="LinksetManager" /&gt;
		&lt;/property&gt;
	&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>LinksetManagerImpl when started looks for file  <em class="path">linksetmanager.xml</em> containing serialized information about underlying linksets and links.
The directory path is configurable by changing value of <code>persistDir</code> property.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<em class="path">linksetmanager.xml</em> should never be edited by hand.
Always use Shell Client to connect to  Restcomm  Signaling Gateway and execute commands.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>LinksetExecutor</code> accepts the <code>linkset</code> commands and executes necessary operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sgw_configuring_shellexecutor"><a class="anchor" href="#_sgw_configuring_shellexecutor"></a>5.2.4. Configuring ShellExecutor</h4>
<div class="paragraph">
<p><code>ShellExecutor</code> is responsible for listening to incoming command.
Received commands are executed on local resources to  perform actions like creation and management of <code>Linkset</code>,  management of <code>M3UA</code> stack.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ================================================ --&gt;
    &lt;!-- Shell Service                                                        --&gt;
    &lt;!-- ================================================ --&gt;
	&lt;bean name="ShellExecutor" class="org.restcomm.ss7.management.console.ShellServer"&gt;
		&lt;constructor&gt;
			&lt;parameter&gt;
				&lt;inject bean="Scheduler" /&gt;
			&lt;/parameter&gt;
			&lt;parameter&gt;
				&lt;list class="javolution.util.FastList" elementClass="org.restcomm.ss7.management.console.ShellExecutor"&gt;
					&lt;inject bean="M3UAShellExecutor" /&gt;
					&lt;inject bean="SCTPShellExecutor" /&gt;
					&lt;inject bean="LinksetExecutor" /&gt;
				&lt;/list&gt;
			&lt;/parameter&gt;
		&lt;/constructor&gt;

		&lt;property name="address"&gt;${sgw.bind.address}&lt;/property&gt;
		&lt;property name="port"&gt;3435&lt;/property&gt;
	&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default ShellExecutor listens at <code>sgw.bind.address</code> and port <code>3435</code>.
You may set the <code>address</code> property to any valid IP address that your host is assigned.
The shell commands are exchanged over TCP/IP.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sgw_configuring_sgw"><a class="anchor" href="#_sgw_configuring_sgw"></a>5.2.5. Configuring SignalingGateway</h4>
<div class="paragraph">
<p><code>SignalingGateway</code> acts as core engine binding all the components together.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;!-- ================================================ --&gt;
    &lt;!-- mobicents Signaling Gateway                                      --&gt;
    &lt;!-- ================================================ --&gt;
	&lt;bean name="SignalingGateway" class="org.restcomm.ss7.sgw.SignalingGateway"&gt;
		&lt;property name="scheduler"&gt;
			&lt;inject bean="Scheduler" /&gt;
		&lt;/property&gt;

		&lt;property name="nodalInterworkingFunction"&gt;
			&lt;inject bean="NodalInterworkingFunction" /&gt;
		&lt;/property&gt;

	&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>NodalInterworkingFunction</code> sits between the SS7 netwrok and IP network and routes messages  to/from both the MTP3 and the M3UA layer, based on the SS7 DPC or DPC/SI address information</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_standalone"><a class="anchor" href="#_configuring_standalone"></a>6. Configuring as a Standalone library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you intend to use the Stack as a standalone library without using JBoss Application Server or JSLEE RAs, then you must manually build each of the protocols, configure them individually, and bind them together.
For RestcommONE (Telscale) version before start JSS7 layers you need to create Ss7ExtInterfaceTelscale object for extending functionality:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>Ss7ExtInterfaceTelscale ss7ExtInterfaceTelscale = new Ss7ExtInterfaceTelscale();
SccpExtModule sccpExtModule = new SccpExtModuleImpl();
ss7ExtInterfaceTelscale.setSs7ExtSccpInterface(sccpExtModule);</code></pre>
</div>
</div>
<div class="paragraph">
<p>this object will be used creating M3UA, SCCP, Dialogic instances.
For a public version (that does not contain an extended functionality) we need to use <code>null</code> instead of a Ss7ExtInterfaceTelscale implementation.</p>
</div>
<div class="sect2">
<h3 id="_standalone_sctp"><a class="anchor" href="#_standalone_sctp"></a>6.1. Building SCTP</h3>
<div class="paragraph">
<p>This is an example of a typical SCTP startup procedure, in one line of code, using automatic configuration file detection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    org.mobicents.protocols.api.Management sctpManagement = null;
    sctpManagement = new org.mobicents.protocols.sctp.netty.NettySctpManagementImpl("Client");
    sctpManagement.setPersistDir("&lt;your directory path&gt;");

    sctpManagement.start();

    sctpManagement.setConnectDelay(10000);</code></pre>
</div>
</div>
<div class="paragraph">
<p>How did jSS7 know where the configuration file was located and which one to load?</p>
</div>
<div class="paragraph">
<p>When <code>sctpManagement.start()</code> is called, jSS7 searches for a file named <em class="path">Client_sctp.xml</em> in the directory path set by user by calling  <code>sctpManagement.setPersistDir("&lt;your directory path&gt;")</code>.
For example in case of linux you can pass something like  <code>this.sctpManagement.setPersistDir("/home/abhayani/workarea/mobicents/git/jss7/master/map/load/client")</code>.
If directory path is not set, Management searches for system property  <code>sctp.persist.dir</code> to get the path for directory.
Even if <code>sctp.persist.dir</code> system property is not set, Management will look at System set property  <code>user.dir</code>.</p>
</div>
<div class="paragraph">
<p>Once you know SCTP layer is configured and started, you can set Stack level parameters like <code>connectionDelay</code> by calling setters like: <code>sctpManagement.setConnectDelay(10000);</code></p>
</div>
<div class="paragraph">
<p>Next step is adding of the Association and/or Server depending on whether this setup will be acting as client or server or both. Normally a configured set of Association and/or Server are stored in the xml config file and this way is recommended. But if you want to remove all previously configured Associations and Servers you need to call this command (after a Stack start).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    sctpManagement.removeAllResourses();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before adding server side association the server should also be defined and started as below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    boolean acceptAnonymousConnections = false;
    int maxConcurrentConnectionsCount = 0; // for AnonymousConnections, 0 means unlimited
    String[] extraHostAddresses = null; // for multi-homing
    IpChannelType ipChannelType = IpChannelType.SCTP;

    sctpManagement.addServer(SERVER_NAME, SERVER_IP, SERVER_PORT, ipChannelType, acceptAnonymousConnections, maxConcurrentConnectionsCount, extraHostAddresses);
    sctpManagement.addServerAssociation(PEER_IP, PEER_PORT, SERVER_NAME, SERVER_ASSOCIATION_NAME, ipChannelType);
    sctpManagement.startServer(SERVER_NAME);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Client side association the code is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    String[] extraHostAddresses = null; // for multi-homing
    IpChannelType ipChannelType = IpChannelType.SCTP;

    sctpManagement.addAssociation(HOST_IP, HOST_PORT, PEER_IP, PEER_PORT, CLIENT_ASSOCIATION_NAME, ipChannelType, extraHostAddresses);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You should never start the Association programatically.
Association will be started automatically when layer above M3UA&#8217;s ASP is started.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This completes the SCTP configuration and start-up.</p>
</div>
</div>
<div class="sect2">
<h3 id="_building_m3ua_standalone"><a class="anchor" href="#_building_m3ua_standalone"></a>6.2. Building M3UA</h3>
<div class="paragraph">
<p>Configuring the M3UA layer is similar to the steps followed for SCTP.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    org.restcomm.protocols.ss7.m3ua.impl clientM3UAMgmt = null;
    clientM3UAMgmt = new M3UAManagement("Client", null);
    clientM3UAMgmt.setPersistDir("&lt;your directory path&gt;");
    clientM3UAMgmt.setTransportManagement(sctpManagement);
    clientM3UAMgmt.setDeliveryMessageThreadCount(DELIVERY_TRANSFER_MESSAGE_THREAD_COUNT);

    clientM3UAMgmt.start();</code></pre>
</div>
</div>
<div class="paragraph">
<p>For RestcommONE (Telscale) version creation of M3UAManagement looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    clientM3UAMgmt = new M3UAManagement("Client", null, ss7ExtInterfaceTelscale);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For M3UA, it should know which underlying SCTP layer to use <code>clientM3UAMgmt.setTransportManagement(sctpManagement);</code>.</p>
</div>
<div class="paragraph">
<p>Once M3UA is configured and started, next step is to add the As, Asp and routing rules for M3UA. Configured set of As, Asp and routing rules is trored in <em class="path">Client_m3ua1.xml</em> (in "your directory path" folder). But if you want to remove all previously configured As, Asp and routing rules you need to call this command (after a Stack start).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    clientM3UAMgmt.removeAllResourses();</code></pre>
</div>
</div>
<div class="paragraph">
<p>A set of As, Asp and routing rules depends on whether stack acts as Application Server side or Signaling Gateway side or just  peer-to-peer (IPSP) client/server side.
Below is an example of IPSP peer acting as client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    ParameterFactoryImpl factory = new ParameterFactoryImpl();

    // Step 1 : Create App Server
    RoutingContext rc = factory.createRoutingContext(new long[] { 100l });
    TrafficModeType trafficModeType = factory.createTrafficModeType(TrafficModeType.Loadshare);
    As as = clientM3UAMgmt.createAs("AS1", Functionality.AS, ExchangeType.SE, IPSPType.CLIENT, rc, trafficModeType, 1, null);

    // Step 2 : Create ASP
    AspFactory aspFactor = clientM3UAMgmt.createAspFactory("ASP1", CLIENT_ASSOCIATION_NAME);

    // Step3 : Assign ASP to AS
    Asp asp = clientM3UAMgmt.assignAspToAs("AS1", "ASP1");

    // Step 4: Add Route. Remote point code is 2
    clientM3UAMgmt.addRoute(SERVET_SPC, -1, -1, "AS1");</code></pre>
</div>
</div>
<div class="paragraph">
<p>This completes the M3UA configuration and start-up.
Once M3UA is configured depending on whether you are trying to build voice application that depends on ISUP or  advanced network features such as those offered by supplementary services that depends on MAP, you would configure ISUP or SCCP</p>
</div>
</div>
<div class="sect2">
<h3 id="building-sccp"><a class="anchor" href="#building-sccp"></a>6.3. Building SCCP</h3>
<div class="paragraph">
<p>Configuring the SCCP layer follows exactly same architecture of persisting configuration in xml file.</p>
</div>
<div class="paragraph">
<p>If only connectionless protocol classes will be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    org.restcomm.protocols.ss7.sccp.SccpStack sccpStack = null;
    sccpStack = new SccpStackImpl("MapLoadClientSccpStack");
    clientM3UAMgmt.setPersistDir("&lt;your directory path&gt;");
    sccpStack.setMtp3UserPart(1, this.clientM3UAMgmt);

    sccpStack.start();</code></pre>
</div>
</div>
<div class="paragraph">
<p>For RestcommONE (Telscale) version creation of SccpStackImpl looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    sccpStack = new SccpStackImpl(schedulerMBean, beanName, ss7ExtInterfaceTelscale);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For connection-oriented protocol classes support configure SCCP layer the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    org.restcomm.protocols.ss7.scheduler.Clock clock = new DefaultClock();
    org.restcomm.protocols.ss7.scheduler.Scheduler scheduler = new Scheduler();
    scheduler.setClock(clock);

    org.restcomm.protocols.ss7.sccp.SccpStack sccpStack = null;
    sccpStack = new SccpStackImpl(scheduler, "MapLoadClientSccpStack");
    clientM3UAMgmt.setPersistDir("&lt;your directory path&gt;");
    sccpStack.setMtp3UserPart(1, this.clientM3UAMgmt);

    scheduler.start();
    sccpStack.start();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before starting SCCP stack all it needs to know is underlying MTP3 layer and scheduler.
This scheduler is used for asynchronously sending outgoing messages.
Above sections explained building SCTP and M3UA,  however if you are using Dialogic boards or dahdi based boards (Diguim/Sangoma), you need to build and configure respective MTP3 layers depending on hardware used and set those in SCCP Stack <code>sccpStack.setMtp3UserPart(1, this.clientM3UAMgmt)</code>.</p>
</div>
<div class="paragraph">
<p>One of the best features of jSS7 is it supports multiple MTP3 layers and hence you can have combination of many MTP3 layers (each of different or same type like M3UA, Dialogic and Dahid;  all used at same time).</p>
</div>
<div class="paragraph">
<p>Once SCCP stack is started, it should be configured for local and remote signaling point-code, network indicator, remote sub system number and routing rules. For removing all previously configured resources you need to call this command (after a Stack start).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    sccpStack.removeAllResourses();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example for adding resources:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    sccpStack.getSccpResource().addRemoteSpc(0, SERVET_SPC, 0, 0);
    sccpStack.getSccpResource().addRemoteSsn(0, SERVET_SPC, SSN, 0, false);

    sccpStack.getRouter().addMtp3ServiceAccessPoint(1, 1, CLIENT_SPC, NETWORK_INDICATOR, 0);
    sccpStack.getRouter().addMtp3Destination(1, 1, SERVET_SPC, SERVET_SPC, 0, 255, 255);

    ParameterFactoryImpl fact = new ParameterFactoryImpl();
    EncodingScheme ec = new BCDEvenEncodingScheme();
    GlobalTitle gt1 = fact.createGlobalTitle("-", 0, org.restcomm.protocols.ss7.indicator.NumberingPlan.ISDN_TELEPHONY, ec, NatureOfAddress.INTERNATIONAL);
    GlobalTitle gt2 = fact.createGlobalTitle("-", 0, org.restcomm.protocols.ss7.indicator.NumberingPlan.ISDN_TELEPHONY, ec, NatureOfAddress.INTERNATIONAL);
    SccpAddress localAddress = new SccpAddressImpl(RoutingIndicator.ROUTING_BASED_ON_GLOBAL_TITLE, gt1, CLIENT_SPC, 0);
    sccpStack.getRouter().addRoutingAddress(1, localAddress);
    SccpAddress remoteAddress = new SccpAddressImpl(RoutingIndicator.ROUTING_BASED_ON_GLOBAL_TITLE, gt2, SERVET_SPC, 0);
    sccpStack.getRouter().addRoutingAddress(2, remoteAddress);

    GlobalTitle gt = fact.createGlobalTitle("*", 0, org.restcomm.protocols.ss7.indicator.NumberingPlan.ISDN_TELEPHONY, ec, NatureOfAddress.INTERNATIONAL);
    SccpAddress pattern = new SccpAddressImpl(RoutingIndicator.ROUTING_BASED_ON_GLOBAL_TITLE, gt, 0, 0);
    sccpStack.getRouter().addRule(1, RuleType.SOLITARY, LoadSharingAlgorithm.Bit0, OriginationType.REMOTE, pattern, "K", 1, -1, null, 0);
    sccpStack.getRouter().addRule(2, RuleType.SOLITARY, LoadSharingAlgorithm.Bit0, OriginationType.LOCAL, pattern, "K", 2, -1, null, 0);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once SCCP is configured and started, next step it to build TCAP layer.</p>
</div>
</div>
<div class="sect2">
<h3 id="building-tcap"><a class="anchor" href="#building-tcap"></a>6.4. Building TCAP</h3>
<div class="paragraph">
<p>There is no configuration to persist in case of TCAP.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    org.restcomm.protocols.ss7.tcap.api tcapStack = null;
    tcapStack = new TCAPStackImpl("Client", this.sccpStack.getSccpProvider(), SSN);

    tcapStack.start();

    this.tcapStack.setDialogIdleTimeout(60000);
    this.tcapStack.setMaxDialogs(MAX_DIALOGS);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuring TCAP is probably very simple as config reamins same irrespective of whether its used on client side or server side.</p>
</div>
</div>
<div class="sect2">
<h3 id="building-map"><a class="anchor" href="#building-map"></a>6.5. Building MAP</h3>
<div class="paragraph">
<p>There is no configuration to persist in case of MAP; however MAP stack can take TCAPProvider from TCAPStack which is already configured for specific SSN as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    mapStack = new MAPStackImpl("Client", tcapStack.getProvider());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or it can also directly take SccpProvider and pass SSN to MAP Stack as shown below.
In this case MAPStack itself creates the TCAPStack and leverages TCAPProvider:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    mapStack = new MAPStackImpl("Client", sccpStack.getSccpProvider(), SSN);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before MAPStack can be started, the Application interested in particualr MAP Service should register it-self as listener and activate that service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    mapProvider = mapStack.getMAPProvider();
    mapProvider.addMAPDialogListener(this);
    mapProvider.getMAPServiceSupplementary().addMAPServiceListener(this);
    mapProvider.getMAPServiceSupplementary().acivate();
    mapStack.start();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Below is how the Application code looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    public class Client extends MAPDialogListener, MAPServiceSupplementaryListener  {
        //Implemet all MAPDialogListener methods here

        //Implement all MAPServiceSupplementaryListener methods here
    }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="common-code"><a class="anchor" href="#common-code"></a>6.6. Common Code</h3>
<div class="paragraph">
<p>All above snippet of code refers to below defined constants:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    // MTP Details
    protected final int CLIENT_SPC = 1;
    protected final int SERVET_SPC = 2;
    protected final int NETWORK_INDICATOR = 2;
    protected final int SERVICE_INIDCATOR = 3; //SCCP
    protected final int SSN = 8;

    protected final String CLIENT_IP = "127.0.0.1";
    protected final int CLIENT_PORT = 2345;

    protected final String SERVER_IP = "127.0.0.1";
    protected final int SERVER_PORT = 3434;

    protected final int ROUTING_CONTEXT = 100;

    protected final String SERVER_ASSOCIATION_NAME = "serverAsscoiation";
    protected final String CLIENT_ASSOCIATION_NAME = "clientAsscoiation";

    protected final String SERVER_NAME = "testserver";

    .....
    .....</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have completed development of your application, next thing is setting the classpath, compiling and starting application.
You must set the classpath to point to  restcomm-jss7-X.Y.Z/ss7/restcomm-ss7-service/lib.
It has all the libraries needed to compile and start your application.
Don&#8217;t forget to include your compiled Application class file in classpath before starting the Application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managing"><a class="anchor" href="#_managing"></a>7. Managing Restcomm jSS7</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Restcomm jSS7 comes with a convenient user-friendly Graphical User Interface (GUI) and a Command Line Interface (CLI) that will allow you to configure, monitor and manage the Stack.
While the CLI tool allows complete configuration and control of the Stack, the GUI-based management enhances the usability of the platform and gives you the ability to create different SS7 configurations and manage the platform dynamically.
This chapter will explain how to manage the Stack effectively using both the GUI and the CLI.</p>
</div>
<div class="sect2">
<h3 id="_managing_linksets"><a class="anchor" href="#_managing_linksets"></a>7.1. Linkset Management</h3>
<div class="sect3">
<h4 id="_managing_linksets_using_cli"><a class="anchor" href="#_managing_linksets_using_cli"></a>7.1.1. Using CLI</h4>
<div class="paragraph">
<p>You can manage Linksets and Links using CLI or GUI.
You can create, delete, activate and deactivate linksets and links using the Shell command <code>linkset</code> with appropriate parameters.
The <code>linkset</code> command can be used only when dahdi based cards are configured.</p>
</div>
</div>
<div class="sect3">
<h4 id="_managing_linksets_using_gui"><a class="anchor" href="#_managing_linksets_using_gui"></a>7.1.2. Using GUI</h4>
<div class="paragraph">
<p>The GUI will allow you to manage your linksets and links efficiently using a user-friendly interface.
Open a Web Browser and navigate to <a href="http://localhost:8080/jss7-management-console/" class="bare">http://localhost:8080/jss7-management-console/</a>. Click on the 'linkset' link in the left panel.
The main panel will display the names of all configured Linkset Management units.
To configure or view the settings of a particular Linkset Management Unit you must click on the name of that unit.
The GUI will look similar to the figure below and is divided into two tabs.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_Linkset_Management.png" alt="GUI Linkset Management">
</div>
<div class="title">Figure 12. GUI - Linkset Management</div>
</div>
<div class="paragraph">
<p>The first tab will display the properties of the Linkset Management unit.
These details displayed here are fetched from the XML descriptor file <em class="path">jboss-beans.xml</em>, which is  located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where  <code class="app">profile_name</code> is the server profile name.
These properties cannot be modified here in the GUI.
To modify them you must modifiy the <em class="path">jboss-beans.xml</em> and restart the Server.
The GUI will then display the modified values.</p>
</div>
<div class="paragraph">
<p>The other tab will allow you to manage all Linksets and Links within this Linkset Management unit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_show"><a class="anchor" href="#_shell_linkset_show"></a>7.1.3. View all Linksets and Links</h4>
<div class="sect4">
<h5 id="_shell_linkset_show_cli"><a class="anchor" href="#_shell_linkset_show_cli"></a>7.1.3.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the current status of all correctly configured Linksets and Links by issuing the command <code>linkset show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset show

SYNOPSIS
	linkset show

DESCRIPTION
	This command is used to view all Links and Linksets and their states.

	The possible states of a Linkset are:

	- UNAVAILABLE	:	Indicates that the Linkset does not have any 'available'
				links and cannot transport traffic.

	- SHUTDOWN	:	Indicates that Linkset has been shutdown.

	- AVAILABLE	:	Indicates that the Linkset has atleast one 'available'
				link and can transport traffic.

	The possible states of a Link are:

	- UNAVAILABLE	:	Indicates that the Link is not 'available' to transport
				traffic. A Link is 'unavailable' if the Link is remotely
				or locally inhibited by a user. It can also be
				'unavailable' if MTP2 has not been able to successfully
				activate the link connection.

	- SHUTDOWN	:	Indicates the Link has been shutdown in the configuration.

	- AVAILABLE	:	Indicates the Link is active and 'available' to transport
				traffic.

	- FAILED	:	Indicates that the Link is not 'shutdown' but is
				'unavailable' at Layer 2 for some reason. For example, the
				Initial Alignment may fail, or the link test messages sent
				by MTP 3 are not being acknowledged.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_show_gui"><a class="anchor" href="#_shell_linkset_show_gui"></a>7.1.3.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific Linkset Management unit and switch to the 'Linksets' tab.
Here you can view a list of all the Linksets created.
Every correctly configured Linkset will be displayed in a row and for each Linkset, the first column will display the name of the Linkset.
The icon adjacent to the name will be lit 'green' if the Linkset is currently active or 'orange' if inactive.
The second column will indicate the current mode of the Linkset (Configured / Not Configured), the third column will allow you to activate / deactivate the Linkset and the fourth column will allow you to delete the Linkset.</p>
</div>
<div class="paragraph">
<p>To view the details of all the Links created within a specific Linkset click on the name of the Linkset whose details you wish to view.
This will launch the 'Links' view and display all the configured properties of the selected Linkset in the first tab.
The second tab in this view will allow you to view all Links in this particular Linkset.
You can click on any Link name here to view the configured properties.
You can click on the bread crumbs at the top to return to any of the previous pages you navigated through.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_create"><a class="anchor" href="#_shell_linkset_create"></a>7.1.4. Create a new Linkset</h4>
<div class="sect4">
<h5 id="_shell_linkset_create_cli"><a class="anchor" href="#_shell_linkset_create_cli"></a>7.1.4.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new Linkset by issuing the command <code>linkset create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset create

SYNOPSIS
	linkset create dahdi opc &lt;point-code&gt; apc &lt;point-code&gt; ni &lt;network-id&gt;
	&lt;linkset-name&gt;

DESCRIPTION
	This command is used to create a new Linkset of type Dahdi as explained below. You
	must ensure that appropriate linkset factories are deployed prior to creating any
	linkset.

PARAMETERS
	opc &lt;point-code&gt; 		-	MTP Point code of the originating
						signalling point. Takes an Integer Value.

	apc &lt;point-code&gt;		-	MTP  Point code of the adjacent signalling
						point. Takes an Integer Value.

	ni &lt;network-id&gt; 		-	Network Identifier and should be one of
						the following values
							0 - International Network
							1 - Spare (for International use)
							2 - National Network
							3 - Reserved for National use

	&lt;linkset-name&gt;			-	Name of the Linkset to be created. This
						will be used to identify the linkset.
						Takes a String value.

EXAMPLES
	linkset create dahdi opc 3 apc 4 ni 0 dahdilinkset1

	The above command will create a new linkset of type Dahdi and name dahdilinkset1.
	The originating point code value is 3 and the adjacent point code value is 4 and
	the network is an international network.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_create_gui"><a class="anchor" href="#_shell_linkset_create_gui"></a>7.1.4.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create new Linkset using GUI</div>
<ol class="arabic">
<li>
<p>In the section for Linksets in the Linkset Management Unit window, click on the 'Create Linkset' button.
This will launch a pop-up 'Create Linkset'.</p>
</li>
<li>
<p>In the 'Create Linkset' pop-up, add details of the new Linkset.
You must ensure that you fill in all the mandatory parameters (OPC, DPC, NI and Linkset Name). For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new Linkset will be created with parameters as specified.
If there is an error in creating the Linkset then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Linkset' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_delete"><a class="anchor" href="#_shell_linkset_delete"></a>7.1.5. Remove a Linkset</h4>
<div class="sect4">
<h5 id="_shell_linkset_delete_cli"><a class="anchor" href="#_shell_linkset_delete_cli"></a>7.1.5.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete an existing Linkset by issuing the command <code>linkset delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset delete

SYNOPSIS
	linkset delete &lt;linkset-name&gt;

DESCRIPTION
	This command is used to delete an existing Linkset.

PARAMETERS
	&lt;linkset-name&gt;		-	Name of the Linkset to be deleted.

EXAMPLE
	linkset delete dahdilinkset1

	The above command will delete the Linkset identified by the name dahdilinkset1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_delete_gui"><a class="anchor" href="#_shell_linkset_delete_gui"></a>7.1.5.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete Linkset using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Linksets' section in the Linkset Management Unit window and locate the row corresponding to the Linkset you wish to delete.</p>
</li>
<li>
<p>You must ensure that the Linkset is deactivated prior to deletion.
If the Linkset is deactivated, the last column for 'Delete' will display a 'x' button in red and will be enabled.
If the Linkset is currently active, the 'x' button will be disabled.
You can only delete the Linkset if it is not active.</p>
</li>
<li>
<p>Click on the red 'x' button to delete the corresponding Linkset.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_activate"><a class="anchor" href="#_shell_linkset_activate"></a>7.1.6. Activate Linkset</h4>
<div class="sect4">
<h5 id="_shell_linkset_activate_cli"><a class="anchor" href="#_shell_linkset_activate_cli"></a>7.1.6.1. Using CLI</h5>
<div class="paragraph">
<p>You can activate an existing Linkset by issuing the command <code>linkset activate</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset activate

SYNOPSIS
	linkset activate &lt;linkset-name&gt;

DESCRIPTION
	This command is used to activate an existing Linkset.

PARAMETERS
	&lt;linkset-name&gt;		-	Name of the Linkset to be activated.

EXAMPLE
	linkset activate dahdilinkset1

	The above command will activate the Linkset identified by the name dahdilinkset1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_activate_gui"><a class="anchor" href="#_shell_linkset_activate_gui"></a>7.1.6.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Activate a Linkset using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Linksets' section in the Linkset Management Unit window and locate the row corresponding to the Linkset you wish to activate.</p>
</li>
<li>
<p>Click on the 'Activate' button in the actions column to activate the corresponding Linkset.</p>
</li>
<li>
<p>If the Linkset has been activated successfully you will find the status indicating the Linkset as 'Available' and the Linkset&#8217;s icon will be lit green.
If there is an error and the Linkset failed to activate, you will find details of the error in the Management Console log below.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_deactivate"><a class="anchor" href="#_shell_linkset_deactivate"></a>7.1.7. Deactivate Linkset</h4>
<div class="sect4">
<h5 id="_shell_linkset_deactivate_cli"><a class="anchor" href="#_shell_linkset_deactivate_cli"></a>7.1.7.1. Using CLI</h5>
<div class="paragraph">
<p>You can deactivate a currently active Linkset by issuing the command <code>linkset deactivate</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset deactivate

SYNOPSIS
	linkset deactivate &lt;linkset-name&gt;

DESCRIPTION
	This command is used to deactivate an existing Linkset.

PARAMETERS
	&lt;linkset-name&gt;		-	Name of the Linkset to be deactivated.

EXAMPLE
	linkset deactivate dahdilinkset1

	The above command will deactivate the Linkset identified by the name dahdilinkset1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_deactivate_gui"><a class="anchor" href="#_shell_linkset_deactivate_gui"></a>7.1.7.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Deactivate a Linkset using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Linksets' section in the Linkset Management Unit window and locate the row corresponding to the Linkset you wish to deactivate.</p>
</li>
<li>
<p>To deactivate a Linkset currently active, click on the 'Deactivate' button in the actions column of the row corresponding to the Linkset.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_link_create"><a class="anchor" href="#_shell_linkset_link_create"></a>7.1.8. Create a new Link</h4>
<div class="sect4">
<h5 id="_shell_linkset_link_create_cli"><a class="anchor" href="#_shell_linkset_link_create_cli"></a>7.1.8.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new Link by issuing the command <code>linkset link create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset link create

SYNOPSIS
	linkset link create span &lt;span-num&gt; code &lt;code-num&gt; channel &lt;channel-num&gt;
	&lt;linkset-name&gt; &lt;link-name&gt;

DESCRIPTION
	This command is used to create a new Link within a Linkset. The Linkset must be
	created prior to executing this command.

PARAMETERS
	span &lt;span-num&gt; 	-	Port number in the Card (indexed from 0).
					Takes an Integer Value.

	code &lt;code-num&gt;		-	Signaling Link code
					SLS (Signaling link selection) assigned to this
					Link. Takes an Integer Value.

	channel &lt;channel-num&gt; 	-	Time Slot number (TDM time slot).
					Takes an Integer Value.

	&lt;linkset-name&gt;		-	Name of the Linkset within which the new Link is
					being created.

	&lt;link-name&gt;		- 	Name of the Link to be created. This will be used
					to identify the Link. Takes a String value.

EXAMPLES
	linkset link create span 1 code 1 channel 1 linkset1 link1

	The above command will create a new Link identified as link1 within an existing
	Linkset identified as linkset1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_link_create_gui"><a class="anchor" href="#_shell_linkset_link_create_gui"></a>7.1.8.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create new Link using GUI</div>
<ol class="arabic">
<li>
<p>In the section for Links in the Linkset Management Unit window, click on the 'Create Link' button.
This will launch a pop-up 'Create Link'.</p>
</li>
<li>
<p>In the 'Create Link' pop-up, add details of the new Link.
You must ensure that you fill in all the  parameters.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new Link will be created with parameters as specified.
If there is an error in creating the Link then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Link' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_link_delete"><a class="anchor" href="#_shell_linkset_link_delete"></a>7.1.9. Remove a Link</h4>
<div class="sect4">
<h5 id="_shell_linkset_link_delete_cli"><a class="anchor" href="#_shell_linkset_link_delete_cli"></a>7.1.9.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete an existing Link by issuing the command <code>linkset link delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset link delete

SYNOPSIS
	linkset link delete &lt;linkset-name&gt; &lt;link-name&gt;

DESCRIPTION
	This command is used to delete an existing Link within a Linkset.

PARAMETERS
	&lt;link-name&gt;		- 	Name of the Link to be deleted.

	&lt;linkset-name&gt;		-	Name of the Linkset within which the Link resides.

EXAMPLE
	linkset link delete linkset1 link1

	The above command will delete the Link identified by the name Link1 within the
	Linkset linkset1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_link_delete_gui"><a class="anchor" href="#_shell_linkset_link_delete_gui"></a>7.1.9.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete Link using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Links' section in the Linkset Management Unit window and locate the row corresponding to the Link you wish to delete.</p>
</li>
<li>
<p>You must ensure that the Link is deactivated prior to deletion.
If the Link is inactive, the last column for 'Delete' will display a 'x' button in red.
If the Link is currently active, the 'x' button will be displayed in orange.
You can only delete the Link if it is inactive and the 'x' button is displayed in red.</p>
</li>
<li>
<p>Click on the red 'x' button to delete the corresponding Link instance.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_link_activate"><a class="anchor" href="#_shell_linkset_link_activate"></a>7.1.10. Activate Link</h4>
<div class="sect4">
<h5 id="_shell_linkset_link_activate_cli"><a class="anchor" href="#_shell_linkset_link_activate_cli"></a>7.1.10.1. Using CLI</h5>
<div class="paragraph">
<p>You can activate an existing Link by issuing the command <code>linkset link activate</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset link activate

SYNOPSIS
	linkset link activate &lt;linkset-name&gt; &lt;link-name&gt;

DESCRIPTION
	This command is used to activate an existing Link within a Linkset.

PARAMETERS
	&lt;link-name&gt;		- 	Name of the Link to be activated.

	&lt;linkset-name&gt;		-	Name of the Linkset within which the Link resides.

EXAMPLE
	linkset link activate linkset1 link1

	The above command will activate the Link identified by the name Link1 within the
	Linkset linkset1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_link_activate_gui"><a class="anchor" href="#_shell_linkset_link_activate_gui"></a>7.1.10.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Activate Link using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Links' section in the Linkset Management Unit window and locate the row corresponding to the Link you wish to activate.</p>
</li>
<li>
<p>Click on the 'Activate' button to activate that Link within the Linkset.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shell_linkset_link_deactivate"><a class="anchor" href="#_shell_linkset_link_deactivate"></a>7.1.11. Deactivate Link</h4>
<div class="sect4">
<h5 id="_shell_linkset_link_deactivate_cli"><a class="anchor" href="#_shell_linkset_link_deactivate_cli"></a>7.1.11.1. Using CLI</h5>
<div class="paragraph">
<p>You can deactivate a currently active Link by issuing the command <code>linkset link deactivate</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	linkset link deactivate

SYNOPSIS
	linkset link deactivate &lt;linkset-name&gt; &lt;link-name&gt;

DESCRIPTION
	This command is used to deactivate an existing Link within a Linkset.

PARAMETERS
	&lt;link-name&gt;		- 	Name of the Link to be deactivated.

	&lt;linkset-name&gt;		-	Name of the Linkset within which the Link resides.

EXAMPLE
	linkset link deactivate linkset1 link1

	The above command will deactivate the Link identified by the name Link1 within the
	Linkset linkset1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shell_linkset_link_deactivate_gui"><a class="anchor" href="#_shell_linkset_link_deactivate_gui"></a>7.1.11.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: De-activate Link using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Links' section in the Linkset Management Unit window and locate the row corresponding to the Link you wish to deactivate.</p>
</li>
<li>
<p>Click on the 'Deactivate' button to deactivate that Link within the Linkset.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_sctp"><a class="anchor" href="#_managing_sctp"></a>7.2. SCTP Management</h3>
<div class="sect3">
<h4 id="_managing_sctp_using_cli"><a class="anchor" href="#_managing_sctp_using_cli"></a>7.2.1. Using CLI</h4>
<div class="paragraph">
<p>You can manage all SCTP related configurations through the Command Line Interface by using the <code>sctp</code> command.
You can create, destroy, start and stop SCTP Servers / Associations by issuing the <code>sctp</code> command with appropriate parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sctp_using_gui"><a class="anchor" href="#_managing_sctp_using_gui"></a>7.2.2. Using GUI</h4>
<div class="paragraph">
<p>The GUI will allow you to manage your SCTP Servers and Associations efficiently using a user-friendly interface.
Open a Web Browser and navigate to <a href="http://localhost:8080/jss7-management-console/" class="bare">http://localhost:8080/jss7-management-console/</a>. Click on the 'SCTP' link in the left panel.
The main panel will display the names of all configured SCTP Management units.
To configure or view the settings of a particular SCTP Management Unit you must click on the name of that unit.
The GUI will look similar to the figure below and is divided into three tabs.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_SCTP_Management.png" alt="GUI SCTP Management">
</div>
<div class="title">Figure 13. GUI - SCTP Management</div>
</div>
<div class="paragraph">
<p>The first tab will display the properties of the SCTP Management unit.
These details displayed here are fetched from the XML descriptor file <em class="path">jboss-beans.xml</em>, which is  located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where  <code class="app">profile_name</code> is the server profile name.
These properties can be modified here in the GUI.
To modify them you must click the pencil, change the value and save.
The GUI will then display the modified values.</p>
</div>
<div class="paragraph">
<p>The other two tabs will allow you to manage and monitor all Servers and Associations within this SCTP Management unit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sctp_properties"><a class="anchor" href="#_sctp_properties"></a>7.2.3. SCTP stack properties</h4>
<div class="sect4">
<h5 id="_sctp_property_connectdelay"><a class="anchor" href="#_sctp_property_connectdelay"></a>7.2.3.1. Connect Delay</h5>
<div class="sect5">
<h6 id="_sctp_property_connectdelay_cli"><a class="anchor" href="#_sctp_property_connectdelay_cli"></a>7.2.3.1.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'Connect Delay (milliseconds)' by issuing the command <code>sctp set connectdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sctp get connectdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp set connectdelay

SYNOPSIS
	sctp set connectdelay &lt;connectdelay&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	If the SCTP Socket is client-side, connectDelay specifies
	the delay time in milliseconds after which a connection
	with the server will be attempted. This delay is necessary
	when there is network disruption and the connection between
	the client and the server breaks, so that the SCTP stack
	doesn't continuously attempt to reconnect.
	Defalut is 30000 milliseconds.

PARAMETERS

	Standard Parameters

	&lt;connectdelay&gt;	-	Connect delay in milliseconds.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sctp set connectdelay 40000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sctp_property_connectdelay_gui"><a class="anchor" href="#_sctp_property_connectdelay_gui"></a>7.2.3.1.2. Using GUI</h6>
<div class="paragraph">
<p>On SCTP management page, click on pencil against the 'Connect Delay' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sctp_property_cc_delaythreshold"><a class="anchor" href="#_sctp_property_cc_delaythreshold"></a>7.2.3.2. Thresholds for outgoing congestion control</h5>
<div class="sect5">
<h6 id="_sctp_property_cc_delaythreshold_cli"><a class="anchor" href="#_sctp_property_cc_delaythreshold_cli"></a>7.2.3.2.1. Using CLI</h6>
<div class="paragraph">
<p>SCTP library measures delays between the time when an outgoing message had been delivered from SS7 stack for sending and and the time when the message was sent to SCTP/TCP channel.
The more time this delay the more we have a congestion level.</p>
</div>
<div class="paragraph">
<p>The delay thresholds when the congestion level is increased to level 1, 2 and 3 is configured by parameters cc_delaythreshold_1, cc_delaythreshold_2 and cc_delaythreshold_3 (in seconds).</p>
</div>
<div class="paragraph">
<p>The delay thresholds when the congestion level is decreased to level 0, 1, and 2 is configured by parameters cc_backtonormal_delaythreshold_1, cc_backtonormal_delaythreshold_2 and cc_backtonormal_delaythreshold_3 (in seconds).</p>
</div>
<div class="paragraph">
<p>You can set the thresholds (in milliseconds) by issuing the commands <code>sctp set cc_delaythreshold_1</code>, <code>sctp set cc_delaythreshold_2</code>, <code>sctp set cc_delaythreshold_3</code>, <code>sctp set cc_backtonormal_delaythreshold_1</code>, <code>sctp set cc_backtonormal_delaythreshold_2</code> or <code>sctp set cc_backtonormal_delaythreshold_3</code> with appropriate parameters as described below.
You can verify this by issuing the commands <code>sctp get cc_delaythreshold_1</code>, <code>sctp get cc_delaythreshold_2</code>, <code>sctp get cc_delaythreshold_3</code>, <code>sctp get cc_backtonormal_delaythreshold_1</code>, <code>sctp get cc_backtonormal_delaythreshold_2</code> or <code>sctp get cc_backtonormal_delaythreshold_3</code>  which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp set cc_delaythreshold_1
	sctp set cc_delaythreshold_2
	sctp set cc_delaythreshold_3
	sctp set cc_backtonormal_delaythreshold_1
	sctp set cc_backtonormal_delaythreshold_2
	sctp set cc_backtonormal_delaythreshold_3

SYNOPSIS
	sctp set cc_delaythreshold_1 &lt;threshold&gt; stackname &lt;stack-name&gt;
	sctp set cc_delaythreshold_2 &lt;threshold&gt; stackname &lt;stack-name&gt;
	sctp set cc_delaythreshold_3 &lt;threshold&gt; stackname &lt;stack-name&gt;
	sctp set cc_backtonormal_delaythreshold_1 &lt;threshold&gt; stackname &lt;stack-name&gt;
	sctp set cc_backtonormal_delaythreshold_2 &lt;threshold&gt; stackname &lt;stack-name&gt;
	sctp set cc_backtonormal_delaythreshold_3 &lt;threshold&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	For outgoing messages congestion control stack needs to have 3 thresholds
	- delays of outgoing messages before it will be sent to IP channel (3
	levels - 1, 2, 3). If a delay time in seconds becomes more then value for
	level 1, 2 or 3, the Association's congestion level becomes to 1, 2 or 3.
	Default values:
	for cc_delaythreshold_1 is 2.5 seconds.
	for cc_delaythreshold_2 is 8   seconds.
	for cc_delaythreshold_3 is 14 seconds.
	for cc_backtonormal_delaythreshold_1 is 1.5 seconds.
	for cc_backtonormal_delaythreshold_2 is 5.5 seconds.
	for cc_backtonormal_delaythreshold_3 is 10  seconds.

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sctp set cc_delaythreshold_1 2.5
	sctp set cc_delaythreshold_2 8
	sctp set cc_delaythreshold_3 14
	sctp set cc_backtonormal_delaythreshold_1 1.5
	sctp set cc_backtonormal_delaythreshold_2 5.5
	sctp set cc_backtonormal_delaythreshold_3 10</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sctp_property_cc_delaythreshold_gui"><a class="anchor" href="#_sctp_property_cc_delaythreshold_gui"></a>7.2.3.2.2. Using GUI</h6>
<div class="paragraph">
<p>On SCTP management page, click on pencil against the 'SCTP congestion Threshold 1' or other needed property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_show_sctp_server"><a class="anchor" href="#_show_sctp_server"></a>7.2.4. View all SCTP (or TCP) Server Instances</h4>
<div class="sect4">
<h5 id="_show_sctp_server_cli"><a class="anchor" href="#_show_sctp_server_cli"></a>7.2.4.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured SCTP (or TCP) Server instances by issuing the command <code>sctp server show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp server show

SYNOPSIS
	sctp server show stackname &lt;stack-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all SCTP Server instances created.
	The information displayed will include the socket type (SCTP or TCP), name of the
	Server, state (whether started=false or true), the IP address and port that the
	Server is bound to. For multi-home SCTP Servers it will display all the
	IP addresses that are configured.

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_show_sctp_server_gui"><a class="anchor" href="#_show_sctp_server_gui"></a>7.2.4.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCTP Management unit and switch to the 'Servers' tab.
Here you can view a list of all the Servers created.
Every correctly configured Server will be displayed in a row and for each Server, the first column will display the name of the Server.
The icon adjacent to the name will be lit 'green' if the server is currently running or if the server is stopped the icon will be lit 'orange'. The second column will indicate the current state of the Server (Started / Stopped), the third column will allow you to Start / Stop the Server and the fourth column will allow you to delete the Server.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_SCTP_Management_Servers.png" alt="GUI SCTP Management Servers">
</div>
<div class="title">Figure 14. GUI - SCTP Management - Servers</div>
</div>
<div class="paragraph">
<p>In the screen above, click on the name of the Server whose details you wish to view.
This will launch the Server Details and display all the configured properties of the selected Server.
The second tab in this view will allow you to view all Associations linked to this particular Server.
You can click on any Association name here to view the configured properties.
You can click on the bread crumbs at the top to return to any of the previous pages you navigated through.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_SCTP_Management_Server_Details.png" alt="GUI SCTP Management Server Details">
</div>
<div class="title">Figure 15. GUI - SCTP Management - Server Details</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_new_sctp_server"><a class="anchor" href="#_create_new_sctp_server"></a>7.2.5. Create a new SCTP (or TCP) Server Instance</h4>
<div class="sect4">
<h5 id="_create_new_sctp_server_cli"><a class="anchor" href="#_create_new_sctp_server_cli"></a>7.2.5.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new SCTP Server by issuing the command <code>sctp server create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp server create

SYNOPSIS
	sctp server create &lt;sever-name&gt; &lt;host-ip&gt; &lt;host-port&gt; &lt;socket-type&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to create a new SCTP Server (or TCP Server) instance.

PARAMETERS

	Standard Parameters

	&lt;server-name&gt;	-	Name of the new Server created. This must be
					unique and takes any String value.

	&lt;host-ip&gt;		-	The host IP address to which the SCTP Server
					socket will bind to.

					For SCTP multi-home support, you can pass multiple
					IP addresses as comma separated values. The Server
					socket will bind to the primary IP address and
					when it becomes unavailable, it will automatically
					fall back to secondary address. If the socket-type
					is TCP, these comma separated values will be
					ignored and the Server socket will always bind to
					the primary IP address (the first value in the
					comma separated list).

	&lt;host-port&gt;		-	The host port to which the underlying SCTP Server
					socket will bind to.

	Optional Parameters

	&lt;socket-type&gt;	-	If you do not specify the socket-type as "TCP",
					by default it will be SCTP.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
						If not passed, the first stack configured in ShellExecutor
						will be used.

EXAMPLES
	sctp server create TestServer 127.0.0.1 2905

	The above command will create a new SCTP Server identified as TestServer and bind
	the Server socket to the IP address 127.0.0.1 and port 2905.

	sctp server create TestServerMulti 10.2.50.145,10.2.50.146 2905

	The above command will create a new SCTP Server identified as TestServerMulti and
	bind the Server socket to the IP address 10.2.50.145 and port 2905. If 10.2.50.145
	is unavailable, the Server will automatically fall back to 10.2.50.146.

	sctp server create TestServerTCP 127.0.0.1 2906 TCP

	The above command will create a new TCP Server identified as TestServerTCP and
	bind the socket to the IP address 127.0.0.1 and port 2906.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_create_new_sctp_server_gui"><a class="anchor" href="#_create_new_sctp_server_gui"></a>7.2.5.2. Using GUI</h5>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_SCTP_Management_Server_Create.png" alt="GUI SCTP Management Server Create">
</div>
<div class="title">Figure 16. GUI - SCTP Management - Server Create</div>
</div>
<div class="olist arabic">
<div class="title">Procedure: Create new SCTP Server (or TCP Server) instance using GUI</div>
<ol class="arabic">
<li>
<p>In the section for Servers in the SCTP Management Unit window, click on the 'Create Server' button.
This will launch a pop-up 'Create Server'.</p>
</li>
<li>
<p>In the 'Create Server' pop-up, add details of the new Server.
You must ensure that you fill in all the mandatory parameters (Name, Host Address, Host Port, IP Type, Max Concurrent Connections). For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new SCTP Server (or TCP Server) will be created with parameters as specified.
If there is an error in creating the Server then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Server' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modify_sctp_server"><a class="anchor" href="#_modify_sctp_server"></a>7.2.6. Modify a SCTP (or TCP) Server Instance</h4>
<div class="sect4">
<h5 id="_modify_sctp_server_cli"><a class="anchor" href="#_modify_sctp_server_cli"></a>7.2.6.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify existed SCTP Server by issuing the command <code>sctp server modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp server modify

SYNOPSIS
	sctp server modify &lt;sever-name&gt; &lt;stack-name&gt; host &lt;host-ip&gt; port &lt;host-port&gt; sockettype &lt;socket-type&gt;
	anonymconnect &lt;accept-anonymous-connections&gt; concurrentconnect &lt;max-concurrent-connections-count&gt;
	extraaddresses &lt;extra-host-addresses&gt;

DESCRIPTION
	This command is used to modify a existed SCTP Server (or TCP Server) instance.

PARAMETERS

	Standard Parameters

	&lt;server-name&gt;	-	Name of the Server which will be modified.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.

	Optional Parameters

	&lt;host-ip&gt;		-	The host IP address to which the SCTP Server
					socket will bind to.

	&lt;host-port&gt;		-	The host port to which the underlying SCTP Server
					socket will bind to.

	&lt;socket-type&gt;	-	Socket-type "TCP"/"SCTP".

	&lt;extra-host-addresses&gt;	-	For SCTP multi-home support, you can pass multiple
					IP addresses as comma separated values. The Server
					socket will bind to the primary IP address and
					when it becomes unavailable, it will automatically
					fall back to secondary address. If the socket-type
					is TCP, these comma separated values will be
					ignored and the Server socket will always bind to
					the primary IP address (host-ip).

	&lt;accept-anonymous-connections&gt;	-	will server check ip and port of the CLient
										true/false

	&lt;max-concurrent-connections-count&gt;	-	set max concurrent connections

EXAMPLES
	sctp server modify TestServer sctpManagement1 port 2905

	The above command will modify a new SCTP Server identified as TestServer
	which belongs to SCTP management with name sctpManagement1 and modified
	the Server socket to the port 2905. Server MUST be stopped.


SEE ALSO
	sctp, sctp server destroy, sctp server start, sctp server stop, sctp server show,
	sctp association create, sctp association destroy, sctp association show</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_destroy_sctp_server"><a class="anchor" href="#_destroy_sctp_server"></a>7.2.7. Delete a SCTP (or TCP) Server Instance</h4>
<div class="sect4">
<h5 id="_destroy_sctp_server_cli"><a class="anchor" href="#_destroy_sctp_server_cli"></a>7.2.7.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete an existing SCTP Server by issuing the command <code>sctp server destroy</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp server destroy

SYNOPSIS
	sctp server destroy &lt;sever-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete an existing SCTP Server instance. You must ensure
	that the Server is stopped prior to deletion.

PARAMETERS

	Standard Parameters

	&lt;server-name&gt;		-	Name of the Server instance to be deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
						If not passed, the first stack configured in ShellExecutor
						will be used.

EXAMPLES
	sctp server destroy TestServer

	The above command will destroy the Server identified by the name TestServer.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_destroy_sctp_server_gui"><a class="anchor" href="#_destroy_sctp_server_gui"></a>7.2.7.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete SCTP Server (or TCP Server) instance using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Servers' section in the SCTP Management Unit window and locate the row corresponding to the Server you wish to delete.</p>
</li>
<li>
<p>You must ensure that the Server is stopped prior to deletion.
If the Server is stopped, the last column for 'Delete' will display a 'x' button in red and will be enabled.
If the Server is currently running, the 'x' button will be disabled.
You can only delete the server if it is stopped.</p>
</li>
<li>
<p>Click on the red 'x' button to delete the corresponding Server instance.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_start_sctp_server"><a class="anchor" href="#_start_sctp_server"></a>7.2.8. Start a SCTP (or TCP) Server Instance</h4>
<div class="sect4">
<h5 id="_start_sctp_server_cli"><a class="anchor" href="#_start_sctp_server_cli"></a>7.2.8.1. Using CLI</h5>
<div class="paragraph">
<p>You can start an existing SCTP Server by issuing the command <code>sctp server start</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp server start

SYNOPSIS
	sctp server start &lt;sever-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to start an existing SCTP Server instance. Upon executing
	this command, the underlying SCTP server socket is bound to the IP: Port
	configured for this Server instance at the time of creation using the
	"sctp server create" command.

PARAMETERS

	Standard Parameters

	&lt;server-name&gt;	-	Name of the Server instance to be started.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
						If not passed, the first stack configured in ShellExecutor
						will be used.

EXAMPLES
	sctp server start TestServer

	The above command will start the previously created Server instance identified
	by the name TestServer and bind the underlying socket to the IP address and port
	configured for TestServer at the time of creation.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_start_sctp_server_gui"><a class="anchor" href="#_start_sctp_server_gui"></a>7.2.8.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Start a SCTP Server (or TCP Server) instance using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Servers' section in the SCTP Management Unit window and locate the row corresponding to the Server you wish to start.</p>
</li>
<li>
<p>Click on the 'Start' button in the actions column to start the corresponding Server instance.
The SCTP Server will be started and the underlying SCTP server socket will be bound to the IP: Port configured for this Server instance at the time of creation.</p>
</li>
<li>
<p>If the Server has started successfully you will find the status indicating the Server as 'Started' and the Server&#8217;s icon will be lit green.
If there is an error and the Server failed to start, you will find details of the error in the Management Console log below.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_stop_sctp_server"><a class="anchor" href="#_stop_sctp_server"></a>7.2.9. Stop a SCTP (or TCP) Server Instance</h4>
<div class="sect4">
<h5 id="_stop_sctp_server_cli"><a class="anchor" href="#_stop_sctp_server_cli"></a>7.2.9.1. Using CLI</h5>
<div class="paragraph">
<p>You can stop a currently running SCTP Server by issuing the command <code>sctp server stop</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp server stop

SYNOPSIS
	sctp server stop &lt;sever-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to stop an existing SCTP Server instance. Upon executing this
	command, the underlying SCTP server socket is closed and all resources are
	released.

PARAMETERS

	Standard Parameters

	&lt;server-name&gt;		-	Name of the Server instance to be stopped.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
						If not passed, the first stack configured in ShellExecutor
						will be used.

EXAMPLES
	sctp server stop TestServer

	The above command will stop the currently running Server instance identified by
	the name TestServer, close the underlying socket and release all resources.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_stop_sctp_server_gui"><a class="anchor" href="#_stop_sctp_server_gui"></a>7.2.9.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Stop a SCTP Server (or TCP Server) instance using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Servers' section in the SCTP Management Unit window and locate the row corresponding to the Server you wish to stop.</p>
</li>
<li>
<p>To stop a Server currently running, click on the 'Stop' button in the actions column of the row corresponding to the Server instance.
When the Server is stopped the underlying SCTP server socket will be closed and all resources are released.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_show_sctp_association"><a class="anchor" href="#_show_sctp_association"></a>7.2.10. View all SCTP (or TCP) Associations</h4>
<div class="sect4">
<h5 id="_show_sctp_association_cli"><a class="anchor" href="#_show_sctp_association_cli"></a>7.2.10.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured SCTP (or TCP) Associations by issuing the command <code>sctp association show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp association show

SYNOPSIS
	sctp association show stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all SCTP Associations created.
	The information displayed will include the Association type (SERVER or CLIENT),
	name of the Association, state (whether started=false or true). For a CLIENT
	Association it will also display the host-ip, host-port and peer-ip, peer-port
	values.

	For multi-home SCTP, it will display all the IP addresses that are configured.
	For a SERVER Association, it will display the configured peer-ip and peer-port
	values.

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
						If not passed, the first stack configured in ShellExecutor
						will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_show_sctp_association_gui"><a class="anchor" href="#_show_sctp_association_gui"></a>7.2.10.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCTP Management unit and switch to the 'Associations' tab.
Here you can view a list of all the Associations created.
Every correctly configured Association will be displayed in a row and for each Association, the first column will display the name of the Association.
The icon adjacent to the name will be lit 'green' if the Association is currently running or if the Association is stopped the icon will be 'orange'. The second column will indicate the current state of the Association (Started / Stopped) and the third column will allow you to delete the Association.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You cannot start or stop a SCTP Association here in this window.
Every SCTP Association must be associated with an ASP (M3UA) and will automatically start or stop when the associated ASP is started or stopped.
For more details on how to associate with an ASP, please refer to <a href="#_managing_m3ua">M3UA Management</a>.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_SCTP_Management_Associations.png" alt="GUI SCTP Management Associations">
</div>
<div class="title">Figure 17. GUI - SCTP Management - Associations</div>
</div>
<div class="paragraph">
<p>In the screen above, click on the name of the Association whose details you wish to view.
This will launch the Association Details and display all the configured properties of the selected Association.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_sctp_association"><a class="anchor" href="#_create_sctp_association"></a>7.2.11. Create a new SCTP (or TCP) Association</h4>
<div class="sect4">
<h5 id="_create_sctp_association_cli"><a class="anchor" href="#_create_sctp_association_cli"></a>7.2.11.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new SCTP Association by issuing the command <code>sctp association create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp association create

SYNOPSIS
	sctp association create &lt;assoc-name&gt; &lt;CLIENT | SERVER&gt; &lt;server-name&gt; &lt;peer-ip&gt;
	&lt;peer-port&gt; &lt;host- ip&gt; &lt;host-port&gt; &lt;socket-type&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to create a new SCTP (Client side or Server side)
	association.

PARAMETERS

	Standard Parameters

	&lt;assoc-name&gt;		-	Name of the new Association created. This must be
					unique and takes any String value.

	&lt;CLIENT | SERVER&gt;	-	Specify if this association is client side or
					server side. If it is client side, it will
					initiate the connection to peer. If it is server
					side, it will wait for peer to initiate the
					connection. The connection request will be
					accepted from peer-ip: peer:port.

	&lt;peer-ip&gt;		-	In a client side association, the server IP
					address to which the client is connecting to.

					In a server side association, the client IP
					address from which connections will be accepted.

	&lt;peer-port&gt;		-	In a client side association, the server Port
					to which the client is connecting to.

					In a server side association, the client port from
					which connections will be accepted.

	&lt;host-ip&gt;		-	In a client side association, the local IP address
					to which the socket will bind to.

					For SCTP multi-home support, you can pass multiple
					IP addresses as comma separated values. The
					Association will bind to the primary IP address
					and when it becomes unavailable, it will
					automatically fall back to secondary address.
					If the socket-type is TCP, these comma separated
					values will be ignored and the Assocation will
					always bind to the primary IP address (the first
					value in the comma separated list). This is
					required only for a client side Association.

					For a server side association, even if you specify
					these values it will be ignored.

	&lt;host-port&gt;		-	In a client side association, the local port to
					which the socket will bind to. This is
					required only for a client side Association.

					For a server side association, even if you specify
					these values it will be ignored.

	&lt;server-name&gt;	-	In a server-side association, the server-name must
					be passed to associate with the Server identified
					by that name. You must ensure that the Server
					identified by server-name has already been created
					using the sctp server create command.

					In a client-side association, this is not required
					and you should not pass this parameter.

	Optional Parameters

	&lt;socket-type&gt;	-	If you do not specify the socket-type as "TCP",
					by default it will be SCTP. If it is a
					SERVER SCTP Association, the socket-type must
					match with the one specified while creating the
					Server.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sctp association create Assoc1 CLIENT
	192.168.56.101 2905 192.168.56.1,192.168.56.1 2905

	The above command will create a new CLIENT SCTP Association identified as Assoc1.
	The client side will initiate the connection. It will bind the
	host-ip 192.168.56.1 and host-port 2905 to the Server IP 192.168.56.101 and
	port 2905.

	sctp association create Assoc2 SERVER TestServer 192.168.56.1 2905

	The above command will create a new SERVER SCTP association with the Server
	identified as TestServer and accept connections from peer whose IP address is
	192.168.56.1 and port 2905.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_create_sctp_association_gui"><a class="anchor" href="#_create_sctp_association_gui"></a>7.2.11.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create new SCTP (or TCP) Association (Client side or Server side)</div>
<ol class="arabic">
<li>
<p>In the section for Associations in the SCTP Management Unit window, click on the 'Create Association' button.
This will launch a pop-up 'Create Association'.</p>
</li>
<li>
<p>In the 'Create Association' pop-up, add details of the new Association.
You must ensure that you fill in all the mandatory parameters: Name, Peer Address, Peer Port, Server Name (for Server side Association), Host Address and Host Port (for Client side Association). For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new SCTP Association (or TCP Association) will be created with parameters as specified.
If there is an error in creating the Association then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Association' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modify_sctp_association"><a class="anchor" href="#_modify_sctp_association"></a>7.2.12. Modify existed SCTP (or TCP) Association</h4>
<div class="sect4">
<h5 id="_modify_sctp_association_cli"><a class="anchor" href="#_modify_sctp_association_cli"></a>7.2.12.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify existed SCTP Association by issuing the command <code>sctp association modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp association modify

SYNOPSIS
	sctp association modify &lt;assoc-name&gt; &lt;stack-name&gt; &lt;CLIENT | SERVER&gt; servername &lt;server-name&gt;
	peerhost &lt;peer-ip&gt; peerport &lt;peer-port&gt; host &lt;host-ip&gt; port &lt;host-port&gt; sockettype &lt;socket-type&gt;
	extraaddresses &lt;extra-host-addresses&gt;

DESCRIPTION
	This command is used to modify a existed SCTP (Client side or Server side)
	association.

PARAMETERS

	Standard Parameters

	&lt;assoc-name&gt;	-	Name of the existed Association which will be modified.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.


	&lt;CLIENT | SERVER&gt;	-	Specify if this association is client side or
					server side.

	Optional Parameters

	&lt;peer-ip&gt;		-	In a client side association, the server IP
					address to which the client is connecting to.

					In a server side association, the client IP
					address from which connections will be accepted.

	&lt;peer-port&gt;		-	In a client side association, the server Port
					to which the client is connecting to.

					In a server side association, the client port from
					which connections will be accepted.

	&lt;host-ip&gt;		-	In a client side association, the local IP address
					to which the socket will bind to.

	&lt;host-port&gt;		-	In a client side association, the local port to
					which the socket will bind to. This is
					required only for a client side Association.

					For a server side association, even if you specify
					these values it will be ignored.

	&lt;server-name&gt;	-	In a server-side association, the server-name.

					In a client-side association, this is not required
					and you should not pass this parameter.

	&lt;socket-type&gt;	-	socket-type "TCP"/"SCTP". If it is a
					SERVER SCTP Association, the socket-type must
					match with the one specified while creating the
					Server.

	&lt;extra-host-addresses&gt; - For SCTP multi-home support, you can pass multiple
					IP addresses as comma separated values. The
					Association will bind to the primary IP address
					and when it becomes unavailable, it will
					automatically fall back to secondary address.
					If the socket-type is TCP, these comma separated
					values will be ignored and the Assocation will
					always bind to the primary IP address (host). This is
					required only for a client side Association.

					For a server side association, even if you specify
					these values it will be ignored.



EXAMPLES
	sctp association modify Assoc1 sctpManagement1 CLIENT port 2476

	The above command will modify a CLIENT SCTP Association identified as Assoc1
	which belongs to SCTP management with name sctpManagement1.

	If an Association is connected stack will drop the connection firstly.
	Then the Association will reconnect itself.

SEE ALSO
	sctp, sctp server create, sctp server destroy, sctp server start,
	sctp server stop, sctp server show, sctp association destroy,
	sctp association show</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_destroy_sctp_association"><a class="anchor" href="#_destroy_sctp_association"></a>7.2.13. Delete a SCTP (or TCP) Association</h4>
<div class="sect4">
<h5 id="_destroy_sctp_association_cli"><a class="anchor" href="#_destroy_sctp_association_cli"></a>7.2.13.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete an existing SCTP Association by issuing the command <code>sctp association destroy</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sctp association destroy

SYNOPSIS
	sctp association destroy &lt;assoc-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete an existing SCTP Association identified by the
	name assoc-name.

PARAMETERS

	Standard Parameters

	&lt;assoc-name&gt;	-	Name of the Association to be deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sctp association destroy Assoc1

	The above command will destroy the Association identified by the name Assoc1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_destroy_sctp_association_gui"><a class="anchor" href="#_destroy_sctp_association_gui"></a>7.2.13.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete SCTP Association (or TCP Association) instance</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Associations' section in the SCTP Management Unit window and locate the row corresponding to the Association you wish to delete.</p>
</li>
<li>
<p>You must ensure that the Association is stopped prior to deletion.
If the Association is stopped, the last column for 'Delete' will display a 'x' button in red.
If the Association is currently running, the 'x' button will be displayed in orange.
You can only delete the Association if it is stopped and the 'x' button is displayed in red.</p>
</li>
<li>
<p>Click on the red 'x' button to delete the corresponding Association instance.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_m3ua"><a class="anchor" href="#_managing_m3ua"></a>7.3. M3UA Management</h3>
<div class="sect3">
<h4 id="_managing_m3ua_using_cli"><a class="anchor" href="#_managing_m3ua_using_cli"></a>7.3.1. Using CLI</h4>
<div class="paragraph">
<p>You can manage all M3UA Application Server, Application Server Process and Route related configurations through the Command Line Interface by using the <code>m3ua</code> command.
You can create, destroy, start and stop ASPs by issuing the <code>m3ua asp</code> command with appropriate parameters.
You can create, destroy, add and remove AS by issuing the <code>m3ua as</code> command with appropriate parameters.
You can add and remove M3UA Routes by issuing the <code>m3ua route</code> command with appropriate parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_managing_m3ua_using_gui"><a class="anchor" href="#_managing_m3ua_using_gui"></a>7.3.2. Using GUI</h4>
<div class="paragraph">
<p>The GUI will allow you to manage your M3UA configurations efficiently using a user-friendly interface.
Open a Web Browser and navigate to <a href="http://localhost:8080/jss7-management-console/" class="bare">http://localhost:8080/jss7-management-console/</a>. Click on the 'M3UA' link in the left panel.
The main panel will display the names of all configured M3UA Management units.
To configure or view the settings of a particular M3UA Management Unit you must click on the name of that unit.
The GUI will look similar to the figure below and is divided into four tabs.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_M3UA_Management.png" alt="GUI M3UA Management">
</div>
<div class="title">Figure 18. GUI - M3UA Management</div>
</div>
<div class="paragraph">
<p>The first tab will display the properties of the M3UA Management unit.
These details displayed here are fetched from the XML descriptor file <em class="path">jboss-beans.xml</em>, which is  located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where  <code class="app">profile_name</code> is the server profile name.
These properties can be modified here in the GUI.
To modify them you must click the pencil, change value and save.
The GUI will then display the modified values.</p>
</div>
<div class="paragraph">
<p>The other three tabs will allow you to manage and monitor all Servers, ASPs and Routers within this M3UA Management unit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_m3ua_properties"><a class="anchor" href="#_m3ua_properties"></a>7.3.3. M3UA stack properties</h4>
<div class="sect4">
<h5 id="_m3ua_property_maxsequencenumber"><a class="anchor" href="#_m3ua_property_maxsequencenumber"></a>7.3.3.1. Maximum Sequence Number</h5>
<div class="paragraph">
<p>You can modify the settings for the parameter 'maxsequencenumber' only when the M3UA Stack is not running.
In addition, this parameter cannot be modified through the CLI or GUI.
You will have to invoke the setter function directly from the source code.</p>
</div>
<div class="paragraph">
<p>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below) to the XML descriptor file <em class="path">jboss-beans.xml</em>, which is located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where <code class="app">profile_name</code> is the server profile name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*Add property for the parameter 'maxsequencenumber' to jboss-beans.xml file and specify the value*/
&lt;property name="maxSequenceNumber"&gt;128&lt;/property&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.</p>
</div>
<div class="sect5">
<h6 id="_m3ua_property_maxsequencenumber_cli"><a class="anchor" href="#_m3ua_property_maxsequencenumber_cli"></a>7.3.3.1.1. Using CLI</h6>
<div class="paragraph">
<p>You can retrieve the current settings of the parameter 'maxsequencenumber' by issuing the command <code>m3ua get maxsequencenumber</code>.
However as explained above, you cannot modify the settings through the CLI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua get maxsequencenumber

SYNOPSIS
	m3ua get maxsequencenumber stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to retrieve the current settings of the parameter
	'maxsequencenumber'. The 'maxsequencenumber' parameter is used to specify
	the maximum sequence number used for load-balancing algorithm.

	Sequence number or Signalling Link Selection (SLS) is used for load-balancing
	between ASPs in AS and also between various AS for the same point-code.
	The parameter 'maxsequencenumber' controls the maximum SLS that should be
	used for this. It is safe to leave it at 256.

	The settings can be modified only when the M3UA Stack is not running.
	To modify this parameter you must invoke the setter function
	directly from the code or if you are using the JBoss AS, you can add a
	property to the XML descriptor file jboss-beans.xml. You cannot change the
	settings through the CLI.</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_m3ua_property_maxsequencenumber_gui"><a class="anchor" href="#_m3ua_property_maxsequencenumber_gui"></a>7.3.3.1.2. Using GUI</h6>
<div class="paragraph">
<p>In the M3UA management page, you can view the current settings of the 'Max Sequence Number' property.
But as explained above, you cannot change the settings in the GUI.
For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_m3ua_property_maxasforroute"><a class="anchor" href="#_m3ua_property_maxasforroute"></a>7.3.3.2. Maximum AS for route</h5>
<div class="paragraph">
<p>You can modify the settings for the parameter 'maxasforroute' only when the M3UA Stack is not running.
In addition, this parameter cannot be modified through the CLI or GUI.
You will have to invoke the setter function directly from the source code.</p>
</div>
<div class="paragraph">
<p>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below) to the XML descriptor file <em class="path">jboss-beans.xml</em>, which is located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where <code class="app">profile_name</code> is the server profile name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*Add property for the parameter 'maxasforroute' to jboss-beans.xml file and specify the value*/
&lt;property name="maxAsForRoute"&gt;4&lt;/property&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.</p>
</div>
<div class="sect5">
<h6 id="_m3ua_property_maxasforroute_cli"><a class="anchor" href="#_m3ua_property_maxasforroute_cli"></a>7.3.3.2.1. Using CLI</h6>
<div class="paragraph">
<p>You can retrieve the current settings of the parameter 'maxasforroute' by issuing the command <code>m3ua get maxasforroute</code>.
However as explained above, you cannot modify the settings through the CLI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua get maxasforroute

SYNOPSIS
	m3ua get maxasforroute stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to retrieve the current settings of the parameter
	'maxasforroute'. The 'maxasforroute' parameter is used to specify
	the maximum routes for destination point code.

	Every destination point code should be configured in M3UA with the
	corresponding AS. The parameter 'maxasforroute' controls the
	maximum number of AS that can be used to route the message to the
	same Destination Point Code.

	It is better to always maintain this parameter as an even number for better
	load-sharing and a maximum of 2 is standard and widely accepted. You should
	not change this value if there is at least one route defined, else it will
	throw Exception for that route. You have to delete all the routes,
	change this property and redefine routes.

	The settings can be modified only when the M3UA Stack is not running.
	To modify this parameter you must invoke the setter function
	directly from the code or if you are using the JBoss AS, you can add a
	property to the XML descriptor file jboss-beans.xml. You cannot change the
	settings through the CLI.</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_m3ua_property_maxasforroute_gui"><a class="anchor" href="#_m3ua_property_maxasforroute_gui"></a>7.3.3.2.2. Using GUI</h6>
<div class="paragraph">
<p>In the M3UA management page, you can view the current settings of the 'Max As for Route' property.
But as explained above, you cannot change the settings in the GUI.
For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_m3ua_property_heartbeattime"><a class="anchor" href="#_m3ua_property_heartbeattime"></a>7.3.3.3. Heart Beat time</h5>
<div class="sect5">
<h6 id="_m3ua_property_heartbeattime_cli"><a class="anchor" href="#_m3ua_property_heartbeattime_cli"></a>7.3.3.3.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'heartbeattime' by issuing the command <code>m3ua set heartbeattime</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>m3ua get heartbeattime</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua set heartbeattime

SYNOPSIS
	m3ua set heartbeattime &lt;heartbeattime&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Each ASP can send HEART_BEAT to peer to determine the availability of
	link. If there is no traffic M3UA will initiate heart beat every
	'heartbeatTime' milli seconds. If 3 consecutive HEART_BEAT are
	missed, stack will close and re-initiate connection.

PARAMETERS

	Standard Parameters

	&lt;heartbeattime&gt;	-	Heart Beat time in milliseconds.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua set heartbeattime 30000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_m3ua_property_heartbeattime_gui"><a class="anchor" href="#_m3ua_property_heartbeattime_gui"></a>7.3.3.3.2. Using GUI</h6>
<div class="paragraph">
<p>On M3UA management page, click on pencil against the 'heartbeatTime' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_m3ua_property_statisticsenabled"><a class="anchor" href="#_m3ua_property_statisticsenabled"></a>7.3.3.4. Enable M3UA statistic</h5>
<div class="sect5">
<h6 id="_m3ua_property_statisticsenabled_cli"><a class="anchor" href="#_m3ua_property_statisticsenabled_cli"></a>7.3.3.4.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'statisticsenabled' by issuing the command <code>m3ua set statisticsenabled</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>m3ua get statisticsenabled</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua set statisticsenabled

SYNOPSIS
	m3ua set statisticsenabled &lt;statisticsenabled&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	You can enable/disable statistic via this property.

PARAMETERS

	Standard Parameters

	&lt;statisticsenabled&gt;	-	true/false.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua set statisticsenabled true</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_m3ua_property_statisticsenabled_gui"><a class="anchor" href="#_m3ua_property_statisticsenabled_gui"></a>7.3.3.4.2. Using GUI</h6>
<div class="paragraph">
<p>On M3UA management page, click on pencil against the 'statisticsEnabled' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_m3ua_property_routingkeymanagementenabled"><a class="anchor" href="#_m3ua_property_routingkeymanagementenabled"></a>7.3.3.5. Enable routing key management</h5>
<div class="sect5">
<h6 id="_m3ua_property_routingkeymanagementenabled_cli"><a class="anchor" href="#_m3ua_property_routingkeymanagementenabled_cli"></a>7.3.3.5.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'routingkeymanagementenabled' by issuing the command <code>m3ua set routingkeymanagementenabled</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>m3ua get routingkeymanagementenabled</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua set routingkeymanagementenabled

SYNOPSIS
	m3ua set routingkeymanagementenabled &lt;routingkeymanagementenabled&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	You can enable/disable routing key management via this property.

PARAMETERS

	Standard Parameters

	&lt;routingkeymanagementenabled&gt;	-	true/false.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua set routingkeymanagementenabled true</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_m3ua_property_routingkeymanagementenabled_gui"><a class="anchor" href="#_m3ua_property_routingkeymanagementenabled_gui"></a>7.3.3.5.2. Using GUI</h6>
<div class="paragraph">
<p>On M3UA management page, click on pencil against the 'routingkeymanagementenabled' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_m3ua_property_deliverymessagethreadcount"><a class="anchor" href="#_m3ua_property_deliverymessagethreadcount"></a>7.3.3.6. Threads count for processing of incoming messages</h5>
<div class="paragraph">
<p>You can modify the settings for the parameter 'deliverymessagethreadcount' only when the M3UA Stack is not running.
In addition, this parameter cannot be modified through the CLI or GUI.
You will have to invoke the setter function directly from the source code.</p>
</div>
<div class="paragraph">
<p>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below) to the XML descriptor file <em class="path">jboss-beans.xml</em>, which is located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where <code class="app">profile_name</code> is the server profile name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*Add property for the parameter 'deliverymessagethreadcount' to jboss-beans.xml file and specify the value*/
&lt;property name="deliveryTransferMessageThreadCount"&gt;4&lt;/property&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.</p>
</div>
<div class="sect5">
<h6 id="_m3ua_property_deliverymessagethreadcount_cli"><a class="anchor" href="#_m3ua_property_deliverymessagethreadcount_cli"></a>7.3.3.6.1. Using CLI</h6>
<div class="paragraph">
<p>You can retrieve the current settings of the parameter 'deliverymessagethreadcount' by issuing the command <code>m3ua get deliverymessagethreadcount</code>.
However as explained above, you cannot modify the settings through the CLI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua get deliverymessagethreadcount

SYNOPSIS
	m3ua get deliverymessagethreadcount

DESCRIPTION
	Returns the count of threads that will be used for message delivering
	to Mtp3UserPartListener's. Messages from SS7 peers (incoming messages)
	are processed by these threads. Messages to SS7 peers (outgoing messages)
	are processed by threads from user applications (not these threads).

	For single thread model this value should be equal 1.</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_m3ua_property_deliverymessagethreadcount_gui"><a class="anchor" href="#_m3ua_property_deliverymessagethreadcount_gui"></a>7.3.3.6.2. Using GUI</h6>
<div class="paragraph">
<p>In the M3UA management page, you can view the current settings of the 'DeliveryMessageThreadCount' property.
But as explained above, you cannot change the settings in the GUI.
For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_m3ua_property_routinglabelformat"><a class="anchor" href="#_m3ua_property_routinglabelformat"></a>7.3.3.7. MTP3 RoutingLabel Format</h5>
<div class="paragraph">
<p>You can modify the settings for the parameter 'routinglabelformat' only when the M3UA Stack is not running.
In addition, this parameter cannot be modified through the CLI or GUI.
You will have to invoke the setter function directly from the source code.</p>
</div>
<div class="paragraph">
<p>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below) to the XML descriptor file <em class="path">jboss-beans.xml</em>, which is located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where <code class="app">profile_name</code>		 and also an extra separate bean - RoutingLabelFormat (to which we refer from ). is the server profile name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*Extra bean for RoutingLabelFormat Enum*/
	&lt;bean name="RoutingLabelFormat" class="org.restcomm.protocols.ss7.mtp.RoutingLabelFormat"&gt;
		&lt;constructor factoryClass="org.restcomm.protocols.ss7.mtp.RoutingLabelFormat"
			factoryMethod="getInstance"&gt;
			&lt;parameter&gt;ITU&lt;/parameter&gt;
		&lt;/constructor&gt;
	&lt;/bean&gt;

/*Add property for the parameter 'routinglabelformat' to jboss-beans.xml file and specify the value into M3UAManagementImpl mbean*/
		&lt;property name="routingLabelFormat"&gt;
			&lt;inject bean="RoutingLabelFormat" /&gt;
		&lt;/property&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.</p>
</div>
<div class="sect5">
<h6 id="_m3ua_property_routinglabelformat_cli"><a class="anchor" href="#_m3ua_property_routinglabelformat_cli"></a>7.3.3.7.1. Using CLI</h6>
<div class="paragraph">
<p>You can retrieve the current settings of the parameter 'routinglabelformat' by issuing the command <code>m3ua get routinglabelformat</code>.
However as explained above, you cannot modify the settings through the CLI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua get routinglabelformat

SYNOPSIS
	m3ua get routinglabelformat stackname &lt;stack-name&gt;

DESCRIPTION
	Returns RoutingLabelFormat option. Possible values are: ITU, ANSI_Sls8Bit,
	ANSI_Sls5Bit, Japan_TTC_DDI, Japan_NTT, China.</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_m3ua_property_routinglabelformat_gui"><a class="anchor" href="#_m3ua_property_routinglabelformat_gui"></a>7.3.3.7.2. Using GUI</h6>
<div class="paragraph">
<p>In the M3UA management page, you can view the current settings of the 'RoutingLabelFormat' property.
But as explained above, you cannot change the settings in the GUI.
For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_m3ua_property_uselsbforlinksetselection"><a class="anchor" href="#_m3ua_property_uselsbforlinksetselection"></a>7.3.3.8. Bit of SLS for loadbalancing between Linksets</h5>
<div class="sect5">
<h6 id="_m3ua_property_uselsbforlinksetselection_cli"><a class="anchor" href="#_m3ua_property_uselsbforlinksetselection_cli"></a>7.3.3.8.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'uselsbforlinksetselection' by issuing the command <code>m3ua set uselsbforlinksetselection</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>m3ua get uselsbforlinksetselection</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua set uselsbforlinksetselection

SYNOPSIS
	m3ua set uselsbforlinksetselection &lt;true | false&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Possible values are false or true. Sets which bit of SLS will be used
	for loadbalancing between Linkset. True value means lowest bit of SLS
	is used for loadbalancing between Linkset, false value means highest bit
	of SLS is used.

PARAMETERS

	Standard Parameters

	&lt;true | false&gt;	-	True value means lowest bit of SLS is used for
						loadbalancing between Linkset, false value means
						highest bit of SLS is used. Default value is false.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua set uselsbforlinksetselection false</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_m3ua_property_uselsbforlinksetselection_gui"><a class="anchor" href="#_m3ua_property_uselsbforlinksetselection_gui"></a>7.3.3.8.2. Using GUI</h6>
<div class="paragraph">
<p>On M3UA management page, click on pencil against the 'Use the lowest bit for link set selection' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_show_m3ua_asp"><a class="anchor" href="#_managing_show_m3ua_asp"></a>7.3.4. View all M3UA Application Server Processes</h4>
<div class="sect4">
<h5 id="_managing_show_m3ua_asp_cli"><a class="anchor" href="#_managing_show_m3ua_asp_cli"></a>7.3.4.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured M3UA Application Server Processes by issuing the command <code>m3ua asp show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua asp show

SYNOPSIS
	m3ua asp show stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all configured Application Server
	Processes. The information displayed will include the name, the SCTP Association
	name and if it is started or stopped.

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_show_m3ua_asp_gui"><a class="anchor" href="#_managing_show_m3ua_asp_gui"></a>7.3.4.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific M3UA Management unit and switch to the 'AspFactories' tab.
Here you can view a list of all the ASPs created.
Every correctly configured ASP will be displayed in a row and for each ASP, the first column will display the name of the ASP.
The icon adjacent to the name will be lit 'green' if the ASP is currently running or if the ASP is stopped the icon will be lit 'orange'. The second column will indicate the current state of the ASP (true / false), the third column will allow you to Start / Stop the ASP and the fourth column will allow you to delete the ASP.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_M3UA_Management_AspFactories.png" alt="GUI M3UA Management AspFactories">
</div>
<div class="title">Figure 19. GUI - M3UA Management - AspFactories</div>
</div>
<div class="paragraph">
<p>In the screen above, click on the name of the ASP whose details you wish to view.
This will launch the ASP Details and display all the configured properties of the selected ASP.
The second tab in this view will allow you to view all connected Application Servers.
You can click on the bread crumbs at the top to return to any of the previous pages you navigated through.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_M3UA_Management_AspDetails.png" alt="GUI M3UA Management AspDetails">
</div>
<div class="title">Figure 20. GUI - M3UA Management - ASP Details</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_create_m3ua_asp"><a class="anchor" href="#_managing_create_m3ua_asp"></a>7.3.5. Create a new M3UA Application Server Process</h4>
<div class="sect4">
<h5 id="_managing_create_m3ua_asp_cli"><a class="anchor" href="#_managing_create_m3ua_asp_cli"></a>7.3.5.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new M3UA ASP by issuing the command <code>m3ua asp create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua asp create

SYNOPSIS
	m3ua asp create &lt;asp-name&gt; &lt;sctp-association&gt; aspid &lt;aspid&gt; heartbeat &lt;true|false&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to create a new Application Server Process.

PARAMETERS

	Standard Parameters

	&lt;asp-name&gt;			-	Name of the new Application Server Process
						created. This must be unique and takes any
						String value.

	&lt;sctp-association&gt;		-	Name of the SCTP Association

	Optional Parameters

	&lt;aspid&gt;				-	Identifier for this newly created
						Application Server Process. If this is
						not passed, next available aspid will be
						used.

	heartbeat &lt;true|false&gt;		-	If this parameter is enabled (value set to
						true), then heartbeat mechanism is enabled
						between M3UA peers. When this is enabled,
						it sends a Heartbeat message every 10
						seconds. If there is no response for the
						third heartbeat then it assumes that the
						underlying network is dead. So it closes
						the connection and attempts to connect
						again. The M3UA peers are brought back to
						the same state as they were prior to
						dying.

						This is an optional parameter and if
						unspecified, heartbeat mechanism is
						disabled.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					    If not passed, the first stack configured in ShellExecutor
					    will be used.

EXAMPLES
	m3ua asp create ASP1 Assoc1 aspid 12 heartbeat true

	The above command will create a new M3UA Application Server Process with name ASP1
	and id 12. Heartbeat mechanism is enabled.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_create_m3ua_asp_gui"><a class="anchor" href="#_managing_create_m3ua_asp_gui"></a>7.3.5.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new Application Server Process using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the tab 'AspFactories' in the M3UA Management Unit window and click on the 'Create ASP' button.
This will launch a pop-up 'Create AspFactory'.</p>
</li>
<li>
<p>In the 'Create ASP' page, add details of the new ASP.
You must ensure that you fill in all the mandatory parameters (Name, SCTP Association Name).  For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.
You must ensure that a correctly configured SCTP Association is created and available prior to creating a new ASP.
When the ASP is started or stopped, this corresponding SCTP Association will start / stop automatically.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new ASP will be created with parameters as specified.
If there is an error in creating the ASP then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Server' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_destroy_m3ua_asp"><a class="anchor" href="#_managing_destroy_m3ua_asp"></a>7.3.6. Delete an Application Server Process</h4>
<div class="sect4">
<h5 id="_managing_destroy_m3ua_asp_cli"><a class="anchor" href="#_managing_destroy_m3ua_asp_cli"></a>7.3.6.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete an existing M3UA ASP by issuing the command <code>m3ua asp destroy</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua asp destroy

SYNOPSIS
	m3ua asp destroy &lt;asp-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete an existing M3UA Application Server Process
	identified by the name 'asp-name'. You must ensure that the ASP is stopped prior
	to issuing the command.

PARAMETERS

	Standard Parameters

	&lt;asp-name&gt;		-	Name of the ASP to be deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua asp destroy ASP1

	The above command will destroy the ASP identified by the name ASP1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_destroy_m3ua_asp_gui"><a class="anchor" href="#_managing_destroy_m3ua_asp_gui"></a>7.3.6.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete an Application Server Process using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'ASPs' section in the M3UA Management Unit window and locate the row corresponding to the ASP you wish to delete.</p>
</li>
<li>
<p>You must ensure that the ASP is stopped and unassigned from AS prior to deletion.
If the ASP is stopped, the last column for 'Delete' will display a 'x' button in red and will be enabled.
If the Server is currently running, the 'x' button will be disabled.</p>
</li>
<li>
<p>Click on the red 'x' button to delete the corresponding ASP.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_start_m3ua_asp"><a class="anchor" href="#_managing_start_m3ua_asp"></a>7.3.7. Start an Application Server Process</h4>
<div class="sect4">
<h5 id="_managing_start_m3ua_asp_cli"><a class="anchor" href="#_managing_start_m3ua_asp_cli"></a>7.3.7.1. Using CLI</h5>
<div class="paragraph">
<p>You can start an existing ASP by issuing the command <code>m3ua asp start</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua asp start

SYNOPSIS
	m3ua asp start &lt;asp-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to start an existing ASP. You must ensure that the ASP is
	assigned to at least one AS prior to starting it.

PARAMETERS

	Standard Parameters

	&lt;asp-name&gt;		-	Name of the ASP to be started.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua asp start ASP1

	The above command will start the ASP identified by the name ASP1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_start_m3ua_asp_gui"><a class="anchor" href="#_managing_start_m3ua_asp_gui"></a>7.3.7.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Start an Application Server Process</div>
<ol class="arabic">
<li>
<p>Navigate to the 'AspFactories' tab in the M3UA Management Unit window and locate the row corresponding to the ASP you wish to start.</p>
</li>
<li>
<p>Click on the 'Start' button in the actions column to start the corresponding ASP.
You must ensure that the ASP is assigned to at least one AS prior to starting it.</p>
</li>
<li>
<p>If the ASP has started successfully you will find the status indicating the ASP running as 'true' and the icon will be lit green.
If there is an error and the ASP failed to start, you will find details of the error in the Management Console log below.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_stop_m3ua_asp"><a class="anchor" href="#_managing_stop_m3ua_asp"></a>7.3.8. Stop an Application Server Process</h4>
<div class="sect4">
<h5 id="_managing_stop_m3ua_asp_cli"><a class="anchor" href="#_managing_stop_m3ua_asp_cli"></a>7.3.8.1. Using CLI</h5>
<div class="paragraph">
<p>You can stop a currently running ASP by issuing the command <code>m3ua asp stop</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua asp stop

SYNOPSIS
	m3ua asp stop &lt;asp-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to stop a currently running ASP.

PARAMETERS

	Standard Parameters

	&lt;asp-name&gt;		-	Name of the ASP to be stopped.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua asp stop ASP1

	The above command will stop the ASP identified by the name ASP1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_stop_m3ua_asp_gui"><a class="anchor" href="#_managing_stop_m3ua_asp_gui"></a>7.3.8.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Stop an Application Server Process</div>
<ol class="arabic">
<li>
<p>Navigate to the 'AspFactories' section in the M3UA Management Unit window and locate the row corresponding to the ASP you wish to stop.</p>
</li>
<li>
<p>Click on the 'Stop' button in the actions column to stop the corresponding ASP.</p>
</li>
<li>
<p>If the ASP has stopped successfully you will find the status indicating the ASP running as 'false' and the icon will be lit orange.
If there is an error and the ASP failed to stop, you will find details of the error in the Management Console log below.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_m3ua_as_show"><a class="anchor" href="#_managing_m3ua_as_show"></a>7.3.9. View all M3UA Application Servers</h4>
<div class="sect4">
<h5 id="_managing_m3ua_as_show_cli"><a class="anchor" href="#_managing_m3ua_as_show_cli"></a>7.3.9.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured M3UA Application Servers by issuing the command <code>m3ua as show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua as show

SYNOPSIS
	m3ua as show stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all configured Application Servers.
	The information displayed will include the configured
	functionality (AS or IPSP or SGW), mode (SE or DE), IPSP type (if applicable),
	routing context, traffic mode and network appearance values.

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_m3ua_as_show_gui"><a class="anchor" href="#_managing_m3ua_as_show_gui"></a>7.3.9.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific M3UA Management unit and switch to the 'ApplicationServers' tab.
Here you can view a list of all the ASs created.
Every correctly configured AS will be displayed in a row and for each AS, the first column will display the name of the AS.
The icon adjacent to the name will be lit 'green' if the AS is currently running or if the AS is stopped the icon will be lit 'orange'. The second column will indicate the current state of the AS (defined / undefined), the third column will allow you to delete the AS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_M3UA_Management_ApplicationServers.png" alt="GUI M3UA Management ApplicationServers">
</div>
<div class="title">Figure 21. GUI - M3UA Management - ApplicationServers</div>
</div>
<div class="paragraph">
<p>In the screen above, click on the name of the AS whose details you wish to view.
This will launch the AS Details and display all the configured properties of the selected AS.
The second tab in this view will allow you to view the details of the connected ASP.
You can click on the bread crumbs at the top to return to any of the previous pages you navigated through.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_M3UA_Management_ApplicationServer_Details.png" alt="GUI M3UA Management ApplicationServer Details">
</div>
<div class="title">Figure 22. GUI - M3UA Management - AS Details</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_show_m3ua_as_create"><a class="anchor" href="#_managing_show_m3ua_as_create"></a>7.3.10. Create a new M3UA AS</h4>
<div class="sect4">
<h5 id="_managing_show_m3ua_as_create_cli"><a class="anchor" href="#_managing_show_m3ua_as_create_cli"></a>7.3.10.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new M3UA AS by issuing the command <code>m3ua as create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua as create

SYNOPSIS
	m3ua as create &lt;as-name&gt; &lt;AS | SGW | IPSP&gt; mode &lt;SE | DE&gt;
	ipspType &lt;client | server&gt; rc &lt;routing- context&gt; traffic-mode &lt;traffic mode&gt;
	min-asp &lt;minimum asp active for TrafficModeType.Loadshare&gt;
	network-appearance &lt;network appearance value&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to create a new Application Server.

PARAMETERS

	Standard Parameters

	&lt;as-name&gt;		-	Name of the new Server created. This must be
					unique and takes any String value.

	&lt;AS | SGW | IPSP&gt;	-	The type of the new Server is specified using this
					parameter. The three possible values are
					AS (Application Server), SGW (Signaling Gateway)
					and IPSP.

	&lt;SE | DE&gt;		-	You must specify if Single Exchange or
					Double Exchange of ASPSM (ASP State Maintenance)
					and ASPTM (ASP Traffic Maintenance) messages
					should be performed.

	&lt;client | server&gt;	-	This is required if the newly created AS is of
					type IPSP. You must specify is if it is of type
					Client or Server.

	Optional Parameters

	&lt;routing-context&gt;	-	This refers to the Routing Context configured for
					M3UA Stack on SGW. This parameter is optional.

					However for an ASP (Application Server Process)
					assigned to this AS to be configured to process
					signaling traffic related to more than one AS over
					a single SCTP Association, it is mandatory to
					specify a routing-context for the AS. If an ASP is
					configured to always process signaling traffic
					from one AS, irrespective of whether the received
					messages have routing context set or not, it will
					always be delivered to AS for further processing.

					However if an ASP is configured to process
					signaling traffic related to more than one AS over
					a single SCTP Association and if a signaling
					message is received without RC, then the ASP will
					drop the message and send back an Error message.
					A respective log4j error will also be logged.

	&lt;traffic-mode&gt;		-	You may choose to specify the traffic mode for
					ASPs. At the moment jSS7 M3UA supports only
					2 modes: loadshare and override. Broadcast mode is
					not supported.

					This is an optional parameter and if not specified
					the default mode is 'loadshare'.

	&lt;min-asp&gt;			-	You may choose to specify the minumum asp
					active for traffic mode 'loadshare' before the
					payload starts flowing.

					This is an optional parameter and if not specified
					the default value is 1. Also if traffic-mode is not
					'loadshare' setting this value has no effect.

	&lt;network-appearance&gt;	-	This is a M3UA local reference (typically an
					integer) shared by SG and AS. This value together
					with a Signaling Point Code, uniquely identifies a
					SS7 node by indicating the specific SS7 network to
					which it belongs. It can be used to distinguish
					between signalling traffic, associated with
					different networks, being sent between the SG and
					the ASP over a common SCTP association.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua as create AS1 IPSP mode DE ipspType server rc 1 traffic-mode loadshare

	The above command will create a new M3UA Application Server identified as AS1,
	of type IPSP (Server), Double Exchange mode. The Routing Context is 1 and
	traffic-mode is 'loadshare'.

	m3ua as create AS2 AS mode SE rc 100 traffic-mode loadshare 2 network-appearance 12

	The above command will create a new M3UA Application Server identified as AS2,
	of type AS, Single Exchange mode. The Routing Context is 100,
	traffic-mode is 'loadshare' and minimun asp to be active for payload transfer is 2.
	The network-appearance value is 12.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_show_m3ua_as_create_gui"><a class="anchor" href="#_managing_show_m3ua_as_create_gui"></a>7.3.10.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new M3UA Application Server using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the tab 'ApplicationServers' in the M3UA Management Unit window and click on the 'Create AS' button.
This will launch a pop-up 'Create AS'.</p>
</li>
<li>
<p>In the 'Create Application Server' pop-up, add details of the new AS.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new AS will be created with parameters as specified.
If there is an error in creating the AS then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Application Server' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_show_m3ua_as_destroy"><a class="anchor" href="#_managing_show_m3ua_as_destroy"></a>7.3.11. Delete a M3UA AS</h4>
<div class="sect4">
<h5 id="_managing_show_m3ua_as_destroy_cli"><a class="anchor" href="#_managing_show_m3ua_as_destroy_cli"></a>7.3.11.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new M3UA AS by issuing the command <code>m3ua as create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua as destroy

SYNOPSIS
	m3ua as destroy &lt;as-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete an existing M3UA Application Server instance
	identified by the name 'as-name'. You must ensure that all ASPs are unassigned and
	the AS state is 'INACTIVE' prior to destroying the AS.

PARAMETERS

	Standard Parameters

	&lt;as-name&gt;		-	Name of the AS instance to be deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua as destroy AS1

	The above command will destroy the AS identified by the name AS1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_show_m3ua_as_destroy_gui"><a class="anchor" href="#_managing_show_m3ua_as_destroy_gui"></a>7.3.11.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a M3UA Application Server using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'ApplicationServers' tab in the M3UA Management Unit window and locate the row corresponding to the AS you wish to delete.</p>
</li>
<li>
<p>You must ensure that all ASPs are unassigned from this AS and the current state of the AS is 'INACTIVE' (displayed as 'undefined') prior to destroying the AS.
If the AS is inactive, the last column for 'Delete' will display a 'x' button in red and will be enabled.
You can only delete the AS if it is inactive.</p>
</li>
<li>
<p>Click on the red 'x' button to delete the corresponding AS.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_show_m3ua_as_add"><a class="anchor" href="#_managing_show_m3ua_as_add"></a>7.3.12. Assign an ASP to an AS</h4>
<div class="sect4">
<h5 id="_managing_show_m3ua_as_add_cli"><a class="anchor" href="#_managing_show_m3ua_as_add_cli"></a>7.3.12.1. Using CLI</h5>
<div class="paragraph">
<p>You can assign an ASP to an AS by issuing the command <code>m3ua as add</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua as add

SYNOPSIS
	m3ua as add &lt;as-name&gt; &lt;asp-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to assign an Application Server Process to an Application
	Server. The AS and ASP must both be created prior to executing this command.

	You can configure an ASP to process signaling traffic related to more than one AS,
	over a single SCTP Association. However you must ensure that all the Application
	Servers that share the ASP are configured with a valid Routing Context value.

PARAMETERS

	Standard Parameters

	&lt;as-name&gt;		-	Name of the AS to which this ASP is being assigned.

	&lt;asp-name&gt;		-	Name of the ASP that is being assigned to the AS.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua as add AS1 ASP1
	- The above command will assign ASP1 to AS1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_show_m3ua_as_add_gui"><a class="anchor" href="#_managing_show_m3ua_as_add_gui"></a>7.3.12.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Assign an ASP to an AS using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'ApplicationServers' tab in the M3UA Management Unit window, locate the row corresponding to the AS you wish to assign an ASP and click on the name of the AS.
This will launch the AS details page where all the properties of the AS will be displayed.
Switch to the second tab in this view called "Application Server Processes". As shown in the figure below, you will find a list of all currently assigned ASPs to this selected AS.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">GUI - M3UA Management - Assign ASP to an AS</div>
<ol class="arabic">
<li>
<p>image::images/GUI_M3UA_Management_ASP_Assign.png[]</p>
</li>
<li>
<p>Click on the 'Add ASP' button at the bottom.
This will launch a pop-up named 'Add ASP' where all available ASPs will be listed in a drop down box.</p>
</li>
<li>
<p>Click on the 'Create' button to add the selected ASP to this AS.
The ASP will be assigned to this AS and will be displayed in the ASP list for this AS.</p>
</li>
<li>
<p>You can configure an ASP to process signaling traffic related to more than one AS, over a single SCTP Association.
However you must ensure that all the Application Servers that share the ASP are configured with a valid Routing Context value.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_show_m3ua_as_remove"><a class="anchor" href="#_managing_show_m3ua_as_remove"></a>7.3.13. Unassign an ASP from an AS</h4>
<div class="sect4">
<h5 id="_managing_show_m3ua_as_remove_cli"><a class="anchor" href="#_managing_show_m3ua_as_remove_cli"></a>7.3.13.1. Using CLI</h5>
<div class="paragraph">
<p>You can unassign an ASP from an AS by issuing the command <code>m3ua as remove</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua as remove

SYNOPSIS
	m3ua as remove &lt;as-name&gt; &lt;asp-name&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to un-assign an Application Server Process from an
	Application Server that it was previously assigned to.

PARAMETERS

	Standard Parameters

	&lt;as-name&gt;		-	Name of the AS from which this ASP is being
					un-assigned.

	&lt;asp-name&gt;		-	Name of the ASP to be un-assigned.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua as remove AS1 ASP1

	The above command will remove ASP1 from AS1.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_show_m3ua_as_remove_gui"><a class="anchor" href="#_managing_show_m3ua_as_remove_gui"></a>7.3.13.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Unassign an ASP from an AS using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'ApplicationServers' tab in the M3UA Management Unit window, locate the row corresponding to the AS you wish to unassign an ASP from and click on the name of the AS.</p>
</li>
<li>
<p>This will launch the AS details page where all the properties of the AS will be displayed.
Switch to the second tab in this view called "Application Server Processes". As shown in the figure above, you will find a list of all currently assigned ASPs to this selected AS.</p>
</li>
<li>
<p>Locate the row corresponding to the ASP you wish to unassign from this AS.</p>
</li>
<li>
<p>Click on the red coloured 'x' remove button in the row corresponding to the ASP you wish to remove.
This action will unassign the ASP from this AS.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_show_m3ua_route"><a class="anchor" href="#_managing_show_m3ua_route"></a>7.3.14. View all M3UA Routes</h4>
<div class="sect4">
<h5 id="_managing_show_m3ua_route_cli"><a class="anchor" href="#_managing_show_m3ua_route_cli"></a>7.3.14.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured M3UA Routes by issuing the command <code>m3ua route show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua route show

SYNOPSIS
	m3ua route show stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to display all configured routes.

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_show_m3ua_route_gui"><a class="anchor" href="#_managing_show_m3ua_route_gui"></a>7.3.14.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific M3UA Management unit and switch to the 'Routers' tab.
Here you can view a list of all the Routes created as shown in the figure below.
Every correctly configured Route will be displayed in a row and for each Route, the first column will display DPC:OPC:SI values.
The icon adjacent to the name will be lit 'green' if the Route is currently active or if the Route is inactive the icon will be 'orange'. The second column will indicate the current state of the Route (Active / Inactive) and the third column will display the name of the AS assigned to route messages for this DPC.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_M3UA_Management_Route.png" alt="GUI M3UA Management Route">
</div>
<div class="title">Figure 23. GUI - M3UA Management - Route</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_add_m3ua_route"><a class="anchor" href="#_managing_add_m3ua_route"></a>7.3.15. Create a new M3UA Route</h4>
<div class="sect4">
<h5 id="_managing_add_m3ua_route_cli"><a class="anchor" href="#_managing_add_m3ua_route_cli"></a>7.3.15.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new M3UA Route by issuing the command <code>m3ua route add</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua route add

SYNOPSIS
	m3ua route add &lt;as-name&gt; &lt;dpc&gt; &lt;opc&gt; &lt;si&gt; trafficmode &lt;traffic-mode&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to configure an AS to route message, i.e. configure the
	destination point code that the message will be routed to. You must ensure that
	the AS is created prior to executing this command.

PARAMETERS

	Standard Parameters

	&lt;as-name&gt;		-	Name of the AS assigned to route message for
					this dpc.

	&lt;dpc&gt;			-	Destination Point Code.

	&lt;opc&gt;			-	Originating Point Code.

	&lt;si&gt;			-	Service Indicator.

	Optional Parameters
	&lt;traffic-mode&gt;	-	There can be two or more AS defined for each route.
						The M3UA Stack will do load-balancing between these
						AS depending on the traffic-mode set for this m3ua
						route. Possible values are:
						1. Override
						2. Loadshare
						3. Broadcast (Broadcast is not yet supported by M3UA)

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
						If this is not passed, the first stack configured in
						ShellExecutor will be used.

EXAMPLES
	m3ua route add AS1 2 -1 -1</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_add_m3ua_route_gui"><a class="anchor" href="#_managing_add_m3ua_route_gui"></a>7.3.15.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new M3UA Route using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Routers' tab in the M3UA Management Unit window and click on the 'Create/Remove' button.</p>
</li>
<li>
<p>This will launch the pop-up 'Create/Remove Route', where you can add values for DPC, OPC, SI, traffic-mode and Application Server Name.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new Route will be configured with parameters as specified.
If there is an error in creating the Route then you will find the details of the error in the Management Console Log section below.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_remove_m3ua_route"><a class="anchor" href="#_managing_remove_m3ua_route"></a>7.3.16. Delete a M3UA Route</h4>
<div class="sect4">
<h5 id="_managing_remove_m3ua_route_cli"><a class="anchor" href="#_managing_remove_m3ua_route_cli"></a>7.3.16.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a M3UA Route by issuing the command <code>m3ua route remove</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	m3ua route remove

SYNOPSIS
	m3ua route remove &lt;as-name&gt; &lt;dpc&gt; &lt;opc&gt; &lt;si&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to remove a previously configured route.

PARAMETERS

	Standard Parameters

	&lt;as-name&gt;		-	Name of the AS assigned to route message for
					this dpc.

	&lt;dpc&gt;			-	Destination Point Code.

	&lt;opc&gt;			-	Originating Point Code.

	&lt;si&gt;			-	Service Indicator.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	m3ua route remove AS1 2 -1 -1</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_remove_m3ua_route_gui"><a class="anchor" href="#_managing_remove_m3ua_route_gui"></a>7.3.16.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a M3UA Route using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Routers' tab in the M3UA Management Unit window and click on the 'Create/Remove' button.</p>
</li>
<li>
<p>This will launch the pop-up 'Create/Remove Route'. Enter the values for DPC, OPC, SI and Application Server Name that you wish to remove from the list of Routes.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Click on the 'Remove' button to delete the Route corresponding to the parameters specified.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_sccp"><a class="anchor" href="#_managing_sccp"></a>7.4. SCCP Management</h3>
<div class="paragraph">
<p>SCCP provides connectionless and connection-oriented network services.
This includes address(GTT) translation and routing, flow control, segmentation and reassembly.
A global title is an address (e.g., a dialed 800 number, calling card number, or mobile subscriber identification number) which is translated by SCCP into a destination  point code and subsystem number.
A subsystem number uniquely identifies an application at the destination signaling point.  is used as the  transport layer for -based services.</p>
</div>
<div class="paragraph">
<p>The first step in configuring SCCP is defining service access points (sap). This step is mandatory.
Each SCCP stack can use one or more Mtp3UserPart  (Refer <a href="#_configuring_sccp">[_configuring_sccp]</a> about Mtp3UserPart settings). A sap is a logical definition of the Mtp3UserPart [corresponding local SPC,  network indicator (NI) and a set of destinations (remote SPC list)].</p>
</div>
<div class="paragraph">
<p>The second step is the definition of a list of available remote signaling pointcodes (SPC - rsp) and  a list of available remote Sub-Systems (SNN - rss). This step is also mandatory.
If routing only by GlobalTitle is used then it is not required to configure remote Sub-Systems.</p>
</div>
<div class="paragraph">
<p>Since  acts as a message router, it is required to configure routing information.
Rules (rule), primary and backup (address) (if backup addresses are available)  addresses should be configured.
If XUDT and LUDT messages are available in the SS7 network, you should configure a set of long message rules (lmr) that will allow long messages.
This step is not mandatory.
If no long message rules are configured only UDT messages will be used.</p>
</div>
<div class="paragraph">
<p>The last step is optional.
You can configure a set of concerned signaling point codes (csp). Each point code will be announced when local SCCP user becomes unavailable.</p>
</div>
<div class="sect3">
<h4 id="_managing_sccp_using_cli"><a class="anchor" href="#_managing_sccp_using_cli"></a>7.4.1. Using CLI</h4>
<div class="paragraph">
<p>You can manage all SCCP related configurations through the Command Line Interface by using the <code>sccp</code> command with appropriate parameters.
You can create, modify, delete  and view SCCP Service Access Points (sap) and Destinations (dest), Remote Signaling Point Codes (rsp), Remote Sub Systems (rss), Concerned Signaling Point Codes (csp),  Routing information (rules, primary and backup addresses) and Long Message Rules (lmr). You can also set and get values for general parameters using this command.</p>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_using_gui"><a class="anchor" href="#_managing_sccp_using_gui"></a>7.4.2. Using GUI</h4>
<div class="paragraph">
<p>The GUI will allow you to manage your SCCP configurations efficiently using a user-friendly interface.
Open a Web Browser and navigate to <a href="http://localhost:8080/jss7-management-console/" class="bare">http://localhost:8080/jss7-management-console/</a>.  Click on the 'SCCP' link in the left panel.
The main panel will display the names of all configured SCCP Management units.
To configure or view the settings of a particular SCCP Management  Unit you must click on the name of that unit.
The GUI will look similar to the figure below and is divided into tabs.</p>
</div>
<div class="paragraph">
<p>The first tab will display the properties of the SCCP Management unit.
These details displayed here are fetched from the XML descriptor file <em class="path">jboss-beans.xml</em>, which is  located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where <code class="app">profile_name</code> is the server profile name.
These properties can be modified here in the GUI.
To modify them you must click on pencil, make changes and save.
The GUI will then display the modified values.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_SCCP_Management.png" alt="GUI SCCP Management">
</div>
<div class="title">Figure 24. GUI - SCCP Management</div>
</div>
<div class="paragraph">
<p>The other seven tabs will allow you to manage all SCCP configurations within this SCCP Management unit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sccp_properties"><a class="anchor" href="#_sccp_properties"></a>7.4.3. SCCP stack properties</h4>
<div class="sect4">
<h5 id="_sccp_property_sccpprotocolversion"><a class="anchor" href="#_sccp_property_sccpprotocolversion"></a>7.4.3.1. SCCP protocol version</h5>
<div class="sect5">
<h6 id="_sccp_property_sccpprotocolversion_cli"><a class="anchor" href="#_sccp_property_sccpprotocolversion_cli"></a>7.4.3.1.1. Using CLI</h6>
<div class="paragraph">
<p>We can specify which protocol specification will use SCCP stack (ITU-T or ANSI).</p>
</div>
<div class="paragraph">
<p>You can set the 'sccpprotocolversion' by issuing the command <code>sccp set sccpprotocolversion</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get sccpprotocolversion</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
    sccp set sccpprotocolversion

SYNOPSIS
    sccp set sccpprotocolversion &lt;ITU | ANSI&gt; stackname &lt;stack-name&gt;

DESCRIPTION
    Sets the value for sccpprotocolversion property ITU or ANSI.
    Default value is ITU.

PARAMETERS

    Optional Parameters

    &lt;stack-name&gt;    -   Name of the stack on which this command is executed.
                    If not passed, the first stack configured in ShellExecutor
                    will be used.

EXAMPLES
    sccp set sccpprotocolversion ITU</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_sccpprotocolversion_min_gui"><a class="anchor" href="#_sccp_property_sccpprotocolversion_min_gui"></a>7.4.3.1.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'ReservedForNationalUseValue of AddressIndicator' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_periodoflogging"><a class="anchor" href="#_sccp_property_periodoflogging"></a>7.4.3.2. Period of logging</h5>
<div class="sect5">
<h6 id="_sccp_property_periodoflogging_cli"><a class="anchor" href="#_sccp_property_periodoflogging_cli"></a>7.4.3.2.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'periodoflogging' by issuing the command <code>sccp set periodoflogging</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get periodoflogging</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set periodoflogging

SYNOPSIS
	sccp set periodoflogging &lt;periodoflogging&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets period of logging warning messages in ms. Default value is 10000.

PARAMETERS

	Standard Parameters

	&lt;periodoflogging&gt;	-	Period in ms.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set periodoflogging 10000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_periodoflogging_gui"><a class="anchor" href="#_sccp_property_periodoflogging_gui"></a>7.4.3.2.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'PeriodOfLogging' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_maxdatamessage"><a class="anchor" href="#_sccp_property_maxdatamessage"></a>7.4.3.3. Maximum Data Message</h5>
<div class="sect5">
<h6 id="_sccp_property_maxdatamessage_cli"><a class="anchor" href="#_sccp_property_maxdatamessage_cli"></a>7.4.3.3.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'maxdatamessage' by issuing the command <code>sccp set maxdatamessage</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get maxdatamessage</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set maxdatamessage

SYNOPSIS
	sccp set maxdatamessage &lt;maxdatamessage&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets Max available SCCP message data for all message types. Range is 2560 to 3952.
    If passed value is less than 2560, it sets to 2560 and if passed value is greater
    than 3952, it sets to 3952.

PARAMETERS

	Standard Parameters

	&lt;maxdatamessage&gt;	-	Maximum data message size.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set maxdatamessage 30000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_maxdatamessage_gui"><a class="anchor" href="#_sccp_property_maxdatamessage_gui"></a>7.4.3.3.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'PreviewMode' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_previewmode"><a class="anchor" href="#_sccp_property_previewmode"></a>7.4.3.4. Preview Mode</h5>
<div class="sect5">
<h6 id="_sccp_property_previewmode_cli"><a class="anchor" href="#_sccp_property_previewmode_cli"></a>7.4.3.4.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'previewmode' by issuing the command <code>sccp set previewmode</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get previewmode</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set previewmode

SYNOPSIS
	sccp set previewmode &lt;true | false&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	If set to true, stack only listens for incoming messages and does not
	send anything out of stack. Messages are silently dropped.

PARAMETERS

	Standard Parameters

	&lt;previewmode&gt;	-	Set preview mode to true or false.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set previewmode false</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_previewmode_gui"><a class="anchor" href="#_sccp_property_previewmode_gui"></a>7.4.3.4.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'PreviewMode' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_reassemblytimerdelay"><a class="anchor" href="#_sccp_property_reassemblytimerdelay"></a>7.4.3.5. Reassembly Timer Delay</h5>
<div class="sect5">
<h6 id="_sccp_property_reassemblytimerdelay_cli"><a class="anchor" href="#_sccp_property_reassemblytimerdelay_cli"></a>7.4.3.5.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'reassemblytimerdelay' by issuing the command <code>sccp set reassemblytimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get reassemblytimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set reassemblytimerdelay

SYNOPSIS
	sccp set reassemblytimerdelay &lt;reassemblytimerdelay&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets SCCP segmented message reassembling timeout (in milliseconds).
    Range is 10000 to 20000. If passed value is less than 10000, it sets to 10000 and
    if passed value is greater than 20000, it sets to 20000

PARAMETERS

	Standard Parameters

	&lt;reassemblytimerdelay&gt;	-	Re-assembly time delay in milliseconds

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set reassemblytimerdelay 20000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_reassemblytimerdelay_gui"><a class="anchor" href="#_sccp_property_reassemblytimerdelay_gui"></a>7.4.3.5.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'ReassemblyTimerDelay' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_removespc"><a class="anchor" href="#_sccp_property_removespc"></a>7.4.3.6. Remove Signaling Point Code</h5>
<div class="sect5">
<h6 id="_sccp_property_removespc_cli"><a class="anchor" href="#_sccp_property_removespc_cli"></a>7.4.3.6.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'removespc' by issuing the command <code>sccp set removespc</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get removespc</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set removespc

SYNOPSIS
	sccp set removespc &lt;false | true&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	If set, the signaling point code from SCCP called/calling address will
	be removed if corresponding routing is based on GT

PARAMETERS

	Standard Parameters

	&lt;removespc&gt;	-	true or false value.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set removespc true</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_removespc_gui"><a class="anchor" href="#_sccp_property_removespc_gui"></a>7.4.3.6.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'RemoveSpc' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_respectpc"><a class="anchor" href="#_sccp_property_respectpc"></a>7.4.3.7. Respect Point Code</h5>
<div class="sect5">
<h6 id="_sccp_property_respectpc_cli"><a class="anchor" href="#_sccp_property_respectpc_cli"></a>7.4.3.7.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'respectpc' by issuing the command <code>sccp set respectpc</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get respectpc</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set respectpc

SYNOPSIS
	sccp set respectpc &lt;false | true&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	If set, the PC will be used for choosing primary or secondary address
	for outgoing messages if corresponding routing is based on GT

PARAMETERS

	Standard Parameters

	&lt;respectpc&gt;	-	true or false value.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set respectpc true</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_respectpc_gui"><a class="anchor" href="#_sccp_property_respectpc_gui"></a>7.4.3.7.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'RespectPc' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_ssttimerduration_increasefactor"><a class="anchor" href="#_sccp_property_ssttimerduration_increasefactor"></a>7.4.3.8. SST Timer Duration Increase Factor</h5>
<div class="sect5">
<h6 id="_sccp_property_ssttimerduration_increasefactor_cli"><a class="anchor" href="#_sccp_property_ssttimerduration_increasefactor_cli"></a>7.4.3.8.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'ssttimerduration_increasefactor' by issuing the command <code>sccp set ssttimerduration_increasefactor</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get ssttimerduration_increasefactor</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set ssttimerduration_increasefactor

SYNOPSIS
	sccp set ssttimerduration_increasefactor &lt;ssttimerduration_increasefactor&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set multiplicator of SST sending interval (next interval will be greater then
	the current by sstTimerDuration_IncreaseFactor). Range is 1 to 4. If passed
	value is less than 1, it sets to 1 and if passed value is greater than 4,
	it sets to 4

PARAMETERS

	Standard Parameters

	&lt;ssttimerduration_increasefactor&gt;	-	values from 1 to 4 for SST duration increase
										factor.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set ssttimerduration_increasefactor 1</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_ssttimerduration_increasefactor_gui"><a class="anchor" href="#_sccp_property_ssttimerduration_increasefactor_gui"></a>7.4.3.8.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'SstTimerDuration_IncreaseFactor' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_ssttimerduration_max"><a class="anchor" href="#_sccp_property_ssttimerduration_max"></a>7.4.3.9. SST Timer Duration Max</h5>
<div class="sect5">
<h6 id="_sccp_property_ssttimerduration_max_cli"><a class="anchor" href="#_sccp_property_ssttimerduration_max_cli"></a>7.4.3.9.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'ssttimerduration_max' by issuing the command <code>sccp set ssttimerduration_max</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get ssttimerduration_max</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set ssttimerduration_max

SYNOPSIS
	sccp set ssttimerduration_max &lt;ssttimerduration_max&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets Max (after increasing) SST sending interval (in 600000 - 1200000 milliseconds).
	Value can be from 600000 to 1200000. If value passed is less than 600000, it sets to
	600000 and if value passed is greater than 1200000, it sets to 1200000

PARAMETERS

	Standard Parameters

	&lt;ssttimerduration_max&gt;	-	values from 600000 - 1200000 milliseconds.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set ssttimerduration_max 600000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_ssttimerduration_max_gui"><a class="anchor" href="#_sccp_property_ssttimerduration_max_gui"></a>7.4.3.9.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'SstTimerDuration_Max' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_ssttimerduration_min"><a class="anchor" href="#_sccp_property_ssttimerduration_min"></a>7.4.3.10. SST Timer Duration Min</h5>
<div class="sect5">
<h6 id="_sccp_property_ssttimerduration_min_cli"><a class="anchor" href="#_sccp_property_ssttimerduration_min_cli"></a>7.4.3.10.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'ssttimerduration_min' by issuing the command <code>sccp set ssttimerduration_min</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get ssttimerduration_min</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set ssttimerduration_min

SYNOPSIS
	sccp set ssttimerduration_min &lt;ssttimerduration_min&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Set's min (starting) SST sending interval (in milliseconds). Value can be
	from 5000 to 10000.If value passed is less than 5000, it sets to 5000 and
	if value passed is greater than 10000, its set to 10000

PARAMETERS

	Standard Parameters

	&lt;ssttimerduration_min&gt;	-	values from 5000 to 10000.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set ssttimerduration_min 10000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_ssttimerduration_min_gui"><a class="anchor" href="#_sccp_property_ssttimerduration_min_gui"></a>7.4.3.10.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'SstTimerDuration_Max' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_zmarginxudtmessage"><a class="anchor" href="#_sccp_property_zmarginxudtmessage"></a>7.4.3.11. ZMargin XUDT Message</h5>
<div class="sect5">
<h6 id="_sccp_property_zmarginxudtmessage_cli"><a class="anchor" href="#_sccp_property_zmarginxudtmessage_cli"></a>7.4.3.11.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'zmarginxudtmessage' by issuing the command <code>sccp set zmarginxudtmessage</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get zmarginxudtmessage</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set ssttimerduration_min

SYNOPSIS
	sccp set zmarginxudtmessage &lt;zmarginxudtmessage&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets segmentation length. If the XUDT message data length greater this value,
    segmentation is processed. Otherwise no segmentation.
    Range is 160 to 255. If passed value is less than 160, it sets to 160 and
    if passed value is greater than 255, it sets to 255.

PARAMETERS

	Standard Parameters

	&lt;zmarginxudtmessage&gt;	-	values from 160 to 255.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set zmarginxudtmessage 255</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_zmarginxudtmessage_min_gui"><a class="anchor" href="#_sccp_property_zmarginxudtmessage_min_gui"></a>7.4.3.11.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'ZMarginXudtMessage' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_cc_timer_a"><a class="anchor" href="#_sccp_property_cc_timer_a"></a>7.4.3.12. Timer A value for the congestion control</h5>
<div class="sect5">
<h6 id="_sccp_property_cc_timer_a_cli"><a class="anchor" href="#_sccp_property_cc_timer_a_cli"></a>7.4.3.12.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'cc_timer_a' by issuing the command <code>sccp set cc_timer_a</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get cc_timer_a</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp get cc_timer_a

SYNOPSIS
	sccp get cc_timer_a stackname &lt;stack-name&gt;

DESCRIPTION
	Sets the Timer A value in milliseconds.
	This timer starts at next MTP-STATUS(cong) primitive coming.
	During this timer no more MTP-STATUS(cong) are accepted.

	Default value is 400.
	Possible values are between 60 and 1000.

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set cc_timer_a 400</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_cc_timer_a_gui"><a class="anchor" href="#_sccp_property_cc_timer_a_gui"></a>7.4.3.12.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'Congestion control: Timer A' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_cc_timer_d"><a class="anchor" href="#_sccp_property_cc_timer_d"></a>7.4.3.13. Timer D value for the congestion control</h5>
<div class="sect5">
<h6 id="_sccp_property_cc_timer_d_cli"><a class="anchor" href="#_sccp_property_cc_timer_d_cli"></a>7.4.3.13.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'cc_timer_d' by issuing the command <code>sccp set cc_timer_d</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get cc_timer_d</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp get cc_timer_d

SYNOPSIS
	sccp get cc_timer_d stackname &lt;stack-name&gt;

DESCRIPTION
	Sets the Timer D value in milliseconds.
	This timer starts after last MTP-STATUS(cong) primitive coming.
	After end of this timer (without new coming MTP-STATUS(cong))
	RSLM (the congestion level) will be reduced.

	Default value is 2000.
	Possible values are between 500 and 10000.

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set cc_timer_d 2000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_cc_timer_d_min_gui"><a class="anchor" href="#_sccp_property_cc_timer_d_min_gui"></a>7.4.3.13.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'Congestion control: Timer A' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="can-relay-value"><a class="anchor" href="#can-relay-value"></a>7.4.3.14. Can relay value</h5>
<div class="sect5">
<h6 id="_sccp_property_canrelay_cli"><a class="anchor" href="#_sccp_property_canrelay_cli"></a>7.4.3.14.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'canrelay' by issuing the command <code>sccp set canrelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get canrelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set canrelay

SYNOPSIS
	sccp set canrelay &lt;canrelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
    Enable (true) or disable (false) ability to be relay node with coupling

PARAMETERS

	Standard Parameters

	&lt;canrelay&gt;	-	boolean values true or false.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set canrelay true</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="connection-establishing-timer-delay-value"><a class="anchor" href="#connection-establishing-timer-delay-value"></a>7.4.3.15. Connection establishing timer delay value</h5>
<div class="sect5">
<h6 id="_sccp_property_connesttimerdelay_cli"><a class="anchor" href="#_sccp_property_connesttimerdelay_cli"></a>7.4.3.15.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'connesttimerdelay' by issuing the command <code>sccp set connesttimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get connesttimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set connesttimerdelay

SYNOPSIS
	sccp set connesttimerdelay &lt;connesttimerdelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set T(conn est) timer delay (for how long connection waits for connection
	confirm message). Range is 60000 to 120000. If passed value is less than
	60000, it sets to 60000 and if passed value is greater than 120000,
	it sets to 120000

PARAMETERS

	Standard Parameters

	&lt;connesttimerdelay&gt;	-	values from 60000 to 120000 for timer delay.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set connesttimerdelay 60000</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="connection-it-send-timer-delay-value"><a class="anchor" href="#connection-it-send-timer-delay-value"></a>7.4.3.16. Connection IT send timer delay value</h5>
<div class="sect5">
<h6 id="_sccp_property_iastimerdelay_cli"><a class="anchor" href="#_sccp_property_iastimerdelay_cli"></a>7.4.3.16.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'iastimerdelay' by issuing the command <code>sccp set iastimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get iastimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set iastimerdelay

SYNOPSIS
	sccp set iastimerdelay &lt;iastimerdelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set T(ias) timer delay (after what period of time IT message will be sent
	if no messages was sent). Range is 300000 to 600000. If passed value is less
	than 300000, it sets to 300000 and if passed value is greater than 600000,
	it sets to 600000

PARAMETERS

	Standard Parameters

	&lt;iastimerdelay&gt;	-	values from 300000 to 600000 for timer delay.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set iastimerdelay 300000</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="connection-message-receive-timer-delay-value"><a class="anchor" href="#connection-message-receive-timer-delay-value"></a>7.4.3.17. Connection message receive timer delay value</h5>
<div class="sect5">
<h6 id="_sccp_property_iartimerdelay_cli"><a class="anchor" href="#_sccp_property_iartimerdelay_cli"></a>7.4.3.17.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'iartimerdelay' by issuing the command <code>sccp set iartimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get iartimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set iartimerdelay

SYNOPSIS
	sccp set iartimerdelay &lt;iartimerdelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set T(iar) timer delay (for how long connection waits to receive a message).
	Range is 660000 to 1260000. If passed value is less than 660000, it sets to
	660000 and if passed value is greater than 1260000, it sets to 1260000

PARAMETERS

	Standard Parameters

	&lt;iartimerdelay&gt;	-	values from 660000 to 1260000 for timer delay.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set iartimerdelay 660000</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="connection-release-complete-message-timer-delay-value"><a class="anchor" href="#connection-release-complete-message-timer-delay-value"></a>7.4.3.18. Connection release complete message timer delay value</h5>
<div class="sect5">
<h6 id="_sccp_property_reltimerdelay_cli"><a class="anchor" href="#_sccp_property_reltimerdelay_cli"></a>7.4.3.18.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'reltimerdelay' by issuing the command <code>sccp set reltimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get reltimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set reltimerdelay

SYNOPSIS
	sccp set reltimerdelay &lt;iartimerdelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set T(rel) timer delay (for how long connection waits for release complete
	message). Range is 10000 to 20000. If passed value is less than 10000, it
	sets to 10000 and if passed value is greater than 20000, it sets to 20000

PARAMETERS

	Standard Parameters

	&lt;reltimerdelay&gt;	-	values from 10000 to 20000 for timer delay.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set reltimerdelay 10000</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="connection-released-message-repeat-timer-delay-value"><a class="anchor" href="#connection-released-message-repeat-timer-delay-value"></a>7.4.3.19. Connection released message repeat timer delay value</h5>
<div class="sect5">
<h6 id="_sccp_property_repeatreltimerdelay_cli"><a class="anchor" href="#_sccp_property_repeatreltimerdelay_cli"></a>7.4.3.19.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'repeatreltimerdelay' by issuing the command <code>sccp set repeatreltimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get repeatreltimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set repeatreltimerdelay

SYNOPSIS
	sccp set repeatreltimerdelay &lt;repeatreltimerdelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set T(repeat rel) timer delay (for how long connection waits for release complete
	message or to repeat sending release message after T(rel) timer fire). Range is
	10000 to 20000. If passed value is less than 10000, it sets to 10000 and if passed
	value is greater than 20000, it sets to 20000

PARAMETERS

	Standard Parameters

	&lt;repeatreltimerdelay&gt;	-	values from 10000 to 20000 for timer delay.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set repeatreltimerdelay 10000</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="connection-resources-release-timer-delay-value"><a class="anchor" href="#connection-resources-release-timer-delay-value"></a>7.4.3.20. Connection resources release timer delay value</h5>
<div class="sect5">
<h6 id="_sccp_property_inttimerdelay_cli"><a class="anchor" href="#_sccp_property_inttimerdelay_cli"></a>7.4.3.20.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'inttimerdelay' by issuing the command <code>sccp set inttimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get inttimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set inttimerdelay

SYNOPSIS
	sccp set inttimerdelay &lt;inttimerdelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set T(int) timer delay (for how long connection waits for release complete
	message or to release connection resources). Range is 0 to 60000. If passed
	value is less than 0, it sets to 0 and if passed value is greater than
	60000, it sets to 60000

PARAMETERS

	Standard Parameters

	&lt;inttimerdelay&gt;	-	values from 0 to 60000 for timer delay.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set inttimerdelay 0</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="connection-work-resume-after-restart-time-delay-value"><a class="anchor" href="#connection-work-resume-after-restart-time-delay-value"></a>7.4.3.21. Connection work resume after restart time delay value</h5>
<div class="sect5">
<h6 id="_sccp_property_guardtimerdelay_cli"><a class="anchor" href="#_sccp_property_guardtimerdelay_cli"></a>7.4.3.21.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'guardtimerdelay' by issuing the command <code>sccp set guardtimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get guardtimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set guardtimerdelay

SYNOPSIS
	sccp set guardtimerdelay &lt;guardtimerdelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set T(guard) timer delay (for how long connection waits to resume work
	after restart). Range is 1380000 to 1500000. If passed value is less
	than 1380000, it sets to 1380000 and if passed value is greater than
	1500000, it sets to 1500000

PARAMETERS

	Standard Parameters

	&lt;guardtimerdelay&gt;	-	values from 1380000 to 1500000 for timer delay.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set guardtimerdelay 1380000</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="connection-release-after-reset-delay-value"><a class="anchor" href="#connection-release-after-reset-delay-value"></a>7.4.3.22. Connection release after reset delay value</h5>
<div class="sect5">
<h6 id="_sccp_property_resettimerdelay_cli"><a class="anchor" href="#_sccp_property_resettimerdelay_cli"></a>7.4.3.22.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'resettimerdelay' by issuing the command <code>sccp set resettimerdelay</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get resettimerdelay</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set resettimerdelay

SYNOPSIS
	sccp set resettimerdelay &lt;resettimerdelay&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set T(reset) timer delay (for how long connection waits to release after
	sending reset message). Range is 10000 to 20000. If passed value is less
	than 10000, it sets to 10000 and if passed value is greater than 20000,
	it sets to 20000

PARAMETERS

	Standard Parameters

	&lt;resettimerdelay&gt;	-	values from 10000 to 20000 for timer delay.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set resettimerdelay 10000</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="thread-count-in-connections-timers-thread-pool-value"><a class="anchor" href="#thread-count-in-connections-timers-thread-pool-value"></a>7.4.3.23. Thread count in connections timers thread pool value</h5>
<div class="sect5">
<h6 id="_sccp_property_timerexecutors_threadcount_cli"><a class="anchor" href="#_sccp_property_timerexecutors_threadcount_cli"></a>7.4.3.23.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'timerexecutors_threadcount' by issuing the command <code>sccp set timerexecutors_threadcount</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get timerexecutors_threadcount</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set timerexecutors_threadcount

SYNOPSIS
	sccp set timerexecutors_threadcount &lt;timerexecutors_threadcount&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	Set number of threads in thread pool for connections timers. Range is from 1
	to 100. If passed value is less than 1, it sets to 1 and if passed
	value is greater than 1000, it sets to 1000

PARAMETERS

	Standard Parameters

	&lt;timerexecutors_threadcount&gt;	-	values from 1 to 1000.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set timerexecutors_threadcount 10</pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_cc_algo"><a class="anchor" href="#_sccp_property_cc_algo"></a>7.4.3.24. Algorithm of the congestion control at SCCP level</h5>
<div class="sect5">
<h6 id="_sccp_property_cc_algo_cli"><a class="anchor" href="#_sccp_property_cc_algo_cli"></a>7.4.3.24.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'cc_algo' by issuing the command <code>sccp set cc_algo</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get cc_algo</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set cc_algo

SYNOPSIS
	sccp set cc_algo &lt;international | levelDepended&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets the algorithm of the congestion control at SCCP level for outgoing
	messages.
	Possible values are international or levelDepended.
	international algorithm - only one level is provided by MTP3 level
	(in MTP-STATUS primitive). Each MTP-STATUS increases N / M levels.
	international algorithm - MTP3 level (MTP-STATUS primitive) provides
	3 levels of a congestion (1-3) and SCCP congestion will increase to
	the next level after MTP-STATUS next level increase (MTP-STATUS 1
	to N up to 3, MTP-STATUS 2 to N up to 5, MTP-STATUS 3 to N up to 7).

	Default value is international.

PARAMETERS

	Standard Parameters

	&lt;cc_algo&gt;	-	international | levelDepended.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set cc_algo international</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_cc_algo_gui"><a class="anchor" href="#_sccp_property_cc_algo_gui"></a>7.4.3.24.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'Congestion control: algorithm' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sccp_property_cc_blockingoutgoungsccpmessages"><a class="anchor" href="#_sccp_property_cc_blockingoutgoungsccpmessages"></a>7.4.3.25. Blocking of outgoing messages in case of the congestion</h5>
<div class="sect5">
<h6 id="_sccp_property_blockingoutgoungsccpmessages_cli"><a class="anchor" href="#_sccp_property_blockingoutgoungsccpmessages_cli"></a>7.4.3.25.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'cc_blockingoutgoungsccpmessages' by issuing the command <code>sccp set cc_blockingoutgoungsccpmessages</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>sccp get cc_blockingoutgoungsccpmessages</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp set cc_blockingoutgoungsccpmessages

SYNOPSIS
	sccp set cc_blockingoutgoungsccpmessages &lt;false | true&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets the value of if outgoing SCCP messages will be blocked in congestion.
	(depending on message type, UDP messages from level N=6).
	true means that message will be blocken in the congestion case,
	false means not.

	Default value is false.

PARAMETERS

	Standard Parameters

	&lt;cc_blockingoutgoungsccpmessages&gt;	-	false or true.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp set cc_blockingoutgoungsccpmessages false</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sccp_property_blockingoutgoungsccpmessages_gui"><a class="anchor" href="#_sccp_property_blockingoutgoungsccpmessages_gui"></a>7.4.3.25.2. Using GUI</h6>
<div class="paragraph">
<p>On SCCP management page, click on pencil against the 'Congestion control: blocking of outgoing messages' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_sap_show"><a class="anchor" href="#_managing_sccp_sap_show"></a>7.4.4. View all Service Access Points (SAP)</h4>
<div class="sect4">
<h5 id="_managing_sccp_sap_show_cli"><a class="anchor" href="#_managing_sccp_sap_show_cli"></a>7.4.4.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured Service Access Points by issuing the command <code>sccp sap show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp sap show

SYNOPSIS
	sccp sap show &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all Service Access Points. If an &lt;id&gt;
	is specified, the command will only display the details of the SAP identified by
	the value of the 'id' specified.

PARAMETERS

	Optional Parameters

	&lt;id&gt;			-	The id of the SAP whose details are to be displayed. If
					this parameter is not specified, the details of all
					defined SAPs will be displayed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_sap_show_gui"><a class="anchor" href="#_managing_sccp_sap_show_gui"></a>7.4.4.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCCP Management unit and switch to the 'SAP' tab.
Here you can view a list of all the Service Access Points created.
Every correctly configured Service Access Point will be displayed in a row with their defined values.
The last column 'Action' will allow you to delete the Service Access Point.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_sap_create"><a class="anchor" href="#_managing_sccp_sap_create"></a>7.4.5. Create a new Service Access Point</h4>
<div class="sect4">
<h5 id="_managing_sccp_sap_create_cli"><a class="anchor" href="#_managing_sccp_sap_create_cli"></a>7.4.5.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new Service Access Point by issuing the command <code>sccp sap create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp sap create

SYNOPSIS
	sccp sap create &lt;id&gt; &lt;mtp3-id&gt; &lt;opc&gt; &lt;ni&gt; stackname &lt;stack-name&gt; networkid &lt;networkId&gt;
	localgtdigits &lt;localGtDigits&gt;

DESCRIPTION
	This command is used to define a new Service Access Point.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	The newly defined SAP will be identified using this 'id'.
					This must be a unique number.

	&lt;mtp3-id&gt;		-	Mtp3UserPart index - used as an index of 'mtp3UserPart'
					property of the SccpStack Bean. For each Mtp3UserPart,
					a sap must be configured.

	&lt;opc&gt;			-	MTP Point code of the local signaling point. Takes an
					Integer Value.

	&lt;ni&gt;			-	Network indicator that forms part of the
					Service Information Octet (SIO).

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

    &lt;networkId&gt;     - A digital parameter that means to which virtual SS7 network
                    belongs Service Access Point (SAP). If this parameter is
                    skipped - networkId will be set to "0" when SAP creation.
                    Refer &lt;xref linkend="design_multitenancy"/&gt;.

    &lt;localGtDigits&gt; - Local GT digits. An incoming message will be brought to this
                    sap if GT digits of callePartyAddress matches to this value.
                    "null" value matches to any incoming message. If this parameter
                    is skipped - networkId will be set to "null" by default.


EXAMPLES
	sccp sap create 1 1 101 2 networkid 2 localgtdigits 999888777

	The above command will create a new Service Access Point identified by the
	number '1'. The values for 'mtp3-id', 'opc' and 'ni' are 1, 101 and 2 respectively.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_sap_create_gui"><a class="anchor" href="#_managing_sccp_sap_create_gui"></a>7.4.5.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new Service Access Point using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'SAP' tab in the SCCP Management window and click on the 'Create SAP' button.
This will launch a pop-up 'Create SAP'.</p>
</li>
<li>
<p>In the 'Create SAP' pop-up, add details of the new Service Access Point.
You must ensure that you fill in all the mandatory parameters (Id, MTP3 Id, OPC, NI). For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new SAP will be created with parameters as specified.
If there is an error in creating the SAP then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create SAP' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_sap_modify"><a class="anchor" href="#_managing_sccp_sap_modify"></a>7.4.6. Modify a Service Access Point</h4>
<div class="sect4">
<h5 id="_managing_sccp_sap_modify_cli"><a class="anchor" href="#_managing_sccp_sap_modify_cli"></a>7.4.6.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify the values of a Service Access Point by issuing the command <code>sccp sap modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp sap modify

SYNOPSIS
	sccp sap modify &lt;id&gt; mtp3-id &lt;mtp3-id&gt; opc &lt;opc&gt; ni &lt;ni&gt; stackname &lt;stack-name&gt; networkid &lt;networkId&gt;
	localgtdigits &lt;localGtDigits&gt;

DESCRIPTION
	This command is used to modify a previously defined Service Access Point.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	The id of the SAP whose values are being modified.

	Optional Parameters

	&lt;mtp3-id&gt;		-	Mtp3UserPart index - used as an index of 'mtp3UserPart'
					property of the SccpStack Bean. For each Mtp3UserPart, a
					sap must be configured.

	&lt;opc&gt;			-	MTP Point code of the local signaling point. Takes an
					Integer Value.

	&lt;ni&gt;			-	Network indicator that forms part of the Service
					Information Octet (SIO).

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

    &lt;networkId&gt;     - A digital parameter that means to which virtual SS7 network
                    belongs Service Access Point (SAP). If this parameter is
                    skipped - networkId will be set to "0" when SAP creation.
                    Refer &lt;xref linkend="design_multitenancy"/&gt;.

    &lt;localGtDigits&gt; - Local GT digits. An incoming message will be brought to this
                    sap if GT digits of callePartyAddress matches to this value.
                    "null" value matches to any incoming message. If this parameter
                    is skipped - networkId will be set to "null" by default.


EXAMPLES
	sccp sap modify 1 mtp3-id 2 opc 102 ni 2

	The above command will modify the values of the Service Access Point identified
	by the number '1'. The new values for 'mtp3-id', 'opc' and 'ni' are 2, 102 and 2
	respectively.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_sap_delete"><a class="anchor" href="#_managing_sccp_sap_delete"></a>7.4.7. Delete a Service Access Point</h4>
<div class="sect4">
<h5 id="_managing_sccp_sap_delete_cli"><a class="anchor" href="#_managing_sccp_sap_delete_cli"></a>7.4.7.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a SAP by issuing the command <code>sccp sap delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp sap delete

SYNOPSIS
	sccp sap delete &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete a previously defined Service Access Point.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	The id of the SAP that is being deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp sap delete 1

	The above command will delete the SAP identified by the number '1'.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_sap_delete_gui"><a class="anchor" href="#_managing_sccp_sap_delete_gui"></a>7.4.7.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a SAP using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'SAP' tab in the SCCP Management Unit window and locate the row corresponding to the SAP you wish to delete.</p>
</li>
<li>
<p>The last column for 'Delete' action will display a 'x' button in red and will be enabled.</p>
</li>
<li>
<p>Click on the red 'x' button to delete the corresponding SAP.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_dest_show"><a class="anchor" href="#_managing_sccp_dest_show"></a>7.4.8. View all Destinations specified for a SAP</h4>
<div class="sect4">
<h5 id="_managing_sccp_dest_show_cli"><a class="anchor" href="#_managing_sccp_dest_show_cli"></a>7.4.8.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all Destinations specified for a  Service Access Point by issuing the command <code>sccp dest show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp dest show

SYNOPSIS
	sccp dest show &lt;sap-id&gt; &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all Destinations specified for a
	Service Access Point. If an &lt;id&gt; is specified in the command, it will only display
	the details of the Destination identified by the value of the 'id' specified.

PARAMETERS

	Standard Parameters

	&lt;sap-id&gt;	-	The id of the SAP whose Destination details are to be
				displayed.


	Optional Parameters

	&lt;id&gt;			-	The id of the Destination whose details are to be
					displayed. If this parameter is not specified, the details
					of all Destinations defined within the SAP 'sap-id' will
					be displayed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_dest_show_gui"><a class="anchor" href="#_managing_sccp_dest_show_gui"></a>7.4.8.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCCP Management unit and switch to the 'SAP' tab.
Here you can view a list of all the Service Access Points created.
Every correctly configured Service Access Point will be displayed in a row with their defined values.
To view the Destination details of a specific SAP, click on the row corresponding to the SAP.
The row will expand below to display the details of all configured Destinations.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_dest_create"><a class="anchor" href="#_managing_sccp_dest_create"></a>7.4.9. Define a new Destination for a SAP</h4>
<div class="sect4">
<h5 id="_managing_sccp_dest_create_cli"><a class="anchor" href="#_managing_sccp_dest_create_cli"></a>7.4.9.1. Using CLI</h5>
<div class="paragraph">
<p>You can define a new Destination for a Service Access Point by issuing the command <code>sccp dest create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp dest create

SYNOPSIS
	sccp dest create &lt;sap-id&gt; &lt;id&gt; &lt;first-dpc&gt; &lt;last-dpc&gt; &lt;first-sls&gt; &lt;last-sls&gt;
	&lt;sls-mask&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to define a new Destination for a Service Access Point.
	For every SAP in the system, you should configure one or more Destinations.

PARAMETERS

	Standard Parameters

	&lt;sap-id&gt;	-	The identifier of the SAP for which this new Destination
				is being defined. You must ensure that the SAP has been
				created prior to issuing this command.

	&lt;id&gt;		-	An identifier for this newly created Destination.
				The number must be unique within each SAP.

	&lt;first-dpc&gt;	-	The first value of the remote signaling point codes range.

	&lt;last-dpc&gt;	-	The last value of the remote signaling point codes range.
				If the Destination specifies only a single Signaling
				Point Code, this value must be equal to the value
				specified for 'first-dpc'.

	&lt;first-sls&gt;	-	The first value of the SLS range.
				SLS value range is from 0 to 255.

	&lt;last-sls&gt;	-	The last value of the SLS range.

	&lt;sls-mask&gt;	-	The mask value. SLS of a message will be exposed by
				performing a bitwise AND operation with this mask prior to
				comparing it with first-sls and last-sls values.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.


EXAMPLES
	sccp dest create 1 1 201 201 0 7 7

	The above command will create a new Destination (identified by number '1') for
	a Service Access Point identified by the number '1'. The values for 'first-dpc',
	'last-dpc', 'first-sls', 'last-sls' and 'sls-mask' are 201, 201, 0, 7 and 7
	respectively.

	sccp dest create 2 1 300 399 0 255 255

	The above command will create a new Destination (identified by number '2') for
	a Service Access Point identified by the number '1'. The values for 'first-dpc',
	'last-dpc', 'first-sls', 'last-sls' and 'sls-mask' are 300, 399, 0, 255 and 255
	respectively. This Destination will cover all possible SLS values.
	Therefore the value for first-sls =0, last-sls=255 and sls-mask=255</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_dest_create_gui"><a class="anchor" href="#_managing_sccp_dest_create_gui"></a>7.4.9.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Define a new Destination for a Service Access Point using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'SAP' tab in the SCCP Management window and click on the row corresponding to the SAP for which you would like to define a new Destination.</p>
</li>
<li>
<p>The SAP row will expand below to display the details of all configured Destinations.
In this section for Destinations, click on the 'Create Destination' button.
This will launch a new pop-up 'Create MTP3 Destination'.</p>
</li>
<li>
<p>In the 'Create MTP3 Destination' pop-up, add details of the new Destination being defined for the Service Access Point.
You must ensure that you fill in all the mandatory parameters.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new Destination will be created with parameters as specified.
If there is an error in creating the SAP then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create MTP3 Destination' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_dest_modify"><a class="anchor" href="#_managing_sccp_dest_modify"></a>7.4.10. Modify a Destination defined for a SAP</h4>
<div class="sect4">
<h5 id="_managing_sccp_dest_modify_cli"><a class="anchor" href="#_managing_sccp_dest_modify_cli"></a>7.4.10.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify the values of a Destination defined for a Service Access Point by issuing the command <code>sccp dest modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp dest modify

SYNOPSIS
	sccp dest modify &lt;sap-id&gt; &lt;id&gt; first-dpc &lt;first-dpc&gt; last-dpc &lt;last-dpc&gt; first-sls &lt;first-sls&gt; last-sls &lt;last-sls&gt;
	sls-mask &lt;sls-mask&gt; stackname &lt;stack-name&gt;


DESCRIPTION
	This command is used to modify the values of a Destination previously defined for
	a Service Access Point.

PARAMETERS

	Standard Parameters

	&lt;sap-id&gt;	-	The identifier of the SAP whose Destination is being
				modified.

	&lt;id&gt;		-	The identifier of the Destination that is being modified.

	Optional Parameters
	&lt;first-dpc&gt;	-	The first value of the remote signaling point codes range.

	&lt;last-dpc&gt;	-	The last value of the remote signaling point codes range.
				If the Destination specifies only a single Signaling
				Point Code, this value must be equal to the value
				specified for 'first-dpc'.

	&lt;first-sls&gt;	-	The first value of the SLS range.
				SLS value range is from 0 to 255.

	&lt;last-sls&gt;	-	The last value of the SLS range.

	&lt;sls-mask&gt;	-	The mask value. SLS of a message will be exposed by
				performing a bitwise AND operation with this mask prior to
				comparing it with first-sls and last-sls values.
	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp dest modify 1 1 first-dpc 201 last-dpc 299 first-sls 0 last-sls 255 sls-mask 255

	The above command will modify the values of the Destination identified by the
	number '1' within the Service Access Point identified by the number '1'.
	The new values for 'first-dpc', 'last-dpc', 'first-sls', 'last-sls' and 'sls-mask'
	are 201, 299, 0, 255 and 255 respectively.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_dest_delete"><a class="anchor" href="#_managing_sccp_dest_delete"></a>7.4.11. Delete a Destination defined for a SAP</h4>
<div class="sect4">
<h5 id="_managing_sccp_dest_delete_cli"><a class="anchor" href="#_managing_sccp_dest_delete_cli"></a>7.4.11.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a Destination defined for a SAP by issuing the command <code>sccp dest delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp dest delete

SYNOPSIS
	sccp dest delete &lt;sap-id&gt; &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to remove a previously defined Destination from a
	Service Access Point.

PARAMETERS

	Standard Parameters

	&lt;sap-id&gt;	-	The identifier of the SAP whose Destination is being
				deleted.

	&lt;id&gt;		-	The identifier of the Destination that is being
				deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp dest delete 1 1

	The above command will delete the Destination identified by the number '1' from
	the SAP identified by the number '1'.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_dest_delete_gui"><a class="anchor" href="#_managing_sccp_dest_delete_gui"></a>7.4.11.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a Destination defined for a SAP using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'SAP' tab in the SCCP Management Unit window and click on the row corresponding to the SAP from which you wish to delete a Destination.</p>
</li>
<li>
<p>The SAP row will expand below to display the details of all configured Destinations.
In this section for Destinations, locate the specific Destination you wish to remove from the list.</p>
</li>
<li>
<p>In the row corresponding to the identified Destination, click on the red 'x' button in the actions column to delete that Destination.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_addr_show"><a class="anchor" href="#_managing_sccp_addr_show"></a>7.4.12. View all configured SCCP Addresses</h4>
<div class="sect4">
<h5 id="_managing_sccp_addr_show_cli"><a class="anchor" href="#_managing_sccp_addr_show_cli"></a>7.4.12.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured SCCP Addresses by issuing the command <code>sccp address show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp address show

SYNOPSIS
	sccp address show id &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all configured addresses.
	If an &lt;id&gt; is specified in the command, it will only display the details of the
	Address identified by the value of the 'id' specified.

PARAMETERS

	Optional Parameters

	&lt;id&gt;			-	The id of the Address whose details are to be displayed.
					If this parameter is not specified, the details of all
					configured Addresses will be displayed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_addr_show_gui"><a class="anchor" href="#_managing_sccp_addr_show_gui"></a>7.4.12.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCCP Management unit and switch to the 'Address' tab.
Here you can view a list of all the configured Addresses.
Every correctly configured Address will be displayed in a row along with the defined values.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_addr_create"><a class="anchor" href="#_managing_sccp_addr_create"></a>7.4.13. Create a new Primary/Backup address</h4>
<div class="sect4">
<h5 id="_managing_sccp_addr_create_cli"><a class="anchor" href="#_managing_sccp_addr_create_cli"></a>7.4.13.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new primary address or backup address of translation by issuing the command <code>sccp address create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp address create

SYNOPSIS
	sccp address create &lt;id&gt; &lt;address-indicator&gt; &lt;point-code&gt; &lt;subsystem-number&gt;
	&lt;translation-type&gt; &lt;numbering-plan&gt; &lt;nature-of-address-indicator&gt; &lt;digits&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to create a new primary address or backup address of
	translation. You can create a new newCallingParty address as well
	using this command. The global title address information of this command is combined with
	the global title being translated by examining the mask provided in the
	'sccp rule create' command.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	A unique number to identify this address.

	&lt;address-indicator&gt;	-	The address indicator is the first field in a SCCP
					Party Address (called/calling) and is one octet in
					length. Its function is to indicate which
					information elements are present so that the
					address can be interpreted. In other words, it
					indicates the type of addressing information that
					is to be found in the address field. The
					addressing information from the original global
					title is then compared with the passed address
					information to match the rule.

					SCCP ADDRESS INDICATOR
					--------------------------------
					| 8 | 7 | 6 | 5 | 4 |3 | 2 | 1 |
					--------------------------------

					Bit '1'     : PC Indicator
						      (1 = included)

					Bit '2'     : SSN Indicator
						      (1 = included)

					Bit '3 - 6' : GT Indicator
						      (0000 = GT not included)
						      (0001 = GT includes
							      Nature of Address)
						      (0010 = GT includes
							      Translation Type)
						      (0011 = GT includes
							      Translation Type,
							      Numbering Plan and
							      Encoding Scheme)
						      (0100 = GT includes
							      Translation Type,
							      Numbering Plan and
							      Encoding Scheme and
							      Nature of Address)

					Bit '7'     : Routing Indicator
						      (0 = Route on GT,
						      1 = Route on PC + SSN)

					Bit '8'     : Reserved for National use.

					Only two fields of Address Indicator is used now for GTT:
                    - GT Indicator (this is used for GlobalTitle type that
                      will be created)
                    - Routing Indicator bit (0 = Route on GT, 1 = Route on
                      PC + SSN)
                    GT Indicator for ITU-T network that is mostly used is -
                    0100 (GT includes Translation Type, Numbering Plan and
                    Encoding Scheme and Nature of Address). Digital value
                    for it is - 16.
                    For 0100 GT Indicator we will use two possible values:
                    16 - 0100 GT Indicator and Route on GT
                    80 - 0100 GT Indicator and Route on PC + SSN
                    Even when SCCP stack works in ANSI mode Address Indicator
                    value for CLI and GUI must have values that we use for
                    ITU-T mode.

	&lt;point-code&gt;		-	MTP Signaling Point Code.
					This parameter contains a point code to which message will
					be routed after GTT (DPC field).
					This parameter is mandatory.

	&lt;subsystem-number&gt;	- This parameter contains SSN which will be placed
	                into CalledPartyAddress. If you set this parameter to "0",
	                SSN from CalledPartyAddress of an original message will be
	                put into CalledPartyAddress.

	&lt;translation-type&gt;	-	This is ignored if GT Indicator is 0000 or 0001.

					TRANSLATION TYPE VALUES

					Value		Description
					----------------------------------
					0		Unknown

					1  - 63		International Service

					64 - 127	Spare

					128 - 254	National Network Specific

					255		Reserved for Expansion

					Value of this parameter will be placed into
					CalledPartyAddress. This parameter is mandatory if GT
					Indicator suppose this parameter is included into GT.
					Most used value: 0 - translation-type - Unknown

	&lt;numbering-plan&gt;	-	The Number Plan (NP) field specifies the numbering
					plan which the address information follows. This
					is ignored if GT Indicator is 0000, 0001 or 0010.

                    Value of this parameter will be placed into
                    CalledPartyAddress. This parameter is mandatory if GT
                    Indicator suppose this parameter is included into GT.
                    Most used value: 1 - numbering-plan - ISDN/telephony

	&lt;nature-of-address&gt;	-	The Nature of Address Indicator (NAI) field
					defines the address range for a specific numbering
					plan. This is only used if GT Indicator is 0100.

                    Value of this parameter will be placed into
                    CalledPartyAddress. This parameter is mandatory if GT
                    Indicator suppose this parameter is included into GT.
                    Most used value: 4 - nature-of-address - International

	&lt;digits&gt;		-	The global title address information to translate
					to. Specified as string of digits divided into
					subsections using separator '/' depending on if
					the mask contains separator or not.
					The digits string can contain:

					DIGIT PATTERN

					Value		Description
					----------------------------------
					-		padding - ignored

					/		separator used to split the digit
							pattern into sections.
							Each section is processed
							differently as specified by the
							mask parameter in the
							'sccp rule create' command.

                    We need this parameter if at least one section of Rule
                    mask contains "R" (replace) value. Else set this field
                    to "0". If this field is needed it should contain the
                    same subsections as the rule mask has.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp address create 1 71 2 8 0 0 3 123456789</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_addr_create_gui"><a class="anchor" href="#_managing_sccp_addr_create_gui"></a>7.4.13.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new Primary/Backup Address using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Address' tab in the SCCP Management window and click on the 'Create Address' button.
This will launch a new pop-up 'Create SCCP Address'.</p>
</li>
<li>
<p>In the 'Create SCCP Address' pop-up, add details of the new SCCP Address being defined.
You must ensure that you fill in all the mandatory parameters.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new Address will be created with parameters as specified.
If there is an error in creating the Address then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create SCCP Address' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_addr_modify"><a class="anchor" href="#_managing_sccp_addr_modify"></a>7.4.14. Modify a Primary/Backup Address</h4>
<div class="sect4">
<h5 id="_managing_sccp_addr_modify_cli"><a class="anchor" href="#_managing_sccp_addr_modify_cli"></a>7.4.14.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify the values of a primary address or backup address of translation by issuing the command <code>sccp address modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp address modify

SYNOPSIS
	sccp address modify &lt;id&gt; address-indicator &lt;address-indicator&gt; point-code &lt;point-code&gt; subsystem-number &lt;subsystem-number&gt;
	translation-type &lt;translation-type&gt; numbering-plan &lt;numbering-plan&gt; nature-of-address-indicator &lt;nature-of-address-indicator&gt; digits &lt;digits&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to modify the values of an address
	previously defined.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	Identifier of the address to be modified.

	Optional Parameters
	&lt;address-indicator&gt;	-	The address indicator is the first field in a SCCP
					Party Address (called/calling) and is one octet in
					length. Its function is to indicate which
					information elements are present so that the
					address can be interpreted. In other words, it
					indicates the type of addressing information that
					is to be found in the address field. The
					addressing information from the original global
					title is then compared with the passed address
					information to match the rule.

					SCCP ADDRESS INDICATOR
					--------------------------------
					| 8 | 7 | 6 | 5 | 4 |3 | 2 | 1 |
					--------------------------------

					Bit '1'     : PC Indicator
						      (1 = included)

					Bit '2'     : SSN Indicator
						      (1 = included)

					Bit '3 - 6' : GT Indicator
						      (0000 = GT not included)
						      (0001 = GT includes
							      Nature of Address)
						      (0010 = GT includes
							      Translation Type)
						      (0011 = GT includes
							      Translation Type,
							      Numbering Plan and
							      Encoding Scheme)
						      (0100 = GT includes
							      Translation Type,
							      Numbering Plan and
							      Encoding Scheme and
							      Nature of Address)

					Bit '7'     : Routing Indicator
						      (0 = Route on GT,
						      1 = Route on PC + SSN)

					Bit '8'     : Reserved for National use.

                    Only two fields of Address Indicator is used now for GTT:
                    - GT Indicator (this is used for GlobalTitle type that
                      will be created)
                    - Routing Indicator bit (0 = Route on GT, 1 = Route on
                      PC + SSN)
                    GT Indicator for ITU-T network that is mostly used is -
                    0100 (GT includes Translation Type, Numbering Plan and
                    Encoding Scheme and Nature of Address). Digital value
                    for it is - 16.
                    For 0100 GT Indicator we will use two possible values:
                    16 - 0100 GT Indicator and Route on GT
                    80 - 0100 GT Indicator and Route on PC + SSN
                    Even when SCCP stack works in ANSI mode Address Indicator
                    value for CLI and GUI must have values that we use for
                    ITU-T mode.

    &lt;point-code&gt;        -   MTP Signaling Point Code.
                    This parameter contains a point code to which message will
                    be routed after GTT (DPC field).
                    This parameter is mandatory.

    &lt;subsystem-number&gt;  - This parameter contains SSN which will be placed
                    into CalledPartyAddress. If you set this parameter to "0",
                    SSN from CalledPartyAddress of an original message will be
                    put into CalledPartyAddress.

	&lt;translation-type&gt;	-	This is ignored if GT Indicator is 0000 or 0001.

					TRANSLATION TYPE VALUES

					Value		Description
					----------------------------------
					0		Unknown

					1  - 63		International Service

					64 - 127	Spare

					128 - 254	National Network Specific

					255		Reserved for Expansion

                    Value of this parameter will be placed into
                    CalledPartyAddress. This parameter is mandatory if GT
                    Indicator suppose this parameter is included into GT.
                    Most used value: 0 - translation-type - Unknown

    &lt;numbering-plan&gt;    -   The Number Plan (NP) field specifies the numbering
                    plan which the address information follows. This
                    is ignored if GT Indicator is 0000, 0001 or 0010.

                    Value of this parameter will be placed into
                    CalledPartyAddress. This parameter is mandatory if GT
                    Indicator suppose this parameter is included into GT.
                    Most used value: 1 - numbering-plan - ISDN/telephony

    &lt;nature-of-address&gt; -   The Nature of Address Indicator (NAI) field
                    defines the address range for a specific numbering
                    plan. This is only used if GT Indicator is 0100.

                    Value of this parameter will be placed into
                    CalledPartyAddress. This parameter is mandatory if GT
                    Indicator suppose this parameter is included into GT.
                    Most used value: 4 - nature-of-address - International

	&lt;digits&gt;		-	The global title address information to translate
					to. Specified as string of digits divided into
					subsections using separator '/' depending on if
					the mask contains separator or not.
					The digits string can contain:

					DIGIT PATTERN

					Value		Description
					----------------------------------
					-		padding - ignored

					/		separator used to split the digit
							pattern into sections.
							Each section is processed
							differently as specified by the
							mask parameter in the
							'sccp rule create' command.

                    We need this parameter if at least one section of Rule
                    mask contains "R" (replace) value. Else set this field
                    to "0". If this field is needed it should contain the
                    same subsections as the rule mask has.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_addr_delete"><a class="anchor" href="#_managing_sccp_addr_delete"></a>7.4.15. Delete a Primary/Backup Address</h4>
<div class="sect4">
<h5 id="_managing_sccp_addr_delete_cli"><a class="anchor" href="#_managing_sccp_addr_delete_cli"></a>7.4.15.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a Primary or Backup Address by issuing the command <code>sccp address delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp address delete

SYNOPSIS
	sccp address delete &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to remove previously defined addresses.

PARAMETERS

	Standard Parameters

	&lt;id&gt;		-	The identifier of the address that is being deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp address delete 1

	The above command will delete the address identified by the number '1'.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_addr_delete_gui"><a class="anchor" href="#_managing_sccp_addr_delete_gui"></a>7.4.15.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a Primary/Backup Address using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Address' tab in the SCCP Management Unit window and locate the row corresponding to the Address you wish to delete.</p>
</li>
<li>
<p>In the row corresponding to the identified Address, click on the red 'x' button in the actions column to delete that Address.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rule_show"><a class="anchor" href="#_managing_sccp_rule_show"></a>7.4.16. View all configured SCCP Rules</h4>
<div class="sect4">
<h5 id="_managing_sccp_rule_show_cli"><a class="anchor" href="#_managing_sccp_rule_show_cli"></a>7.4.16.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured SCCP Rules by issuing the command <code>sccp rule show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rule show

SYNOPSIS
	sccp rule show id &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all Rules configured. If an &lt;id&gt; is
	specified in the command, it will only display the details of the Rule identified
	by the value of the 'id' specified.

PARAMETERS

	Optional Parameters

	&lt;id&gt;		-	The id of the Rule whose details are to be displayed.
				If this parameter is not specified, the details of all
				configured Rules will be displayed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
			If not passed, the first stack configured in ShellExecutor
			will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rule_show_gui"><a class="anchor" href="#_managing_sccp_rule_show_gui"></a>7.4.16.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCCP Management unit and switch to the 'Rules' tab.
Here you can view a list of all the configured Rules.
Every correctly configured Rule will be displayed in a row along with the defined values.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rule_create"><a class="anchor" href="#_managing_sccp_rule_create"></a>7.4.17. Create a new SCCP Rule</h4>
<div class="sect4">
<h5 id="sorting-algorithm"><a class="anchor" href="#sorting-algorithm"></a>7.4.17.1. Sorting Algorithm</h5>
<div class="paragraph">
<p>When you define Rules, a comparison function imposes ordering the collection of SCCP Rules using a sorting algorithm that is based on the GT digits.
The algorithm is defined below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Rules defined with OriginationType==localOriginated or OriginationType==remoteOriginated, are always at the top of the list.
Rules defined with OriginationType==All are always at the bottom of the list.</p>
<div class="paragraph">
<p>Among rules with the same values for OriginationType (All or localOriginated/remoteOriginated), the sorting is done using the below rules.</p>
</div>
</li>
<li>
<p>Rules with GT digits having no wildcard (* or ?) are always at the top of the list.
Between two Rules with GT digits, both having no wildcards, the one with the shortest length is at the top of the list.
For example, Digit1 "123456" will be above Digit2 "1234567890" and this will be above Digit3 "999/*</p>
</li>
<li>
<p>Rules with GT digits having the wildcard "?" are always above digits having the wildcard "<strong>". For example, Digit1 "800/????/9" will be above Digit2 "999/</strong></p>
</li>
<li>
<p>Between Rules with two GT digits both having wildcard "?", the one with the least number of wildcard "?" is at the top of the list.
For example, Digit1 "800/????/9" will be above Digit2 "800/?????/9"</p>
</li>
<li>
<p>Between Rules with two GT digits both having an equal number of wildcard "?", the digit whose first appearance of "?" is after other, is at the top of the list.
For example between Digit1 "80/??/0/???/9" and Digit 2 "800/?????/9", Digit2 is above Digit1.				When a Rule is compared during Translation, comparison always starts from the top of the list.</p>
</li>
<li>
<p>If 2 rules have exactly same digits then rules are sorted using the above logic for calling digits.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Parameters backup-addressid (when ruleType parameter is "solitary"), loadsharing-algo (when ruleType parameter is not "loadshared"), newcgparty-addressid, origination-type, networkid, stackname and parameters for a calling party address (calling-ai, calling-pc, calling-ssn, calling-tt, calling-np, calling-nai, calling-digits-pattern) are optional. If newcgparty-addressid is not specified then calling party address will not be changed. If origination-type is not specified then a rule applies to
all messages regardless of their origination. If networkid is not specified then networkid will be assigned to 0. If stackname is not specified then a rule will be applied to a default SCCP stack. If calling party address parameters are not specified then only called party address patterns will be taken into account.</p>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rule_create_cli"><a class="anchor" href="#_managing_sccp_rule_create_cli"></a>7.4.17.2. Using CLI</h5>
<div class="paragraph">
<p>You can create a new Rule by issuing the command <code>sccp rule create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rule create

SYNOPSIS
	sccp rule create &lt;id&gt; &lt;mask&gt; &lt;address-indicator&gt; &lt;point-code&gt; &lt;subsystem-number&gt;
	&lt;translation-type&gt; &lt;numbering-plan&gt; &lt;nature-of-address-indicator&gt; &lt;digits&gt;
	&lt;ruleType&gt; &lt;primary-address-id&gt; backup-addressid &lt;backup-address-id&gt;
	loadsharing-algo &lt;loadsharing-algorithm&gt; newcgparty-addressid
	&lt;new-callingPartyAddress-id&gt; origination-type &lt;originationType&gt;
	networkid &lt;networkId&gt; calling-ai &lt;calling-address-indicator&gt;
	calling-pc &lt;calling-point-code&gt; calling-ssn &lt;calling-subsystem-number&gt;
	calling-tt &lt;calling-translation-type&gt; calling-np &lt;calling-numbering-plan&gt;
	calling-nai &lt;calling-nature-of-address-indicator&gt;
	calling-digits-pattern &lt;calling-digits-pattern&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to create a new SCCP Routing Rule. You must ensure that
	primary and backup addresses are configured properly prior to executing this
	command.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	A unique number to identify this Rule.

	&lt;mask&gt;			-	A mask defines which part of the originally dialed
					digits remains in the translated digits and which
					part is replaced by the digits from primary or
					backup address. A mask is divided into sections by
					separator '/'. The number of sections in a mask
					should be equal to the sections in digits passed
					in this command and the sections in primary or
					backup address. This paramter is mandatory.

					MASK DEFINITIONS

					Mnemonic	Function
					----------------------------------
					- 		Ignore

					/		Separator used to split the mask
							into sections.

					K		Retain the original dialed digits
							of this section in the translated
							digits.

					R		Replace the original dialed digits
							of this section with the same
							section from primary or backup
							address in the translated digits.

	&lt;address-indicator&gt;	-	The address indicator is the first field in a SCCP
					Party Address (called/calling) and is one octet in
					length. Its function is to indicate which
					information elements are present so that the
					address can be interpreted. In other words, it
					indicates the type of addressing information that
					is to be found in the address field. The
					addressing information from the original global
					title is then compared with the passed address
					information to match the rule.

					SCCP ADDRESS INDICATOR
					--------------------------------
					| 8 | 7 | 6 | 5 | 4 |3 | 2 | 1 |
					--------------------------------

					Bit '1'     : PC Indicator
						      (1 = included)

					Bit '2'     : SSN Indicator
						      (1 = included)

					Bit '3 - 6' : GT Indicator
						      (0000 = GT not included)
						      (0001 = GT includes
							      Nature of Address)
						      (0010 = GT includes
							      Translation Type)
						      (0011 = GT includes
							      Translation Type,
							      Numbering Plan and
							      Encoding Scheme)
						      (0100 = GT includes
							      Translation Type,
							      Numbering Plan and
							      Encoding Scheme and
							      Nature of Address)

					Bit '7'     : Routing Indicator
						      (0 = Route on GT,
						      1 = Route on PC + SSN)

					Bit '8'     : Reserved for National use.

					Only GT Indicator is used in the current implementation.
					A Rule matches to an original address only if GT Indicator
					from address-indicator is the same in a rule and in an
					original address. GT Indicator for ITU-T network that is
					mostly used is - 0100 (GT includes Translation Type,
					Numbering Plan and Encoding Scheme and Nature of Address).
					If you also use 0100 - use digital value for it - 16.
                    Even when SCCP stack works in ANSI mode Address Indicator
                    value for CLI and GUI must have values that we use for
                    ITU-T mode.

	&lt;point-code&gt;		-	MTP Signaling Point Code. This is ignored if
					Bit '0' of address-indicator is not set.
					This parameter is not used in currentimplemetation and
					can be set to "0".

	&lt;subsystem-number&gt;	-	This is ignored if Bit '1' of address-indicator is
					not set.
                    This parameter is not used in currentimplemetation and
                    can be set to "0".

	&lt;translation-type&gt;	-	This is ignored if GT Indicator is 0000 or 0001.

					TRANSLATION TYPE VALUES

					Value		Description
					----------------------------------
					0		Unknown

					1  - 63		International Service

					64 - 127	Spare

					128 - 254	National Network Specific

					255		Reserved for Expansion

					This paramter is mandatory.
					A Rule matches to an original address only if a value of
					this parameter is the same in a rule and in an original
					address. Values are compared only if GT type contains this
					parameter (see GT Indicator description in
					&lt;address-indicator&gt; parameter).
					Most used values:
					0 - translation-type - Unknown

	&lt;numbering-plan&gt;	-	The Number Plan (NP) field specifies the numbering
					plan which the address information follows. This
					is ignored if GT Indicator is 0000, 0001 or 0010.

					NUMBER PLAN VALUES

					Value		Description
					----------------------------------
					0		Unknown

					1		ISDN/Telephony Number Plan
							(Recommendations E.163 and E.164)

					2		Generic Numbering Plan

					3		Data Numbering Plan
							(Recommendations X.121)

					4		Telex Numbering Plan
							(Recommendations F.69)

					5		Maritime Mobile Numbering Plan
							(Recommendations E.210, E.211)

					6		Land Mobile Numbering Plan
							(Recommendations E.212)

					7		ISDN/Mobile Numbering Plan
							(Recommendations E.214)

					8 to 13		Spare

					14		Private Network or
							Network-Specific Numbering Plan

					15		Reserved

                    This paramter is mandatory.
                    A Rule matches to an original address only if a value of
                    this parameter is the same in a rule and in an original
                    address. Values are compared only if GT type contains this
                    parameter (see GT Indicator description in
                    &lt;address-indicator&gt; parameter).
                    Most used values:
                    1 - numbering-plan - ISDN/telephony

	&lt;nature-of-address&gt;	-	The Nature of Address Indicator (NAI) field
					defines the address range for a specific numbering
					plan. This is only used if GT Indicator is 0100.

					NAI VALUES

					Value		Description
					----------------------------------
					0		Unknown

					1		Subscriber Number

					2		Reserved for National use

					3		National Significant Number

					4		International Number

					5 to 127	Spare

                    This paramter is mandatory.
                    A Rule matches to an original address only if a value of
                    this parameter is the same in a rule and in an original
                    address. Values are compared only if GT type contains this
                    parameter (see GT Indicator description in
                    &lt;address-indicator&gt; parameter).
                    Most used values:
                    4 - nature-of-address - International

	&lt;digits&gt;		-	Specifies the string of digits divided into
					subsections using separator '/' depending on if
					the mask contains separator or not. The dialed
					digits should match with theses digits as per the
					rule specified below:

					DIGIT PATTERN

					Value		Description
					----------------------------------
					-		padding - ignored

					*		wildcard - matches any number of
							digits

					?		wildcard - matches exactly one
							digit

					/		separator used to split the digit
							pattern into sections.
							Each section can be processed
							differently as specified
							by the mask parameter.

					This parameter is mandatory. It should contain the same
					subsections count as the rule mask has.

	&lt;ruleType&gt;		-	Takes one of the following values defined below.

					RULE TYPE VALUES

					Value		Description
					----------------------------------
					solitary	Only one (primary) address is used
							for routing.
							(&lt;backup-address-id&gt; may be missed
							in this case).

					dominant	Both primary and backup
							addresses are used and mandatory.
							If both the addresses are
							available, the primary address is
							used for routing.

					loadshared	Both primary and backup
							addresses are used and mandatory.
							If both the addresses are
							available, either primary or
							backup address is used for
							routing.
							The &lt;loadsharing-algorithm&gt; should
							be configured in this case.

					broadcast	Both primary and backup addresses
							are used and are mandatory. All
							messages are routed to both
							addresses.

	&lt;primary-address-id&gt;	-	Identifies the SCCP Address used as the primary
					translation.

	Optional Parameters

	&lt;backup-address-id&gt;	-	Identifies the SCCP Address used as the backup
					translation in case the pointcode specified by the
					primary address is not available. Backup address
					is used if &lt;ruleType&gt; is not "solitary".

	&lt;loadsharing-algorithm&gt;	-	This parameter is mandatory if &lt;ruleType&gt; is
					"loadshared". The Loadsharing algorithm is
					configured here. Possible values of the parameter
					are:

					LOAD SHARING ALGORITHM VALUES

					Value		Description
					----------------------------------
					bit4 		if( (SLS &amp; 0x10) == 0 )
							&lt;route to primary&gt; else
							&lt;route to backup&gt;

							This algorithm is the best if all
							traffic is local (mobicents stack)
							originated

					bit3		if( (SLS &amp; 0x08) == 0 )
							&lt;route to primary&gt; else
							&lt;route to backup&gt;
							This algorithm can be used if not
							all traffic is local
							(mobicents stack) originated.
							But only 8 links are acceptable in
							both linksets.

					bit2		if( (SLS &amp; 0x04) == 0 )
							&lt;route to primary&gt; else
							&lt;route to backup&gt;
							This algorithm can be used if not
							all traffic is local
							(mobicents stack) originated.
							But only 8 links are acceptable in
							both linksets.

					bit1		if( (SLS &amp; 0x02) == 0 )
							&lt;route to primary&gt; else
							&lt;route to backup&gt;
							This algorithm can be used if not
							all traffic is local
							(mobicents stack) originated.
							But only 8 links are acceptable in
							both linksets.

					bit0		if( (SLS &amp; 0x01) == 0 )
							&lt;route to primary&gt; else
							&lt;route to backup&gt;
							This algorithm can be used if not
							all traffic is local
							(mobicents stack) originated.
							But only 8 links are acceptable in
							both linksets.


	&lt;new-callingPartyAddress-id&gt;
				-	This address will replace the
					callingPartyAddresses of messages that fit a Rule.

	&lt;originationType&gt;	-	Takes one of the following values defined below.
					If the parameter is not defined, rule applies to
					all messages regardless of their origination.

					ORIGINATION TYPE VALUES

					Value			Description
					-------------------------------------
					localOriginated		If this parameter is
								"localOriginated", then a
								rule applies only for
								messages originating from
								local SCCP users
								(for example a local
								TCAP stack).

					remoteOriginated	If this parameter is
								"remoteOriginated", then a
								rule applies only for
								messages originating from
								SS7 network and not for
								messages originating from
								local SCCP users.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

    &lt;networkId&gt;     - A digital parameter that means to which virtual SS7 network
                    belongs a Rule. If this parameter is skipped - networkId will
                    be set to "0" when a Rule creation.
                    Refer &lt;xref linkend="design_multitenancy"/&gt;.

    &lt;calling-address-indicator&gt;
                -   Address indicator for calling address matching.
                    See above address-indicator

    &lt;calling-point-code&gt;
                -   Pointcode of calling sccp address. MTP Signaling Point Code.
                    This is ignored if Bit '0' of address-indicator is not set.

    &lt;calling-subsystem-number&gt;
                -   This is ignored if Bit '1' of address-indicator is
                    not set.

    &lt;calling-translation-type&gt;
                -   This is ignored if GT Indicator is 0000 or 0001.
                    See &lt;translation-type&gt; above for more details.

    &lt;calling-numbering-plan&gt;
                -   A digital parameter that specifies to which virtual SS7
                    network this rule belongs. If this parameter
                    is skipped - networkId will be set to "0" by default.

    &lt;calling-nature-of-address-indicator&gt;
                -   The Nature of Address Indicator (NAI) field
                    defines the address range for a specific numbering
                    plan. This is only used if GT Indicator is 0100.

     &lt;calling-digits-pattern&gt;
                -   Specifies the string of digits for pattern matching.
                    There is no mask for calling digits, hence the division separator is ignored.
                    See above &lt;digits&gt; for more information on pattern matching.

EXAMPLES
	sccp rule create 1 R 71 2 8 0 0 3 123456789 solitary 1

	sccp rule create 2 R 71 2 8 0 0 3 123456789 dominant 1 1

	sccp rule create 2 R 71 2 8 0 0 3 123456789 loadshared 1 1 bit4

    sccp rule create 21 R 71 2 8 0 0 3 123456789 dominant 2 backup-addressid 1 loadsharing-algo bit3 newcgparty-addressid 1 origination-type remoteoriginated calling-ai 18 calling-pc 0 calling-ssn 0 calling-tt 0 calling-nai 0 calling-np 0 calling-digits-pattern 567*</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rule_create_gui"><a class="anchor" href="#_managing_sccp_rule_create_gui"></a>7.4.17.3. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new Rule using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Rules' tab in the SCCP Management window and click on the 'Create Rule' button.
This will launch a new pop-up 'Create Rule'.</p>
</li>
<li>
<p>In the 'Create Rule' pop-up, add details of the new SCCP Rule being defined.
You must ensure that you fill in all the mandatory parameters.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new Rule will be created with parameters as specified.
If there is an error in creating the Rule then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Rule' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rule_modify"><a class="anchor" href="#_managing_sccp_rule_modify"></a>7.4.18. Modify a SCCP Rule</h4>
<div class="sect4">
<h5 id="_managing_sccp_rule_modify_cli"><a class="anchor" href="#_managing_sccp_rule_modify_cli"></a>7.4.18.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify the values of a Rule by issuing the command <code>sccp rule modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rule modify

SYNOPSIS
	sccp rule modify &lt;id&gt; mask &lt;mask&gt; address-indicator &lt;address-indicator&gt; point-code &lt;point-code&gt; subsystem-number &lt;subsystem-number&gt;
	translation-type &lt;translation-type&gt; numbering-plan &lt;numbering-plan&gt; nature-of-address-indicator &lt;nature-of-address-indicator&gt; digits &lt;digits&gt;
	rule-type &lt;rule-type&gt; primary-address-id &lt;primary-address-id&gt; backup-addressid &lt;backup-address-id&gt;
	loadsharing-algo &lt;loadsharing-algorithm&gt; newcgparty-addressid
	&lt;new-callingPartyAddress-id&gt; origination-type &lt;originationType&gt;
	networkid &lt;networkId&gt; calling-ai &lt;calling-address-indicator&gt;
	calling-pc &lt;calling-point-code&gt; calling-ssn &lt;calling-subsystem-number&gt;
	calling-tt &lt;calling-translation-type&gt; calling-np &lt;calling-numbering-plan&gt;
	calling-nai &lt;calling-nature-of-address-indicator&gt;
	calling-digits-pattern &lt;calling-digits-pattern&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to modify the values of a SCCP Route previously defined.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	A unique number to identify this Rule.

	Optional Parameters
	&lt;mask&gt;			-	A mask defines which part of the originally dialed
					digits remains in the translated digits and which
					part is replaced by the digits from primary or
					backup address. A mask is divided into sections by
					separator '/'. The number of sections in a mask
					should be equal to the sections in digits passed
					in this command and the sections in primary or
					backup address. This paramter is mandatory.

					MASK DEFINITIONS

					Mnemonic	Function
					----------------------------------
					- 		Ignore

					/		Separator used to split the mask
							into sections.

					K		Retain the original dialed digits
							of this section in the translated
							digits.

					R		Replace the original dialed digits
							of this section with the same
							section from primary or backup
							address in the translated digits.

	&lt;address-indicator&gt;	-	The address indicator is the first field in a SCCP
					Party Address (called/calling) and is one octet in
					length. Its function is to indicate which
					information elements are present so that the
					address can be interpreted. In other words, it
					indicates the type of addressing information that
					is to be found in the address field. The
					addressing information from the original global
					title is then compared with the passed address
					information to match the rule.

					SCCP ADDRESS INDICATOR
					--------------------------------
					| 8 | 7 | 6 | 5 | 4 |3 | 2 | 1 |
					--------------------------------

					Bit '1'     : PC Indicator
						      (1 = included)

					Bit '2'     : SSN Indicator
						      (1 = included)

					Bit '3 - 6' : GT Indicator
						      (0000 = GT not included)
						      (0001 = GT includes
							      Nature of Address)
						      (0010 = GT includes
							      Translation Type)
						      (0011 = GT includes
							      Translation Type,
							      Numbering Plan and
							      Encoding Scheme)
						      (0100 = GT includes
							      Translation Type,
							      Numbering Plan and
							      Encoding Scheme and
							      Nature of Address)

					Bit '7'     : Routing Indicator
						      (0 = Route on GT,
						      1 = Route on PC + SSN)

					Bit '8'     : Reserved for National use.

                    Only GT Indicator is used in the current implementation.
                    A Rule matches to an original address only if GT Indicator
                    from address-indicator is the same in a rule and in an
                    original address. GT Indicator for ITU-T network that is
                    mostly used is - 0100 (GT includes Translation Type,
                    Numbering Plan and Encoding Scheme and Nature of Address).
                    If you also use 0100 - use digital value for it - 16.
                    Even when SCCP stack works in ANSI mode Address Indicator
                    value for CLI and GUI must have values that we use for
                    ITU-T mode.

	&lt;point-code&gt;		-	MTP Signaling Point Code. This is ignored if
					Bit '0' of address-indicator is not set.
                    This parameter is not used in currentimplemetation and
                    can be set to "0".

	&lt;subsystem-number&gt;	-	This is ignored if Bit '1' of address-indicator is
					not set.
                    This parameter is not used in currentimplemetation and
                    can be set to "0".

	&lt;translation-type&gt;	-	This is ignored if GT Indicator is 0000 or 0001.

					TRANSLATION TYPE VALUES

					Value		Description
					----------------------------------
					0		Unknown

					1  - 63		International Service

					64 - 127	Spare

					128 - 254	National Network Specific

					255		Reserved for Expansion

                    This paramter is mandatory.
                    A Rule matches to an original address only if a value of
                    this parameter is the same in a rule and in an original
                    address. Values are compared only if GT type contains this
                    parameter (see GT Indicator description in
                    &lt;address-indicator&gt; parameter).
                    Most used values:
                    0 - translation-type - Unknown

	&lt;numbering-plan&gt;	-	The Number Plan (NP) field specifies the numbering
					plan which the address information follows. This
					is ignored if GT Indicator is 0000, 0001 or 0010.

					NUMBER PLAN VALUES

					Value		Description
					----------------------------------
					0		Unknown

					1		ISDN/Telephony Number Plan
							(Recommendations E.163 and E.164)

					2		Generic Numbering Plan

					3		Data Numbering Plan
							(Recommendations X.121)

					4		Telex Numbering Plan
							(Recommendations F.69)

					5		Maritime Mobile Numbering Plan
							(Recommendations E.210, E.211)

					6		Land Mobile Numbering Plan
							(Recommendations E.212)

					7		ISDN/Mobile Numbering Plan
							(Recommendations E.214)

					8 to 13		Spare

					14		Private Network or
							Network-Specific Numbering Plan

					15		Reserved

                    This paramter is mandatory.
                    A Rule matches to an original address only if a value of
                    this parameter is the same in a rule and in an original
                    address. Values are compared only if GT type contains this
                    parameter (see GT Indicator description in
                    &lt;address-indicator&gt; parameter).
                    Most used values:
                    1 - numbering-plan - ISDN/telephony

	&lt;nature-of-address&gt;	-	The Nature of Address Indicator (NAI) field
					defines the address range for a specific numbering
					plan. This is only used if GT Indicator is 0100.

					NAI VALUES

					Value		Description
					----------------------------------
					0		Unknown

					1		Subscriber Number

					2		Reserved for National use

					3		National Significant Number

					4		International Number

					5 to 127	Spare

                    This paramter is mandatory.
                    A Rule matches to an original address only if a value of
                    this parameter is the same in a rule and in an original
                    address. Values are compared only if GT type contains this
                    parameter (see GT Indicator description in
                    &lt;address-indicator&gt; parameter).
                    Most used values:
                    4 - nature-of-address - International

	&lt;digits&gt;		-	Specifies the string of digits divided into
					subsections using separator '/' depending on if
					the mask contains separator or not. The dialed
					digits should match with theses digits as per the
					rule specified below:

					DIGIT PATTERN

					Value		Description
					----------------------------------
					-		padding - ignored

					*		wildcard - matches any number of
							digits

					?		wildcard - matches exactly one
							digit

					/		separator used to split the digit
							pattern into sections.
							Each section can be processed
							differently as specified
							by the mask parameter.

                    This parameter is mandatory. It should contain the same
                    subsections count as the rule mask has.

	&lt;ruleType&gt;		-	Takes one of the following values defined below.

					RULE TYPE VALUES

					Value		Description
					----------------------------------
					solitary	Only one (primary) address is used
							for routing.
							(&lt;backup-address-id&gt; may be missed
							in this case).

					dominant	Both primary and backup
							addresses are used and mandatory.
							If both the addresses are
							available, the primary address is
							used for routing.

					loadshared	Both primary and backup
							addresses are used and mandatory.
							If both the addresses are
							available, either primary or
							backup address is used for
							routing.
							The &lt;loadsharing-algorithm&gt; should
							be configured in this case.

					broadcast	Both primary and backup addresses
							are used and are mandatory. All
							messages are routed to both
							addresses.

	&lt;primary-address-id&gt;	-	Identifies the SCCP Address used as the primary
					translation.


	&lt;backup-address-id&gt;	-	Identifies the SCCP Address used as the backup
					translation in case the pointcode specified by the
					primary address is not available. Backup address
					is used if &lt;ruleType&gt; is not "solitary".

	&lt;loadsharing-algorithm&gt;	-	This parameter is mandatory if &lt;ruleType&gt; is
					"loadshared". The Loadsharing algorithm is
					configured here. Possible values of the parameter
					are:

					LOAD SHARING ALGORITHM VALUES

					Value		Description
					----------------------------------
					bit4 		if( (SLS &amp; 0x10) == 0 )
							&lt;route to primary&gt; else
							&lt;route to backup&gt;

							This algorithm is the best if all
							traffic is local (mobicents stack)
							originated

					bit3		if( (SLS &amp; 0x08) == 0 )
							&lt;route to primary&gt; else
							&lt;route to backup&gt;
							This algorithm can be used if not
							all traffic is local
							(mobicents stack) originated.
							But only 8 links are acceptable in
							both linksets.

	&lt;new-callingPartyAddress-id&gt;
				-	This address will replace the
					callingPartyAddresses of messages that fit a Rule.

	&lt;originationType&gt;	-	Takes one of the following values defined below.
					If the parameter is not defined, rule applies to
					all messages regardless of their origination.

					ORIGINATION TYPE VALUES

					Value			Description
					-------------------------------------
					localOriginated		If this parameter is
								"localOriginated", then a
								rule applies only for
								messages originating from
								local SCCP users
								(for example a local
								TCAP stack).

					remoteOriginated	If this parameter is
								"remoteOriginated", then a
								rule applies only for
								messages originating from
								SS7 network and not for
								messages originating from
								local SCCP users.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

    &lt;networkId&gt;     - A digital parameter that means to which virtual SS7 network
                    belongs a Rule. If this parameter is skipped - networkId will
                    be set to "0" when a Rule creation.
                    Refer &lt;xref linkend="design_multitenancy"/&gt;.

   &lt;calling-address-indicator&gt;
               -   Address indicator for calling address matching.
                   See above address-indicator

   &lt;calling-point-code&gt;
               -   Pointcode of calling sccp address. MTP Signaling Point Code.
                   This is ignored if Bit '0' of address-indicator is not set.

   &lt;calling-subsystem-number&gt;
               -   This is ignored if Bit '1' of address-indicator is
                   not set.

   &lt;calling-translation-type&gt;
               -   This is ignored if GT Indicator is 0000 or 0001.
                   See &lt;translation-type&gt; above for more details.

   &lt;calling-numbering-plan&gt;
               -   A digital parameter that specifies to which virtual SS7
                   network this rule belongs. If this parameter
                   is skipped - networkId will be set to "0" by default.

   &lt;calling-nature-of-address-indicator&gt;
               -   The Nature of Address Indicator (NAI) field
                   defines the address range for a specific numbering
                   plan. This is only used if GT Indicator is 0100.

    &lt;calling-digits-pattern&gt;
               -   Specifies the string of digits for pattern matching.
                   There is no mask for calling digits, hence the division separator is ignored.
                   See above &lt;digits&gt; for more information on pattern matching.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rule_delete"><a class="anchor" href="#_managing_sccp_rule_delete"></a>7.4.19. Delete a Rule</h4>
<div class="sect4">
<h5 id="_managing_sccp_rule_delete_cli"><a class="anchor" href="#_managing_sccp_rule_delete_cli"></a>7.4.19.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a Rule by issuing the command <code>sccp rule delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rule delete

SYNOPSIS
	sccp rule delete &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to remove a previously defined Rule.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	The identifier of the Rule that is being deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp rule delete 1

	The above command will delete the Rule identified by the number '1'.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rule_delete_gui"><a class="anchor" href="#_managing_sccp_rule_delete_gui"></a>7.4.19.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a Rule using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'Rules' tab in the SCCP Management Unit window and locate the row corresponding to the Rule you wish to delete.</p>
</li>
<li>
<p>In the row corresponding to the identified Rule, click on the red 'x' button in the actions column to delete that Rule.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rsp_show"><a class="anchor" href="#_managing_sccp_rsp_show"></a>7.4.20. View all configured Remote Signaling Points (RSP)</h4>
<div class="sect4">
<h5 id="_managing_sccp_rsp_show_cli"><a class="anchor" href="#_managing_sccp_rsp_show_cli"></a>7.4.20.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured Remote Signaling Points by issuing the command <code>sccp rsp show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rsp show

SYNOPSIS
	sccp rsp show id &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all configured Remote Signaling Points.

	If an &lt;id&gt; is specified in the command, it will only display the details of the
	Remote Signaling Point identified by the value of the 'id' specified.

PARAMETERS

	Optional Parameters

	&lt;id&gt;		-	The id of the Remote Signaling Point whose details are
				to be displayed. If this parameter is not specified, the
				details of all configured Remote Signaling Points will be
				displayed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rsp_show_gui"><a class="anchor" href="#_managing_sccp_rsp_show_gui"></a>7.4.20.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCCP Management unit and switch to the 'RSP' tab.
Here you can view a list of all the configured Remote Signaling Pointcodes.
Every correctly configured RSP will be displayed in a row along with the defined values.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rsp_create"><a class="anchor" href="#_managing_sccp_rsp_create"></a>7.4.21. Create a new Remote Signaling Pointcode</h4>
<div class="sect4">
<h5 id="_managing_sccp_rsp_create_cli"><a class="anchor" href="#_managing_sccp_rsp_create_cli"></a>7.4.21.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new RSP by issuing the command <code>sccp rsp create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rsp create

SYNOPSIS
	sccp rsp create &lt;id&gt; &lt;remote-spc&gt; &lt;rspc-flag&gt; &lt;mask&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to define a new Remote Signaling Point. Each remote signaling
	point that SCCP can communicate with must be configured using this command.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	A unique number to identify this
					Remote Signaling Point.

	&lt;remote-spc&gt;		-	The Remote Signaling Point

	&lt;rspc-flag&gt;		-	32 bit value. Not used for now.
					Reserved for future

	&lt;mask&gt;			-	32 bit value. Not used for now.
					Reserved for future

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp rsp create 1 6477 0 0</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rsp_create_gui"><a class="anchor" href="#_managing_sccp_rsp_create_gui"></a>7.4.21.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new RSP using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'RSP' tab in the SCCP Management window and click on the 'Create RSP' button.
This will launch a new pop-up 'Create Remote Signaling Pointcode'.</p>
</li>
<li>
<p>In the 'Create Remote Signaling Pointcode' pop-up, add details of the new RSP being defined.
You must ensure that you fill in all the mandatory parameters.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new RSP will be created with parameters as specified.
If there is an error in creating the RSP then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Remote Signaling Pointcode' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rsp_modify"><a class="anchor" href="#_managing_sccp_rsp_modify"></a>7.4.22. Modify a Remote Signaling Pointcode</h4>
<div class="sect4">
<h5 id="_managing_sccp_rsp_modify_cli"><a class="anchor" href="#_managing_sccp_rsp_modify_cli"></a>7.4.22.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify the values of a RSP by issuing the command <code>sccp rsp modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rsp modify

SYNOPSIS
	sccp rsp modify &lt;id&gt; remote-spc &lt;remote-spc&gt; rspc-flag &lt;rspc-flag&gt; mask &lt;mask&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to modify the values of a Remote Signaling Point previously
	defined.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	Identifier of the Remote Signaling Point to be
					modified.

	&lt;remote-spc&gt;		-	The Remote Signaling Point

	&lt;rspc-flag&gt;		-	32 bit value. Not used for now.
					Reserved for future

	&lt;mask&gt;			-	32 bit value. Not used for now.
					Reserved for future

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rsp_delete"><a class="anchor" href="#_managing_sccp_rsp_delete"></a>7.4.23. Delete a Remote Signaling Pointcode</h4>
<div class="sect4">
<h5 id="_managing_sccp_rsp_delete_cli"><a class="anchor" href="#_managing_sccp_rsp_delete_cli"></a>7.4.23.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a RSP by issuing the command <code>sccp rsp delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rsp delete

SYNOPSIS
	sccp rsp delete &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete a Remote Signaling Point.

PARAMETERS

	Standard Parameters

	&lt;id&gt;		-	The identifier of the Remote Signaling Point that is being
				deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp rsp delete 1

	The above command will delete the Remote Signaling Point identified by the
	number '1'.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rsp_delete_gui"><a class="anchor" href="#_managing_sccp_rsp_delete_gui"></a>7.4.23.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a RSP using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'RSP' tab in the SCCP Management Unit window and locate the row corresponding to the RSP you wish to delete.</p>
</li>
<li>
<p>In the row corresponding to the identified RSP, click on the red 'x' button in the actions column to delete that RSP.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rss_show"><a class="anchor" href="#_managing_sccp_rss_show"></a>7.4.24. View all configured Remote Sub-Systems (RSS)</h4>
<div class="sect4">
<h5 id="_managing_sccp_rss_show_cli"><a class="anchor" href="#_managing_sccp_rss_show_cli"></a>7.4.24.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured Remote Sub-Systems by issuing the command <code>sccp rss show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rss show

SYNOPSIS
	sccp rss show id &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all configured Remote Sub-Systems.
	If an &lt;id&gt; is specified in the command, it will only display the details of the
	Remote Sub-System identified by the value of the 'id' specified.

PARAMETERS

	Optional Parameters

	&lt;id&gt;		-	The id of the Remote Sub-System whose details are to be
				displayed. If this parameter is not specified, the details
				of all configured Remote Sub-Systems will be displayed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rss_show_gui"><a class="anchor" href="#_managing_sccp_rss_show_gui"></a>7.4.24.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCCP Management unit and switch to the 'RSS' tab.
Here you can view a list of all the configured Remote Sub-Systems.
Every correctly configured RSS will be displayed in a row along with the defined values.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rss_create"><a class="anchor" href="#_managing_sccp_rss_create"></a>7.4.25. Create a new Remote Sub-System</h4>
<div class="sect4">
<h5 id="_managing_sccp_rss_create_cli"><a class="anchor" href="#_managing_sccp_rss_create_cli"></a>7.4.25.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new RSS by issuing the command <code>sccp rss create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rss create

SYNOPSIS
	sccp rss create &lt;id&gt; &lt;remote-spc&gt; &lt;remote-ssn&gt; &lt;rss-flag&gt;
	&lt;mark-prohibited-when-spc-resuming&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to define a new Remote Sub-System. Each Remote Sub-System
	that SCCP can communicate with must be configured using this command. You must
	ensure that the Remote Signaling Point is configured prior to issuing this
	command.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	A unique number to identify this Remote
					Sub-System.

	&lt;remote-spc&gt;		-	The Remote Signaling Point where this Remote
					Sub-System is being deployed.

	&lt;remote-ssn&gt;		-	The Remote Sub-System number.

	&lt;rss-flag&gt;		-	32 bit value. Not used for now.
					Reserved for future.

	Optional Parameters

	&lt;mark-prohibited-when-spc-resuming&gt;
				-	Possible value: prohibitedWhenSpcResuming.
					When this parameter is specified, the configured
					subsystem is marked as prohibited when its
					corresponding signaling point code has been
					resumed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp rss create 1 6477 8 0 prohibitedWhenSpcResuming</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rss_create_gui"><a class="anchor" href="#_managing_sccp_rss_create_gui"></a>7.4.25.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new RSS using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'RSS' tab in the SCCP Management window and click on the 'Create RSS' button.
This will launch a new pop-up 'Create Remote Sub-System'.</p>
</li>
<li>
<p>In the 'Create Remote Sub-System' pop-up, add details of the new RSS being defined.
You must ensure that you fill in all the mandatory parameters.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new RSS will be created with parameters as specified.
If there is an error in creating the RSS then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Remote Sub-System' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rss_modify"><a class="anchor" href="#_managing_sccp_rss_modify"></a>7.4.26. Modify a Remote Signaling Sub-System</h4>
<div class="sect4">
<h5 id="_managing_sccp_rss_modify_cli"><a class="anchor" href="#_managing_sccp_rss_modify_cli"></a>7.4.26.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify the values of a RSS by issuing the command <code>sccp rss modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rss modify

SYNOPSIS
	sccp rss modify &lt;id&gt; remote-spc &lt;remote-spc&gt; remote-ssn &lt;remote-ssn&gt; rss-flag &lt;rss-flag&gt;
	prohibitedwhenspcresuming &lt;mark-prohibited-when-spc-resuming&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to modify the values of a Remote Sub-System previously
	defined.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	Identifier of the Remote Sub-System to be
					modified.

	Optional Parameters

	&lt;remote-spc&gt;		-	The Remote Signaling Point where this Remote
					Sub-System is deployed.

	&lt;remote-ssn&gt;		-	The Remote Sub-System number.

	&lt;rss-flag&gt;		-	32 bit value. Not used for now.
					Reserved for future.

	&lt;mark-prohibited-when-spc-resuming&gt;
				-	Possible value: prohibitedWhenSpcResuming.
					When this parameter is specified, the configured
					subsystem is marked as prohibited when its
					corresponding signaling point code has been
					resumed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_rss_delete"><a class="anchor" href="#_managing_sccp_rss_delete"></a>7.4.27. Delete a Remote Signaling Sub-System</h4>
<div class="sect4">
<h5 id="_managing_sccp_rss_delete_cli"><a class="anchor" href="#_managing_sccp_rss_delete_cli"></a>7.4.27.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a RSS by issuing the command <code>sccp rss delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp rss delete

SYNOPSIS
	sccp rss delete &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete a Remote Sub-System.

PARAMETERS

	Standard Parameters

	&lt;id&gt;		-	The identifier of the Remote Sub-System that is being
				deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp rss delete 1

	The above command will delete the Remote Sub-System identified by the number '1'.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_rss_delete_gui"><a class="anchor" href="#_managing_sccp_rss_delete_gui"></a>7.4.27.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a RSS using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'RSS' tab in the SCCP Management Unit window and locate the row corresponding to the RSS you wish to delete.</p>
</li>
<li>
<p>In the row corresponding to the identified RSS, click on the red 'x' button in the actions column to delete that RSS.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_lmr_show"><a class="anchor" href="#_managing_sccp_lmr_show"></a>7.4.28. View all configured Long Message Rules (LMR)</h4>
<div class="sect4">
<h5 id="_managing_sccp_lmr_show_cli"><a class="anchor" href="#_managing_sccp_lmr_show_cli"></a>7.4.28.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured Long Message Rules by issuing the command <code>sccp lmr show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp lmr show

SYNOPSIS
	sccp lmr show id &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all configured Long Message Rules.
	If an &lt;id&gt; is specified in the command, it will only display the details of the
	Long Message Rule identified by the value of the 'id' specified.

PARAMETERS

	Optional Parameters

	&lt;id&gt;			-	The id of the Long Message Rule whose details are to be
					displayed. If this parameter is not specified, the details
					of all configured Long Message Rules will be displayed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_lmr_show_gui"><a class="anchor" href="#_managing_sccp_lmr_show_gui"></a>7.4.28.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCCP Management unit and switch to the 'LMR' tab.
Here you can view a list of all the configured Long Message Rules.
Every correctly configured LMR will be displayed in a row along with the defined values.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_lmr_create"><a class="anchor" href="#_managing_sccp_lmr_create"></a>7.4.29. Create a new Long Message Rule</h4>
<div class="sect4">
<h5 id="_managing_sccp_lmr_create_cli"><a class="anchor" href="#_managing_sccp_lmr_create_cli"></a>7.4.29.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new LMR by issuing the command <code>sccp lmr create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp lmr create

SYNOPSIS
	sccp lmr create &lt;id&gt; &lt;first-spc&gt; &lt;last-spc&gt; &lt;long-message-rule-type&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to define a new Long Message Rule. Long message rules specify
	which message types (UDT/XUDT/LUDT) will be used for outgoing message encoding
	depends on dpc. If long message rules are not configured only UDT messages
	will be used.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	A unique number to identify this
					Long Message Rule.

	&lt;first-spc&gt;		-	The first value of the remote signaling
					point code range, for which this Long message Rule
					will apply.

	&lt;last-spc&gt;		-	The last value of the remote signaling point code
					range. If Long message rule specifies a single
					signaling point code, this value must be equal to
					first-spc.

	&lt;long-message-rule-type&gt;-	Message types used for the remote signaling
					point codes range.
					Possible values : udt, xudt, ludt and ludt_segm.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp lmr create 1 201 201 xudt

	sccp lmr create 2 230 239 udt</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_lmr_create_gui"><a class="anchor" href="#_managing_sccp_lmr_create_gui"></a>7.4.29.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new LMR using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'LMR' tab in the SCCP Management window and click on the 'Create LMR' button.
This will launch a new pop-up 'Create Long Message Rule'.</p>
</li>
<li>
<p>In the 'Create Long Message Rule' pop-up, add details of the new LMR being defined.
You must ensure that you fill in all the mandatory parameters.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new LMR will be created with parameters as specified.
If there is an error in creating the LMR then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Long Message Rule' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_lmr_modify"><a class="anchor" href="#_managing_sccp_lmr_modify"></a>7.4.30. Modify a Long Message Rule</h4>
<div class="sect4">
<h5 id="_managing_sccp_lmr_modify_cli"><a class="anchor" href="#_managing_sccp_lmr_modify_cli"></a>7.4.30.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify the values of a LMR by issuing the command <code>sccp lmr modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp lmr modify

SYNOPSIS
	sccp lmr modify &lt;id&gt; first-spc &lt;first-spc&gt; last-spc &lt;last-spc&gt; rule-type &lt;long-message-rule-type&gt;
	stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to modify the values of a Long Message Rule previously
	defined.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	Identifier of the Long Message Rule to be
					modified.

	Optional Parameters
	&lt;first-spc&gt;		-	The first value of the remote signaling
					point code range, for which this Long message Rule
					will apply.

	&lt;last-spc&gt;		-	The last value of the remote signaling point code
					range. If Long message rule specifies a single
					signaling point code, this value must be equal to
					first-spc.

	&lt;long-message-rule-type&gt;-	Message types used for the remote signaling point
					codes range.
					Possible values : udt, xudt, ludt and ludt_segm.
	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_lmr_delete"><a class="anchor" href="#_managing_sccp_lmr_delete"></a>7.4.31. Delete a Long Message Rule</h4>
<div class="sect4">
<h5 id="_managing_sccp_lmr_delete_cli"><a class="anchor" href="#_managing_sccp_lmr_delete_cli"></a>7.4.31.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a LMR by issuing the command <code>sccp lmr delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp lmr delete

SYNOPSIS
	sccp lmr delete &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete a Long Message Rule.

PARAMETERS

	Standard Parameters

	&lt;id&gt;		-	The identifier of the Long Message Rule that is being
				deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp lmr delete 1

	The above command will delete the Long Message Rule identified by the number '1'.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_lmr_delete_gui"><a class="anchor" href="#_managing_sccp_lmr_delete_gui"></a>7.4.31.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a Long Message Rule using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'LMR' tab in the SCCP Management Unit window and locate the row corresponding to the LMR you wish to delete.</p>
</li>
<li>
<p>In the row corresponding to the identified LMR, click on the red 'x' button in the actions column to delete that LMR.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_csp_show"><a class="anchor" href="#_managing_sccp_csp_show"></a>7.4.32. View all configured Concerned Signaling Point Codes (CSP)</h4>
<div class="sect4">
<h5 id="_managing_sccp_csp_show_cli"><a class="anchor" href="#_managing_sccp_csp_show_cli"></a>7.4.32.1. Using CLI</h5>
<div class="paragraph">
<p>You can view the details of all configured Concerned Signaling Point Codes by issuing the command <code>sccp csp show</code> as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp csp show

SYNOPSIS
	sccp csp show id &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to view the details of all configured Concerned Signaling
	Point Codes. If an &lt;id&gt; is specified in the command, it will only display the
	details of the Concerned Signaling Point Code identified by the value of the 'id'
	specified.

PARAMETERS

	Optional Parameters

	&lt;id&gt;			-	The id of the Concerned Signaling Point Code whose details
					are to be displayed. If this parameter is not specified,
					the details of all configured Concerned Signaling Point
					Codes will be displayed.

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_csp_show_gui"><a class="anchor" href="#_managing_sccp_csp_show_gui"></a>7.4.32.2. Using GUI</h5>
<div class="paragraph">
<p>Navigate to the specific SCCP Management unit and switch to the 'CSP' tab.
Here you can view a list of all the configured Concerned Signaling Point Code.
Every correctly configured CSP will be displayed in a row along with the defined values.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_csp_create"><a class="anchor" href="#_managing_sccp_csp_create"></a>7.4.33. Create a new Concerned Signaling Point Code</h4>
<div class="sect4">
<h5 id="_managing_sccp_csp_create_cli"><a class="anchor" href="#_managing_sccp_csp_create_cli"></a>7.4.33.1. Using CLI</h5>
<div class="paragraph">
<p>You can create a new CSP by issuing the command <code>sccp csp create</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp csp create

SYNOPSIS
	sccp csp create &lt;id&gt; &lt;spc&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to define a new Concerned Signaling Point Code. Concerned
	signaling point codes define a DPC list that will be notified when local SSN is
	registered (SSA messages) or unregistered (SSP messages).

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	A unique number to identify this
					Concerned Signaling Point Code.

	&lt;spc&gt;			-	The Remote Signaling Point Code,
					which will be notified.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.


EXAMPLES
	sccp csp create 1 201

	sccp csp create 2 202</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_csp_create_gui"><a class="anchor" href="#_managing_sccp_csp_create_gui"></a>7.4.33.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Create a new CSP using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'CSP' tab in the SCCP Management window and click on the 'Create CSP' button.
This will launch a new pop-up 'Create Concerned Signaling Point Code'.</p>
</li>
<li>
<p>In the 'Create Concerned Signaling Point Code' pop-up, add details of the new CSP being defined.
You must ensure that you fill in all the mandatory parameters.
For definition of these parameters, please refer to the description of the CLI command for the same in the preceding section.</p>
</li>
<li>
<p>Verify the details entered and then click on the 'Create' button.
A new CSP will be created with parameters as specified.
If there is an error in creating the CSP then you will find the details of the error in the Management Console Log section below.</p>
</li>
<li>
<p>Click on the 'Close' button to close the 'Create Concerned Signaling Point Code' pop-up.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_csp_modify"><a class="anchor" href="#_managing_sccp_csp_modify"></a>7.4.34. Modify a Concerned Signaling Point Code</h4>
<div class="sect4">
<h5 id="_managing_sccp_csp_modify_cli"><a class="anchor" href="#_managing_sccp_csp_modify_cli"></a>7.4.34.1. Using CLI</h5>
<div class="paragraph">
<p>You can modify the values of a CSP by issuing the command <code>sccp csp modify</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp csp modify

SYNOPSIS
	sccp csp modify &lt;id&gt; &lt;spc&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to modify the values of a Concerned Signaling Point Code
	previously defined.

PARAMETERS

	Standard Parameters

	&lt;id&gt;			-	Identifier of the Concerned Signaling Point Code
					to be modified.

	&lt;spc&gt;			-	The Remote Signaling Point Code, which will be
					notified.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_sccp_csp_delete"><a class="anchor" href="#_managing_sccp_csp_delete"></a>7.4.35. Delete a Concerned Signaling Point Code</h4>
<div class="sect4">
<h5 id="_managing_sccp_csp_delete_cli"><a class="anchor" href="#_managing_sccp_csp_delete_cli"></a>7.4.35.1. Using CLI</h5>
<div class="paragraph">
<p>You can delete a CSP by issuing the command <code>sccp csp delete</code> with appropriate parameters as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	sccp csp delete

SYNOPSIS
	sccp csp delete &lt;id&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	This command is used to delete a Concerned Signaling Point Code.

PARAMETERS

	Standard Parameters

	&lt;id&gt;		-	The identifier of the Concerned Signaling Point Code
				that is being deleted.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	sccp csp delete 1

	The above command will delete the Concerned Signaling Point Code identified by the
	number '1'.</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managing_sccp_csp_delete_gui"><a class="anchor" href="#_managing_sccp_csp_delete_gui"></a>7.4.35.2. Using GUI</h5>
<div class="olist arabic">
<div class="title">Procedure: Delete a Concerned Signaling Point Code using GUI</div>
<ol class="arabic">
<li>
<p>Navigate to the 'CSP' tab in the SCCP Management Unit window and locate the row corresponding to the CSP you wish to delete.</p>
</li>
<li>
<p>In the row corresponding to the identified CSP, click on the red 'x' button in the actions column to delete that CSP.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_tcap"><a class="anchor" href="#_managing_tcap"></a>7.5. TCAP Management</h3>
<div class="paragraph">
<p>Transaction Capabilities Application Part  , from ITU-T recommendations Q.771-Q.775 or ANSI T1.114 is a protocol for Signalling System 7 networks.
Its primary purpose is to facilitate multiple concurrent dialogs between the same sub-systems on the same machines, using Transaction IDs to differentiate these, similar  to the way TCP ports facilitate multiplexing connections between the same IP addresses on the Internet.</p>
</div>
<div class="sect3">
<h4 id="_managing_tcap_using_cli"><a class="anchor" href="#_managing_tcap_using_cli"></a>7.5.1. Using CLI</h4>
<div class="paragraph">
<p>You can manage all TCAP stack properties through the Command Line Interface by using the <code>tcap</code> command.</p>
</div>
</div>
<div class="sect3">
<h4 id="_managing_tcap_using_gui"><a class="anchor" href="#_managing_tcap_using_gui"></a>7.5.2. Using GUI</h4>
<div class="paragraph">
<p>The GUI will allow you to manage your TCAP configurations efficiently using a user-friendly interface.
Open a Web Browser and navigate to <a href="http://localhost:8080/jss7-management-console/" class="bare">http://localhost:8080/jss7-management-console/</a>. Click on the 'TCAP' link in the left panel.
The main panel will display the names of all configured TCAP Management units.
To configure or view the settings of a particular TCAP Management Unit  you must click on the name of that unit.
The GUI will look similar to the figure below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_TCAP_Management.png" alt="GUI TCAP Management">
</div>
<div class="title">Figure 25. GUI - TCAP Management</div>
</div>
<div class="paragraph">
<p>The first tab will display the properties of the TCAP Management unit.
These details displayed here are fetched from the XML descriptor file <em class="path">jboss-beans.xml</em>, which is  located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where  <code class="app">profile_name</code> is the server profile name.
These properties can be modified here in the GUI.
To modify them you must click the pencil, change value and save.
The GUI will then display the modified values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tcap_properties"><a class="anchor" href="#_tcap_properties"></a>7.5.3. TCAP stack properties</h4>
<div class="sect4">
<h5 id="_tcap_property_dialogidletimeout"><a class="anchor" href="#_tcap_property_dialogidletimeout"></a>7.5.3.1. Dialog Idle Timeout</h5>
<div class="sect5">
<h6 id="_tcap_property_dialogidletimeout_cli"><a class="anchor" href="#_tcap_property_dialogidletimeout_cli"></a>7.5.3.1.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'dialogidletimeout' by issuing the command <code>tcap set dialogidletimeout</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get dialogidletimeout</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set dialogidletimeout

SYNOPSIS
	tcap set dialogidletimeout &lt;dialogidletimeout&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets millisecond value for dialog timeout. It specifies how long
	dialog can be idle - not receive/send any messages.
	When a timeout occurs the method `TCListener.onDialogTimeout()` will be
	invoked. If a TCAP-User does not invoke `Dialog.keepAlive()` inside
	the method `TCListener.onDialogTimeout()`, the TCAP Dialog will be
	released.

PARAMETERS

	Standard Parameters

	&lt;dialogidletimeout&gt;	-	Timeout in milliseconds.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set dialogidletimeout 30000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_dialogidletimeout_gui"><a class="anchor" href="#_tcap_property_dialogidletimeout_gui"></a>7.5.3.1.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Dialog Idle Timeout' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_dialogidrangeend"><a class="anchor" href="#_tcap_property_dialogidrangeend"></a>7.5.3.2. Dialog Id Range End</h5>
<div class="paragraph">
<p>TCAP stack can be configured to use a range of local DialogId values.
You may install a set of TCAP Stack instances with different DialogId ranges.
These ranges can be used for loadsharing of SS7 traffic between the TCAP instances.
All the outgoing Dialogs will have id starting with <code>dialogIdRangeStart</code>.
This value of <code>dialogIdRangeStart</code> cannt be greater than <code>dialogIdRangeEnd</code>.
In addition, the value of <code>dialogIdRangeEnd - dialogIdRangeStart</code> must always be less than the value of <code>maxDialogs</code>.</p>
</div>
<div class="sect5">
<h6 id="_tcap_property_dialogidrangeend_cli"><a class="anchor" href="#_tcap_property_dialogidrangeend_cli"></a>7.5.3.2.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'dialogidrangeend' by issuing the command <code>tcap set dialogidrangeend</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get dialogidrangeend</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set dialogidrangeend

SYNOPSIS
	tcap set dialogidrangeend &lt;dialogidrangeend&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	End of the range of the generated dialog ids. The id's used will be
	between dialogidrangestart and dialogidrangeend.

PARAMETERS

	Standard Parameters

	&lt;dialogidrangeend&gt;	-	Dialog id range end.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set dialogidrangeend 30000000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_dialogidrangeend_gui"><a class="anchor" href="#_tcap_property_dialogidrangeend_gui"></a>7.5.3.2.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Dialog Id Range End' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_dialogidrangestart"><a class="anchor" href="#_tcap_property_dialogidrangestart"></a>7.5.3.3. Dialog Id Range Start</h5>
<div class="sect5">
<h6 id="_tcap_property_dialogidrangestart_cli"><a class="anchor" href="#_tcap_property_dialogidrangestart_cli"></a>7.5.3.3.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'dialogidrangestart' by issuing the command <code>tcap set dialogidrangestart</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get dialogidrangestart</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set dialogidrangestart

SYNOPSIS
	tcap set dialogidrangestart &lt;dialogidrangestart&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Start of the range of the generated dialog ids. The id's used will be
	between dialogidrangestart and dialogidrangeend.

PARAMETERS

	Standard Parameters

	&lt;dialogidrangestart&gt;	-	Dialog id range start.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set dialogidrangestart 1</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_dialogidrangestart_gui"><a class="anchor" href="#_tcap_property_dialogidrangestart_gui"></a>7.5.3.3.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Dialog Id Range Start' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_donotsendprotocolversion"><a class="anchor" href="#_tcap_property_donotsendprotocolversion"></a>7.5.3.4. Do Not Send Protocol Version</h5>
<div class="sect5">
<h6 id="_tcap_property_donotsendprotocolversion_cli"><a class="anchor" href="#_tcap_property_donotsendprotocolversion_cli"></a>7.5.3.4.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'donotsendprotocolversion' by issuing the command <code>tcap set donotsendprotocolversion</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get donotsendprotocolversion</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set donotsendprotocolversion

SYNOPSIS
	tcap set donotsendprotocolversion &lt;true | false&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	If set to true Protocol Version is not send in User Data part of Dialog

PARAMETERS

	Standard Parameters

	&lt;donotsendprotocolversion&gt;	-	If true doesn't send the protocol version

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set donotsendprotocolversion false</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_donotsendprotocolversion_gui"><a class="anchor" href="#_tcap_property_donotsendprotocolversion_gui"></a>7.5.3.4.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Do Not Send Protocol Version' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_invoketimeout"><a class="anchor" href="#_tcap_property_invoketimeout"></a>7.5.3.5. Invoke Timeout</h5>
<div class="sect5">
<h6 id="_tcap_property_invoketimeout_cli"><a class="anchor" href="#_tcap_property_invoketimeout_cli"></a>7.5.3.5.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'invoketimeout' by issuing the command <code>tcap set invoketimeout</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get invoketimeout</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set invoketimeout

SYNOPSIS
	tcap set invoketimeout &lt;invoketimeout&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets the Invoke timeout for this invoke. This property specifies,
	by default, how long Invoke will wait for a response from a peer
	before a timeout occurs.
	If a TCAP-User does not specify a custom Invoke timeout when
	sending a new Invoke, this default value will be used for outgoing
	Invoke timeout. When this timeout occurs `TCListener.onInvokeTimeout()`
	will be invoked.
	invoketimeout should always be less than dialogidletimeout.
	This parameter affects if we use TCAP stack as the upperst level or
	we have implemented our own stack that reuses TCAP stack.
	Restcomm MAP and CAP stacks overrides this parameter at their levels
	and this parameter deos not affect these stacks.

PARAMETERS

	Standard Parameters

	&lt;invoketimeout&gt;		-	Sets the Invoke timeout in milliseconds

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set invoketimeout 30000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_invoketimeout_gui"><a class="anchor" href="#_tcap_property_invoketimeout_gui"></a>7.5.3.5.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Invoke Timeout' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_maxdialogs"><a class="anchor" href="#_tcap_property_maxdialogs"></a>7.5.3.6. Max Dialogs</h5>
<div class="sect5">
<h6 id="_tcap_property_maxdialogs_cli"><a class="anchor" href="#_tcap_property_maxdialogs_cli"></a>7.5.3.6.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'maxdialogs' by issuing the command <code>tcap set maxdialogs</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get maxdialogs</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set maxdialogs

SYNOPSIS
	tcap set maxdialogs &lt;maxdialogs&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	Sets the maximum number of dialogs allowed to be alive at a given
	time. If not set, a default value of 5000 dialogs will be used.
    If stack ranges provided, maximum number dialogs naturally cannot
    be greater than the provided range, thus, it will be normalized to
    range delta (end - start).

PARAMETERS

	Standard Parameters

	&lt;maxdialogs&gt;	-	Sets the maximum concurrent dialogs alive at any given
						point in time.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set maxdialogs 30000000</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_maxdialogs_gui"><a class="anchor" href="#_tcap_property_maxdialogs_gui"></a>7.5.3.6.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Max Dialogs' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_previewmode"><a class="anchor" href="#_tcap_property_previewmode"></a>7.5.3.7. Preview Mode</h5>
<div class="paragraph">
<p>You can modify the settings for the parameter 'previewmode' only when the TCAP Stack is not running.
In addition, this parameter cannot be modified through the CLI or GUI.
You will have to invoke the setter function directly from the source code.</p>
</div>
<div class="paragraph">
<p>If you are using the JBoss Application Server, then you can set this parameter by adding a property (as shown below) to the XML descriptor file <em class="path">jboss-beans.xml</em>, which is located at <em class="path">$JBOSS_HOME/server/profile_name/deploy/restcomm-ss7-service/META-INF</em>, where <code class="app">profile_name</code> is the server profile name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*Add property for the parameter 'previewmode' to jboss-beans.xml file and specify true or false*/
&lt;property name="previewMode"&gt;true&lt;/property&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The current settings of the parameter can be viewed in the GUI or by invoking the appropriate CLI command as described below.</p>
</div>
<div class="sect5">
<h6 id="_tcap_property_previewmode_cli"><a class="anchor" href="#_tcap_property_previewmode_cli"></a>7.5.3.7.1. Using CLI</h6>
<div class="paragraph">
<p>You can retrieve the current settings of the parameter 'previewmode' by issuing the command <code>sctp get previewmode</code>.
However as explained above, you cannot modify the settings through the CLI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap get previewmode

SYNOPSIS
	tcap get previewmode

DESCRIPTION
	This command is used to retrieve the current settings of the parameter
	'previewMode'. The 'previewMode' parameter is used for special processing
	mode.

	When Preview Mode is set to true:
	- In TCAP level the stack only listens for incoming messages and
	sends nothing.
	- Methods like send(), close(), sendComponent() and other such methods
	do nothing.
	- A TCAP Dialog is temporary. The TCAP Dialog is discarded after
	any incoming message like TC-BEGIN or TC-CONTINUE has been processed.
	- For any incoming messages (including TC-CONTINUE, TC-END, TC-ABORT) a new
	TCAP Dialog is created (and then deleted).
	- There are no timers and timeouts.

	The settings of this parameter can be modified only when the TCAP Stack is
	not running. To modify this parameter you must invoke the setter function
	directly from the code or if you are using the JBoss AS, you can add a
	property to the XML descriptor file jboss-beans.xml. You cannot change the
	settings through the CLI.</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_previewmode_gui"><a class="anchor" href="#_tcap_property_previewmode_gui"></a>7.5.3.7.2. Using GUI</h6>
<div class="paragraph">
<p>In the TCAP management page, you can view the current settings of the 'Preview Mode' property.
But as explained above, you cannot change the settings in the GUI.
For more details about this parameter, refer to the detailed description about the parameter in the above section for CLI.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_statisticsenabled"><a class="anchor" href="#_tcap_property_statisticsenabled"></a>7.5.3.8. Statistics Enabled</h5>
<div class="sect5">
<h6 id="_tcap_property_statisticsenabled_cli"><a class="anchor" href="#_tcap_property_statisticsenabled_cli"></a>7.5.3.8.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'statisticsenabled' by issuing the command <code>tcap set statisticsenabled</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get statisticsenabled</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set statisticsenabled

SYNOPSIS
	tcap set statisticsenabled &lt;true | false&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	If set to true, statistics is enabled. Its recommended to keep this off
	for better performance and enabled statistics only when needed.

PARAMETERS

	Standard Parameters

	&lt;statisticsenabled&gt;	-	If true, statistics is enabled

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set statisticsenabled false</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_statisticsenabled_gui"><a class="anchor" href="#_tcap_property_statisticsenabled_gui"></a>7.5.3.8.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Statistics Enabled' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_swaptcapidbytes"><a class="anchor" href="#_tcap_property_swaptcapidbytes"></a>7.5.3.9. Swap TCAP id bytes Enabled</h5>
<div class="sect5">
<h6 id="_tcap_property_swaptcapidbytes_cli"><a class="anchor" href="#_tcap_property_swaptcapidbytes_cli"></a>7.5.3.9.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'swaptcapidbytes' by issuing the command <code>tcap set swaptcapidbytes</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get swaptcapidbytes</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set swaptcapidbytes

SYNOPSIS
	tcap set swaptcapidbytes &lt;true | false&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	If set to true, swap tcap id bytes is enabled..

PARAMETERS

	Standard Parameters

	&lt;swaptcapidbytes&gt;	-	If true, swap tcap id bytes is enabled

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set swaptcapidbytes false</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_swaptcapidbytes_gui"><a class="anchor" href="#_tcap_property_swaptcapidbytes_gui"></a>7.5.3.9.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Swap tcapid bytes Enabled' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_executordelaythreshold"><a class="anchor" href="#_tcap_property_executordelaythreshold"></a>7.5.3.10. Thresholds for Executors congestion control</h5>
<div class="sect5">
<h6 id="_tcap_property_executordelaythreshold_cli"><a class="anchor" href="#_tcap_property_executordelaythreshold_cli"></a>7.5.3.10.1. Using CLI</h6>
<div class="paragraph">
<p>TCAP stack and lower level stacks measure delays between the time when an incoming message has come from a peer for processing and scheduled for execution and the time when the execution of the message starts. The more time this delay the more we have a congestion level at Thread executors side.</p>
</div>
<div class="paragraph">
<p>The delay thresholds when the congestion level is increased to level 1, 2 and 3 is configured by parameters executordelaythreshold_1, executordelaythreshold_2 and executordelaythreshold_3 (in seconds).</p>
</div>
<div class="paragraph">
<p>The delay thresholds when the congestion level is decreased to level 0, 1, and 2 is configured by parameters executorbacktonormaldelaythreshold_1, executorbacktonormaldelaythreshold_2 and executorbacktonormaldelaythreshold_3 (in seconds).</p>
</div>
<div class="paragraph">
<p>You can set the thresholds (in seconds) by issuing the commands <code>tcap set executordelaythreshold_1</code>, <code>tcap set executordelaythreshold_2</code>, <code>tcap set executordelaythreshold_3</code>, <code>tcap set executorbacktonormaldelaythreshold_1</code>, <code>tcap set executorbacktonormaldelaythreshold_2</code> or <code>tcap set executorbacktonormaldelaythreshold_3</code> with appropriate parameters as described below. You can verify this by issuing the commands <code>tcap get executordelaythreshold_1</code>, <code>tcap get executordelaythreshold_2</code>, <code>tcap get executordelaythreshold_3</code>, <code>tcap get executorbacktonormaldelaythreshold_1</code>, <code>tcap get executorbacktonormaldelaythreshold_2</code> or <code>tcap get executorbacktonormaldelaythreshold_3</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set executordelaythreshold_1
	tcap set executordelaythreshold_2
	tcap set executordelaythreshold_3
	tcap set executorbacktonormaldelaythreshold_1
	tcap set executorbacktonormaldelaythreshold_2
	tcap set executorbacktonormaldelaythreshold_3

SYNOPSIS
	tcap set executordelaythreshold_1 &lt;executordelaythreshold_1&gt; stackname &lt;stack-name&gt;
	tcap set executordelaythreshold_2 &lt;executordelaythreshold_2&gt; stackname &lt;stack-name&gt;
	tcap set executordelaythreshold_3 &lt;executordelaythreshold_3&gt; stackname &lt;stack-name&gt;
	tcap set executorbacktonormaldelaythreshold_1 &lt;executorbacktonormaldelaythreshold_1&gt; stackname &lt;stack-name&gt;
	tcap set executorbacktonormaldelaythreshold_2 &lt;executorbacktonormaldelaythreshold_2&gt; stackname &lt;stack-name&gt;
	tcap set executorbacktonormaldelaythreshold_3 &lt;executorbacktonormaldelaythreshold_3&gt; stackname &lt;stack-name&gt;

DESCRIPTION
    For Thresholds Executors congestion control stack needs to have 3 thresholds
	- delays in seconds between the time when an incoming message has come from a peer
	and scheduled for execution and the time when the execution of the message starts
	(3 levels - 1, 2, 3). If a delay time in seconds becomes more then value for
	level 1, 2 or 3, the Executors' congestion level becomes to 1, 2 or 3.
	Default values:
	for executordelaythreshold_1 is 1 second
	for executordelaythreshold_2 is 6 seconds
	for executordelaythreshold_3 is 12 seconds
	for executorbacktonormaldelaythreshold_1 is 0.5 seconds
	for executorbacktonormaldelaythreshold_2 is 3 seconds
	for executorbacktonormaldelaythreshold_3 is 8 seconds

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set executordelaythreshold_1 1
	tcap set executordelaythreshold_2 6
	tcap set executordelaythreshold_3 12
	tcap set executorbacktonormaldelaythreshold_1 0.5
	tcap set executorbacktonormaldelaythreshold_2 3
	tcap set executorbacktonormaldelaythreshold_3 8</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_executordelaythreshold_gui"><a class="anchor" href="#_tcap_property_executordelaythreshold_gui"></a>7.5.3.10.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Executor congestion Threshold 1' property or other needed property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_memorythreshold"><a class="anchor" href="#_tcap_property_memorythreshold"></a>7.5.3.11. Thresholds for Memory congestion control</h5>
<div class="sect5">
<h6 id="_tcap_property_memorythreshold_cli"><a class="anchor" href="#_tcap_property_memorythreshold_cli"></a>7.5.3.11.1. Using CLI</h6>
<div class="paragraph">
<p>TCAP stack and lower level stacks measure the percentage of message usage. The more memory we use the more we have a congestion level at memory resourse consuming.</p>
</div>
<div class="paragraph">
<p>The memory thresholds when the congestion level is increased to level 1, 2 and 3 is configured by parameters memorythreshold_1, memorythreshold_2 and memorythreshold_3 (in percents).</p>
</div>
<div class="paragraph">
<p>The memory thresholds when the congestion level is decreased to level 0, 1, and 2 is configured by parameters backtonormalmemorythreshold_1, backtonormalmemorythreshold_2 and backtonormalmemorythreshold_3 (in percents).</p>
</div>
<div class="paragraph">
<p>You can set the thresholds (in percents) by issuing the commands <code>tcap set memorythreshold_1</code>, <code>tcap set memorythreshold_2</code>, <code>tcap set memorythreshold_3</code>, <code>tcap set backtonormalmemorythreshold_1</code>, <code>tcap set backtonormalmemorythreshold_2</code> or <code>tcap set backtonormalmemorythreshold_3</code> with appropriate parameters as described below. You can verify this by issuing the commands <code>tcap get memorythreshold_1</code>, <code>tcap get memorythreshold_2</code>, <code>tcap get memorythreshold_3</code>, <code>tcap get backtonormalmemorythreshold_1</code>, <code>tcap get backtonormalmemorythreshold_2</code> or <code>tcap get backtonormalmemorythreshold_3</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set memorythreshold_1
	tcap set memorythreshold_2
	tcap set memorythreshold_3
	tcap set backtonormalmemorythreshold_1
	tcap set backtonormalmemorythreshold_2
	tcap set backtonormalmemorythreshold_3

SYNOPSIS
	tcap set memorythreshold_1 &lt;memorythreshold_1&gt; stackname &lt;stack-name&gt;
	tcap set memorythreshold_2 &lt;memorythreshold_2&gt; stackname &lt;stack-name&gt;
	tcap set memorythreshold_3 &lt;memorythreshold_3&gt; stackname &lt;stack-name&gt;
	tcap set backtonormalmemorythreshold_1 &lt;backtonormalmemorythreshold_1&gt; stackname &lt;stack-name&gt;
	tcap set backtonormalmemorythreshold_2 &lt;backtonormalmemorythreshold_2&gt; stackname &lt;stack-name&gt;
	tcap set backtonormalmemorythreshold_3 &lt;backtonormalmemorythreshold_3&gt; stackname &lt;stack-name&gt;

DESCRIPTION
    For Memory congestion control stack needs to have 3 thresholds
	- the percentage of memory usage (3 levels - 1, 2, 3). If memory usage becomes more then value for
	level 1, 2 or 3, the Memory congestion level becomes to 1, 2 or 3.
	Default values:
	for memorythreshold_1 is 77 percents
	for memorythreshold_2 is 87 percents
	for memorythreshold_3 is 97 percents
	for backtonormalmemorythreshold_1 is 72 percents
	for backtonormalmemorythreshold_2 is 82 percents
	for backtonormalmemorythreshold_3 is 92 percents

PARAMETERS

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set memorythreshold_1 77
	tcap set memorythreshold_2 87
	tcap set memorythreshold_3 97
	tcap set backtonormalmemorythreshold_1 72
	tcap set backtonormalmemorythreshold_2 82
	tcap set backtonormalmemorythreshold_3 92</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_memorythreshold_gui"><a class="anchor" href="#_tcap_property_memorythreshold_gui"></a>7.5.3.11.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Memory congestion Threshold 1' property or other needed property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_blockingincomingtcapmessages"><a class="anchor" href="#_tcap_property_blockingincomingtcapmessages"></a>7.5.3.12. Blocking of incoming messages in congestion case</h5>
<div class="sect5">
<h6 id="_tcap_property_blockingincomingtcapmessages_cli"><a class="anchor" href="#_tcap_property_blockingincomingtcapmessages_cli"></a>7.5.3.12.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'blockingincomingtcapmessages' by issuing the command <code>tcap set blockingincomingtcapmessages</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get blockingincomingtcapmessages</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set blockingincomingtcapmessages

SYNOPSIS
	tcap set blockingincomingtcapmessages &lt;true | false&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	If sets to true then incoming TCAP messages will be blocked
	(depending on congestion level, from level 2 - new incoming dialogs are
	rejected, from level 3 - all incoming messages are rejected.
	Default value: false

PARAMETERS

	Standard Parameters

	&lt;blockingincomingtcapmessages&gt; - if true messages was rejected in
					congestion case.

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set blockingincomingtcapmessages false</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_blockingincomingtcapmessages_gui"><a class="anchor" href="#_tcap_property_blockingincomingtcapmessages_gui"></a>7.5.3.12.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'Blocking of incoming messages in congestion case' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tcap_property_slsrange"><a class="anchor" href="#_tcap_property_slsrange"></a>7.5.3.13. SLS Range</h5>
<div class="sect5">
<h6 id="_tcap_property_slsrange_cli"><a class="anchor" href="#_tcap_property_slsrange_cli"></a>7.5.3.13.1. Using CLI</h6>
<div class="paragraph">
<p>You can set the 'slsrange' by issuing the command <code>tcap set slsrange</code> with appropriate parameters as described below.
You can verify this by issuing the command <code>tcap get slsrange</code> which will display the value set for this property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name
	tcap set slsrange

SYNOPSIS
	tcap set slsrange &lt;All | Odd | Even&gt; stackname &lt;stack-name&gt;

DESCRIPTION
	slsRanger: set the value of SLS to odd or even or both.

PARAMETERS

	Standard Parameters

	&lt;All&gt;	-	If set to All, SLS number can be odd or even value
	&lt;Odd&gt;	-	If set to Odd, SLS number can get only odd value
	&lt;Even&gt;	-	If set to Even, SLS number can get only even value

	Optional Parameters

	&lt;stack-name&gt;	-	Name of the stack on which this command is executed.
					If not passed, the first stack configured in ShellExecutor
					will be used.

EXAMPLES
	tcap set slsrange All</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tcap_property_slsrange_gui"><a class="anchor" href="#_tcap_property_slsrange_gui"></a>7.5.3.13.2. Using GUI</h6>
<div class="paragraph">
<p>On TCAP management page, click on pencil against the 'SLS Range' property and text box becomes editable.
Change value and save.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_statistics"><a class="anchor" href="#_managing_statistics"></a>7.6. Statistics</h3>
<div class="paragraph">
<p>The GUI will allow you to create campaigns of fixed duration for gathering statistics data.
Campaign allows to select time period over which these statistics have been gathered (in hours, minutes and seconds). Once Campaign is defined, the statistics can be observed by clicking newly created campaign name or you can also navigate to Metrics (click Metrics on left panel) to get graph of statistics.</p>
</div>
<div class="sect3">
<h4 id="_managing_statistics_create"><a class="anchor" href="#_managing_statistics_create"></a>7.6.1. Create Campaign</h4>
<div class="paragraph">
<p>To create new campaign open a Web Browser and navigate to <a href="http://localhost:8080/jss7-management-console/" class="bare">http://localhost:8080/jss7-management-console/</a>.  Click on the 'Manage Campaigns' link in the left panel.
The main panel will display the names of all existing campaigns and also button to create new campaign.
The GUI will look similar to the figure below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_Campaign_Management.png" alt="GUI Campaign Management">
</div>
<div class="title">Figure 26. GUI - Campaigns</div>
</div>
<div class="paragraph">
<p>Click on 'Create Statistics Campaign' button to create new campaign.
Select the stack from 'Counter Definition Set Name' drop down on which you want to define new campaign.
Next select the time period from 'Duration' drop down and enter unique 'Campaign Name'.
An 'Output format' field allows you to select a type of statistics logging: CSV, verbose or both of them.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The stack on which new campaign is defined must have set 'Statistics Enabled' property to true
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_managing_statistics_manage"><a class="anchor" href="#_managing_statistics_manage"></a>7.6.2. View Campaigns</h4>
<div class="paragraph">
<p>The GUI will allow you to view existing campaigns.
On the main panel click campaign name.
The GUI will look similar to the figure below and is divided into tabs.</p>
</div>
<div class="paragraph">
<p>The first tab will display the properties of the campaign.
Second tab explains all the counters in this campaigns and their definition.
Last tab provides the values for each of these counters.
Last tab also displays the 'Start Time' and 'End Time' representing time duration for which sample was collected.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/GUI_Campaign_Management_view.png" alt="GUI Campaign Management view">
</div>
<div class="title">Figure 27. GUI - Campaigns View</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Restcomm jSS7 doesn&#8217;t persist the statistics, hence the data collected for campaign period refresh&#8217;s every defined 'Duration'. User must refresh the page every 'Duration'  period to gather statistics data for previous time period.</p>
</div>
<div class="paragraph">
<p>Nevertheless you can also click on 'Metrics' link on left panel, select the Campaign and observe the statistics graph.
The metrics page gathers data from time page was loaded till user navigates  away.
Hence graph will show historic data from point page was loaded.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_managing_statistics_logging"><a class="anchor" href="#_managing_statistics_logging"></a>7.6.3. Logging Stats</h4>
<div class="paragraph">
<p>The GUI will allow you to view stats in real time.
But the stats are not stored in the Database for you to analyse at a later point of time.
However Restcomm jSS7 gives you an option to have the stats logged every refresh period for all the existing campaigns.
You can look at the log files at any point of time for analysing or understanding the performance.</p>
</div>
<div class="paragraph">
<p>If you wish to have stats logged, you must configure the settings in the file <em class="path">jboss-5.1.0.GA/server/default/conf/jboss-log4j.xml</em>.
If you are running the platform as standalone, then you should configure in <em class="path">log4j.xml</em>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Logging stats to main server log file</dt>
<dd>
<p>If you wish to have the stats logged in the main server log file located at <em class="path">jboss-5.1.0.GA/server/default/log/server.log</em>,  then you must add a new category to the <em class="path">jboss-log4j.xml</em> as shown below and set priority value to "DEBUG". For verbose stats:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;category name="org.restcomm.protocols.ss7.oam.common.statistics.StatsPrinter" additivity="false"&gt;
	    &lt;priority value="DEBUG" /&gt;
&lt;/category&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>and for a CSV stats:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;category name="org.restcomm.protocols.ss7.oam.common.statistics.CsvStatsPrinter" additivity="false"&gt;
	    &lt;priority value="DEBUG" /&gt;
&lt;/category&gt;</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Logging stats to a separate stats log files</dt>
<dd>
<p>If you wish to have the stats logged to a separate log files located at <em class="path">jboss-5.1.0.GA/server/default/log/stats.log</em> and <em class="path">jboss-5.1.0.GA/server/default/log/csvstats.log</em>,  then you must add a new appenders to the <em class="path">jboss-log4j.xml</em> and change category as shown below.
You must set the priority value to "DEBUG".</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;appender name="STATS" class="org.jboss.logging.appender.DailyRollingFileAppender"&gt;
&lt;errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/&gt;
&lt;param name="File" value="$
{jboss.server.home.dir}
/log/stats.log"/&gt;
&lt;param name="Append" value="true"/&gt;
&lt;param name="MaxFileSize" value="500KB" /&gt;
&lt;param name="MaxBackupIndex" value="1" /&gt;
&lt;param name="Threshold" value="DEBUG"/&gt;
&lt;param name="DatePattern" value="'.'yyyy-MM-dd"/&gt;
&lt;layout class="org.apache.log4j.PatternLayout"&gt;
&lt;param name="ConversionPattern" value="%d %-5p [%c] %m%n"/&gt;
&lt;/layout&gt;
&lt;/appender&gt;
&lt;category name="org.restcomm.protocols.ss7.oam.common.statistics.StatsPrinter" additivity="false"&gt;
&lt;priority value="DEBUG" /&gt;
&lt;appender-ref ref="STATS"/&gt;
&lt;/category&gt;

&lt;appender name="CSVSTATS" class="org.jboss.logging.appender.DailyRollingFileAppender"&gt;
&lt;errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/&gt;
&lt;param name="File" value="$
{jboss.server.home.dir}
/log/csvstats.log"/&gt;
&lt;param name="Append" value="true"/&gt;
&lt;param name="MaxFileSize" value="500KB" /&gt;
&lt;param name="MaxBackupIndex" value="1" /&gt;
&lt;param name="Threshold" value="DEBUG"/&gt;
&lt;param name="DatePattern" value="'.'yyyy-MM-dd"/&gt;
&lt;layout class="org.apache.log4j.PatternLayout"&gt;
&lt;param name="ConversionPattern" value="%d %-5p [%c] %m%n"/&gt;
&lt;/layout&gt;
&lt;/appender&gt;
&lt;category name="org.restcomm.protocols.ss7.oam.common.statistics.CsvStatsPrinter" additivity="false"&gt;
&lt;priority value="DEBUG" /&gt;
&lt;appender-ref ref="CSVSTATS"/&gt;
&lt;/category&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>As of today Restcomm jSS7 exposes statistics only for TCAP.
Future releases will allow statistics for M3UA, SCCP, MAP and CAP also.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_alarms"><a class="anchor" href="#_managing_alarms"></a>7.7. Alarms</h3>
<div class="paragraph">
<p>The GUI will allow you to view the Alarms (Critical, Major, Minor, Warning) in the system and filter them based on the severity.
Open a Web Browser and navigate to <a href="http://localhost:8080/jss7-management-console/" class="bare">http://localhost:8080/jss7-management-console/</a>. Click on the 'Alarms' link in the left panel.
The main panel will display all the currently raised alarms.
You can filter the view by using the checkboxes at the top to select/deselect the severity options and accordingly filter the display.</p>
</div>
<div class="paragraph">
<p>You will notice that as soon as the problem is resolved, the corresponding alarm will disappear from the view.
In future releases, there will be an option to persist this alarms data and hence you will be able to view a history of alarms raised and resolved.
But as of now, only currently active alarms will be displayed in this window.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="m3ua"><a class="anchor" href="#m3ua"></a>8. M3UA</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_mobicents_signaling_gateway_m3ua"><a class="anchor" href="#_mobicents_signaling_gateway_m3ua"></a>8.1. Restcomm  Signaling Gateway M3UA Stack</h3>
<div class="paragraph">
<p><code>M3UA</code> is a client-server protocol supporting the transport of any SS7 MTP3-User signaling (e.g. <code>ISUP</code> and <code>SCCP</code> messages) over IP. <code>M3UA</code> is defined by the IETF SIGTRAN working group in RFC 4666.
 Restcomm  M3UA Stack can be used on the Application Server side or on the Signaling Gateway side or can also be used in peer-to-peer mode IPSP.</p>
</div>
<div class="paragraph">
<p><code>M3UA</code> uses the  Restcomm  SCTP (Stream Control Transmission Protocol) Stack.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Restcomm SCTP Stack uses Java SCTP layer which is only available from JDK 7 onwards.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="m3ua-load-balancing"><a class="anchor" href="#m3ua-load-balancing"></a>8.1.1. M3UA Load Balancing</h4>
<div class="paragraph">
<p>Load Balancing can be configured by using the M3UA configuration parameter <code>useLsbForLinksetSelection</code> defined in the <em class="path">jboss-beans.xml</em> file.
Refer to <a href="#_configuring_rem_sgw">Configuring M3UA</a> for more details on configuring this.</p>
</div>
<div class="paragraph">
<p>Depending on the configuration (<code>useLsbForLinksetSelection</code> set to true or false), either the least significant bit or the most significant bit of SLS is used for load balancing between two Application Servers.
The remaining bits in the SLS are used for load balancing between ASPs within each AS.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mobicents_signaling_gateway_m3ua_as"><a class="anchor" href="#_mobicents_signaling_gateway_m3ua_as"></a>8.1.2. Restcomm  M3UA Stack on the Application Server side</h4>
<div class="paragraph">
<p>The figure below demonstrates the basic functionality of the Restcomm M3UA Stack when configured as an Application Server (AS)  that will communicate with an External Signaling Gateway.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/M3UAAs.jpg" alt="M3UAAs">
</div>
</div>
<div class="paragraph">
<p>To use M3UA Stack as an AS, the Routing Context (RC) may not be known and is optional.
Refer to <a href="#_configuring_rem_sgw">Configuring M3UA</a> for help in configuring M3UA Stack  as an AS.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mobicents_signaling_gateway_m3ua_sg"><a class="anchor" href="#_mobicents_signaling_gateway_m3ua_sg"></a>8.1.3. Restcomm  M3UA Stack on the Signaling Gateway side</h4>
<div class="paragraph">
<p>The figure below demonstrates the basic functionality of the Restcomm M3UA Stack when configured as a Signaling Gateway (SG).  The Restcomm Signaling Gateway provides the Nodal Interworking Function (NIF) that allows SS7 Signaling (SCCP/ISUP) to be inter-worked into the M3UA/IP Network.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/M3UASgw.jpg" alt="M3UASgw">
</div>
</div>
<div class="paragraph">
<p>Restcomm M3UA Stack used on the SG side will share a common point code with a set of M3UA Application Servers.
You can configure the M3UA stack on SG side in one of the two traffic modes: Loadbalance or Override.
Broadcast traffic mode is not supported.
Refer to <a href="#_configuring_sgw">Configuring Restcomm  Signaling Gateway</a> for instructions on configuring M3UA Stack as SG. Restcomm  M3UA Stack used on SG side doesn&#8217;t support routing key management messages.
The Routing Key should be provisioned statically using the management console.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mobicents_ipsp_m3ua"><a class="anchor" href="#_mobicents_ipsp_m3ua"></a>8.1.4. Restcomm  M3UA Stack as IPSP</h4>
<div class="paragraph">
<p>An IPSP is essentially the same as an ASP, except that it uses M3UA in a point-to-point fashion.
Conceptually, an IPSP does not use the services of a Signalling Gateway node.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_m3ua_route"><a class="anchor" href="#_m3ua_route"></a>8.2. Route</h3>
<div class="paragraph">
<p>Before you can transfer Payload Data from M3UA-User to a peer, you must define the route based on Destination Point Code (DPC), Originating Point Code (OPC) and Service Indicator (SI). For details on how to add a new Route, please refer to <a href="#_managing_add_m3ua_route">Create a new M3UA Route</a>.</p>
</div>
<div class="paragraph">
<p>While DPC is mandatory and should be an actual value, OPC and SI can be -1 indicating wild card.
The table below shows an example of a routeset table.
The routeset table contains routesets for all the possible destinations that can be reached.
This table is searched to find a match for the DPC:OPC:SI to be routed.
If a match is found in the list of Application Servers, an AS is chosen from the available routes associated with the routeset.
If an AS is not found, SI is substitued with -1 (DPC:OPC:-1) and a match is searched for again.
If a match still is not found, OPC is substituted with -1 (DPC:-1:-1) and the table is searched again for a match.
If there is still no matching AS, MSU is dropped and routing does not take place.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Routesets</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">DPC</th>
<th class="tableblock halign-left valign-top">OPC</th>
<th class="tableblock halign-left valign-top">SI</th>
<th class="tableblock halign-left valign-top">AS Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AS1, AS2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AS1, AS2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AS3</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_m3ua_loadsharing"><a class="anchor" href="#_m3ua_loadsharing"></a>8.3. Load Sharing</h3>
<div class="paragraph">
<p>M3UA load-balancing makes use of the SLS field of the Protocol Data carried in the Payload Data Message.
M3UA can be configured as below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>load-balance between Application Servers (AS) for a given route.
For any given route, there can be a maximum of 16 ASs defined.</p>
</li>
<li>
<p>load-balance within an AS and between Application Server Processes (ASP). A maximum 128 ASPs can be defined within an AS for load-sharing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For even distribution of messages in the network it is recommended that you define an even number of ASs for a route for load sharing.
You must ensure that you take proper care in deciding on a number of ASs for a route and number of ASPs within an AS depending on the routing label format of MSU.</p>
</div>
<div class="paragraph">
<p>M3UA can be configured to use either the highest or lowest bits of the SLS for AS selection.
The number of SLS bits used for AS selection depends on the number of maximum AS defined for a route.
The remaining bits are used for ASP selection.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Routesets</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Max AS for Route</th>
<th class="tableblock halign-left valign-top">Number of SLS bits used for AS</th>
<th class="tableblock halign-left valign-top">Max ASPs that can be used within an AS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 or 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 or 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 to 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9 to 16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="m3ua-internal-state-machine"><a class="anchor" href="#m3ua-internal-state-machine"></a>8.4. M3UA Internal State Machine</h3>
<div class="paragraph">
<p>Restcomm M3UA Stack maintains finite state machine (FSM) for each ASP and AS.
Its important to understand these state&#8217;s to troubleshoot the M3UA handshake messages exchanged</p>
</div>
<div class="paragraph">
<p>The FSM for ASP at AS side (or IPSPS client side) is referred to as LocalFSM and FSM for AS at AS side (or IPSP client side) is referred to as PeerFSM.
Similarly FSM for ASP at SGW side (or IPSP server side) is referred to as PeerFSM and FSM for AS at SGW side (or IPSP server side) is referred to as LocalFsm.</p>
</div>
<div class="paragraph">
<p>Figure below shows the various state of ASP at AS and SGW side.
In below example only Single Exchange of messages are considered for handshake mechanism</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/M3UAStateASPSE.jpg" alt="M3UAStateASPSE">
</div>
<div class="title">Figure 28. Restcomm M3UA Stack ASP state machine</div>
</div>
<div class="paragraph">
<p>Figure below shows the various state of AS at AS and SGW side.
In below example only Single Exchange of messages are considered for handshake mechanism</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/M3UAStateASSE.jpg" alt="M3UAStateASSE">
</div>
<div class="title">Figure 29. Restcomm M3UA Stack AS state machine for AS - SGW</div>
</div>
<div class="paragraph">
<p>For IPSP, the ASP state machine remains same as AS-SGW, however for AS the state machine changes a bit as there is no exchange of Notify (NTFY) messages.
Figure below shows the various state of AS at IPSP Client and Server side.
In below example only Single Exchange of messages are considered for handshake mechanism</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/M3UAStateIPSPASPSE.jpg" alt="M3UAStateIPSPASPSE">
</div>
<div class="title">Figure 30. Restcomm M3UA Stack AS state machine for IPSP Client - Server</div>
</div>
<div class="paragraph">
<p>In Double Exhcnage handshake mechanism both Local and Peer FSM exist in ASP and AS at each side.
Hence the number of handshake messages exchanged are twice that of Single Exchange.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="isup"><a class="anchor" href="#isup"></a>9. ISUP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>( ISDN User Part or ISUP ) is part of  which is used to establish telephone calls and manage call switches( <code>exchanges</code>). Exchanges are connected via E1 or T1 trunks.
Each trunk is divided by means of TDM into time slots.
Each time slot is distinguished as circuit.
Circuits (identified by code) are used  as medium to transmit voice data between user equipment (or exchanges if more than one is involved).</p>
</div>
<div class="literalblock">
<div class="content">
<pre>allows not only to setup a call, but to exchange information about exchange state and its resources(circuits).</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Restcomm  is based on  <code>Q.76X</code> series of documents.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_isup_config"><a class="anchor" href="#_isup_config"></a>9.1. ISUP Configuration</h3>
<div class="paragraph">
<p>Restcomm  stack is configured with simple properties.
Currently following properties are supported:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. ISUP Configuration options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Value range</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ni</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None, must be provided</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets value of network indicator that should be used by stack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">localspc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None, must be provided</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 - (2^14)-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets local signaling point code. It will be used as OPC for outgoing signaling units.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4s - 15s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T1 value. Started when REL is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 min.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min - 15 min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T5 value. Started when initial REL is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20s -30s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T7 value. (Re)Started when Address Message is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15s - 60s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T12 value. Started when BLO is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min - 15min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T13 value. Started when initial BLO is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15s - 60s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T14 value. Started when UBL is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min - 15min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T15 value. Started when initial UBL is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15s - 60s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T16 value. Started when RSC is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min - 15min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T17 value. Started when initial RSC is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15s - 60s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T18 value. Started when CGB is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min - 15min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T19 value. Started when initial CGB is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15s - 60s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T20 value. Started when CGU is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min - 15min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T21 value. Started when initial CGU is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15s - 60s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T22 value. Started when GRS is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5min - 15min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T23 value. Started when initial GRS is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T28 value. Started when CQM is sent. See A.1/Q.764</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t33</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12s - 15s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets T33 value. Started when INR is sent. See A.1/Q.764</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that before start user must provide two interfaces to stack:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Mtp3UserPart</dt>
<dd>
<p>implementation of transport layer which should be used by stack</p>
</dd>
<dt class="hdlist1">CircuitManager</dt>
<dd>
<p>circuit manager implementation.
This interface stores information on mapping between <code>CIC</code>(Circuit Identification Code) and <code>DPC</code>(Destination Point Code) used as destination for outgoing messages.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="isup-usage"><a class="anchor" href="#isup-usage"></a>9.2. ISUP Usage</h3>
<div class="paragraph">
<p>The <code>org.restcomm.protocols.ss7.isup.ISUPStack</code> interface defines the methods required to represent ISUP Protocol Stack.
ISUPStack exposes <code>org.restcomm.protocols.ss7.isup.ISUPProvider</code>.
This interface defines the methods that will be used by any registered ISUP User application implementing the <code>org.restcomm.protocols.ss7.isup.ISUPListener</code> to listen ISUP events(messages and timeouts).</p>
</div>
</div>
<div class="sect2">
<h3 id="isup-example"><a class="anchor" href="#isup-example"></a>9.3. ISUP Example</h3>
<div class="paragraph">
<p>Below is simple example of stack usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;

import org.restcomm.protocols.ss7.isup.ISUPEvent;
import org.restcomm.protocols.ss7.isup.ISUPListener;
import org.restcomm.protocols.ss7.isup.ISUPProvider;
import org.restcomm.protocols.ss7.isup.ISUPStack;
import org.restcomm.protocols.ss7.isup.ISUPTimeoutEvent;
import org.restcomm.protocols.ss7.isup.ParameterException;
import org.restcomm.protocols.ss7.isup.impl.ISUPStackImpl;
import org.restcomm.protocols.ss7.isup.message.ISUPMessage;

import org.restcomm.ss7.linkset.oam.Layer4;
import org.restcomm.ss7.linkset.oam.Linkset;

public class ISUPTest implements ISUPListener
{

	protected ISUPStack stack;
	protected ISUPProvider provider;

	protected Linkset isupLinkSet;


	public void setUp() throws Exception {

		this.isupLinkSet = ....; //same linksets as in SS7Service
		this.stack = new ISUPStackImpl();
		this.stack.configure(getSpecificConfig());
		this.provider = this.stack.getIsupProvider();
		this.provider.addListener(this);
		Mtp3UserPart userPart = // create with proper factory, dahdii, dialogi, m3ua
		this.stack.setMtp3UserPart(userPart);
		CircuitManagerImpl circuitManager = new CircuitManagerImpl();
		circuitManager.addCircuit(1, 431613); // CIC - 1, DPC for it - 431613


		this.stack.setCircuitManager(circuitManager);
		this.stack.start();

	}


	public void onEvent(ISUPEvent event) {
		ISUPMessage msg = event.getMessage();
		switch(msg.getCircuitIdentificationCode().getCIC())
		{
			case AddressCompleteMessage._COMMAND_CODE:
			//only complete
			break;
			case ConnectedMessage._COMMAND_CODE:
			case AnswerMessage._COMMAND_CODE:
			//we are good to go
			ConnectedNumber cn = (ConnectedNumber)msg.getParameter(ConnectedNumber._PARAMETER_CODE);
			//do something
			break;
			case ReleaseMessage._COMMAND_CODE:
			//remote end does not want to talk
			RealeaseCompleteMessage rlc = provider.getMessageFactory().createRLC();
			rlc.setCircuitIdentificationCode(msg.getCircuitIdentificationCode());
			rlc.setCauseIndicators(   ((ReleaseComplete)msg).getCauseIndicators());
			provider.sendMessage(rlc);

		}

	}

	public void onTimeout(ISUPTimeoutEvent event) {
		switch(event.getTimerId())
		{
			case ISUPTimeoutEvent.T1:
				//do something
				break;
			case ISUPTimeoutEvent.T7:
				//do even more
				break;
		}

	}

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sccp"><a class="anchor" href="#sccp"></a>10. SCCP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Signaling Connection Control Part (SCCP) is defined in ITU-T Recommendations Q.711-Q.716.
SCCP sits on top of Message Transfer Part 3 (MTP3) in the SS7 protocol stack.
The SCCP provides additional network layer functions to provide transfer of noncircuit-related (NCR) signaling information,  application management procedures and alternative, more flexible methods of routing.</p>
</div>
<div class="sect2">
<h3 id="_sccp_routing"><a class="anchor" href="#_sccp_routing"></a>10.1. Routing Management</h3>
<div class="paragraph">
<p>SCCP provides a routing function that allows signaling messages to be routed to a signaling point based on dialed digits,  for example.
This capability is known as Global Title Translation (GTT), which translates what is known as a global title  (for example, dialed digits for a toll free number) into a signaling point code and a subsystem number so that it can be processed  at the correct application.</p>
</div>
<div class="sect3">
<h4 id="_sccp_gtt_configure"><a class="anchor" href="#_sccp_gtt_configure"></a>10.1.1. GTT Configuration</h4>
<div class="paragraph">
<p>GTT is performed in two stages.
First is matching the rule and second is actual translation.</p>
</div>
<div class="paragraph">
<p>For matching the rule, the called party address global title digits are matched with &lt;digits&gt; configured while defining the Rule.
Once the digits match actual  translation is done.
Also for rule matching GT Indicator, translation type, numbering plan and nature-of-address of a rule and of message called party address must be equal.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Matching rule</dt>
<dd>
<p>As explained previously, the  &lt;digits&gt; can be divided into sections using the "/" separate character.
Each section defines set of  digits to be matched.
Wild card * can be used to match any digits and ? can be used to match exatcly one digit.
For example Rule is to match starting 4 digits (should be 1234) and doesn&#8217;t care for rest; the &lt;digits&gt; in the command will be 1234/*. If the Rule is such that starting 3 digits should be 123, doesn&#8217;t care for other three digits but last two digits should be 78; the &lt;digits&gt; in the command will be 123/???/78. If digit to digit matching is needed the the &lt;digits&gt; in the command will be exact digits to be matched without sections.</p>
</dd>
<dt class="hdlist1">Translation</dt>
<dd>
<p>Resulting Called Party Address will contain:</p>
<div class="ulist">
<ul>
<li>
<p>PC in the generated CalledPartyAddress is taken from primary/backup address.
This PC will not be encoded into a message if the following option is set: sccp set removespc true.</p>
</li>
<li>
<p>SSN will be taken from primary/backup address.
If it is absent there - will be taken from an original message address.
If also absent - SSN will not be included.</p>
</li>
<li>
<p>GT type (0001, 0010, 0011, 0100) is taken from from AI (AddressIndicator) of primary/backup address.
If AI of primary/backup address contains "no GT" (or bad value) but after address translating we need GT - it will be taken from AI of an original message address.</p>
</li>
<li>
<p>NAI, TT, NP (and Encoding schema) is taken from GT of primary/backup address.
If no GT in primary/backup address but after address translating we need GT - it will be taken from GT of an original message address.</p>
</li>
<li>
<p>Digits for CalledPartyAddress will be generated in following way.
For translation each section in &lt;mask&gt; defined while creating the Rule, defines how replacement operation is performed.
If  &lt;mask&gt; defines K (KEEP), the originally dialed digits are kept and if &lt;mask&gt; defines R (REPLACE) the digits from primary address or back address are used.
The primary/backup address  should always define the point code and the translated address will always have this point code.
If the primary/backup address defines the subsystem number the translated address will also have this subsystem number.
The address-indicator  of translated address is always from primary/backup address.
  See below examples</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Example 1 : Remove the Global Title and add PC and SSN</p>
<div class="imageblock">
<div class="content">
<img src="./images/GTT-Example1.jpg" alt="GTT Example1">
</div>
<div class="title">Figure 31. GTT - Example 1</div>
</div>
</li>
<li>
<p>Example 2 : Partial Match
Match a eight digit number starting "800", followed by any four digits, then "9". If the translated digits is not null and if the primary/backup address has no Global Title, the Global Title from dialed address is kept with new translated digits.</p>
<div class="imageblock">
<div class="content">
<img src="./images/GTT-Example2.jpg" alt="GTT Example2">
</div>
<div class="title">Figure 32. GTT - Example 2</div>
</div>
</li>
<li>
<p>Example 3 : Partial Match
Match "800800", followed by any digits Remove the first six digits. Keep any following digits in the Input. Add a PC(123) and SSN (8).</p>
<div class="imageblock">
<div class="content">
<img src="./images/GTT-Example3.jpg" alt="GTT Example3">
</div>
<div class="title">Figure 33. GTT - Example 3</div>
</div>
</li>
<li>
<p>Example 4 : Partial Match
Match any digits keep the digits in the and add a PC(123) and SSN (8). If the translated digits is not null and if the primary/backup address has no Global Title, the Global Title from dialed address is kept with new translated digits.</p>
<div class="imageblock">
<div class="content">
<img src="./images/GTT-Example4.jpg" alt="GTT Example4">
</div>
<div class="title">Figure 34. GTT - Example 4</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sccp_design"><a class="anchor" href="#_sccp_design"></a>10.2. SCCP Usage</h3>
<div class="paragraph">
<p>The instance of <code class="class">org.restcomm.protocols.ss7.sccp.SccpStack</code> acts as starting point.
All the sccp messages sent by SCCP User Part are routed as per the rule configured in Router</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The term SCCP User Part refers to the applications that use SCCP&#8217;s services.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The SCCP User Part gets handle to <code class="class">SccpStack</code> by doing a JNDI look-up.</p>
</div>
<div class="paragraph">
<p><code class="class">SccpStack</code> exposes <code class="class">org.restcomm.protocols.ss7.sccp.SccpProvider</code>  that interacts directly with SccpStack.
This interface defines the methods that will be used by SCCP User Part to send connectionless <code class="class">org.restcomm.protocols.ss7.sccp.message.SccpMessage</code>, create new connections and register  [class]`org.restcomm.protocols.ss7.sccp.SccpListener&#8217;s to listen for incoming SCCP messages and connection events.</p>
</div>
<div class="paragraph">
<p>SCCP User Part registers SccpListener for specific local subsystem number.
For every incoming SccpMessage or connection event, if the called subsystem matches with this local subsystem, the corresponding SccpListner is called.</p>
</div>
<div class="paragraph">
<p><code class="class">SccpProvider</code> exposes <code class="class">SccpConnection</code> which allows to perform common connection actions such as establishing, resetting, confirming/refusing and disconnecting SCCP connections.</p>
</div>
<div class="paragraph">
<p>SccpProvider also exposes <code class="class">org.restcomm.protocols.ss7.sccp.message.MessageFactory</code> and <code class="class">org.restcomm.protocols.ss7.sccp.parameter.ParameterFactory</code> to create new SccpMessage.
For transfer data via connectionless service <code class="class">org.restcomm.protocols.ss7.sccp.message.SccpDataMessage</code> is used.
(This class use UDT, XUDT, LUDT SCCP message type for message transfer.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_sccp_complete_example"><a class="anchor" href="#_sccp_complete_example"></a>10.3. SCCP User Part Example #1 (connectionless protocol class)</h3>
<div class="paragraph">
<p>Below is SCCP User Part example listening for incoming connectionless SCCP message and sending back new message</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.restcomm.protocols.ss7.sccp.impl;

import java.io.IOException;

import org.restcomm.protocols.ss7.indicator.NatureOfAddress;
import org.restcomm.protocols.ss7.indicator.NumberingPlan;
import org.restcomm.protocols.ss7.indicator.RoutingIndicator;
import org.restcomm.protocols.ss7.sccp.RemoteSccpStatus;
import org.restcomm.protocols.ss7.sccp.SccpListener;
import org.restcomm.protocols.ss7.sccp.SccpProvider;
import org.restcomm.protocols.ss7.sccp.SignallingPointStatus;
import org.restcomm.protocols.ss7.sccp.message.SccpDataMessage;
import org.restcomm.protocols.ss7.sccp.message.SccpNoticeMessage;
import org.restcomm.protocols.ss7.sccp.parameter.GlobalTitle;
import org.restcomm.protocols.ss7.sccp.parameter.HopCounter;
import org.restcomm.protocols.ss7.sccp.parameter.SccpAddress;

public class Test implements SccpListener {
        private SccpProvider sccpProvider;
        private SccpAddress localAddress;
        private int localSsn = 8;

        private static SccpProvider getSccpProvider() {
                Mtp3UserPartImpl mtp3UserPart1 = null;
                // ......
                // ......
                SccpStackImpl sccpStack1 = new SccpStackImpl("testSccpStack");
                sccpStack1.setMtp3UserPart(1, mtp3UserPart1);
                sccpStack1.start();
                return sccpStack1.getSccpProvider();
        }

        public void start() throws Exception {
                this.sccpProvider = getSccpProvider();
                int translationType = 0;
                GlobalTitle gt = GlobalTitle.getInstance(translationType,
                                NumberingPlan.ISDN_MOBILE, NatureOfAddress.NATIONAL, "1234");
                localAddress = new SccpAddress(RoutingIndicator.ROUTING_BASED_ON_GLOBAL_TITLE, -1, gt, 0);
                this.sccpProvider.registerSccpListener(this.localSsn, this);
        }

        public void stop() {
                this.sccpProvider.deregisterSccpListener(this.localSsn);
        }

        @Override
        public void onMessage(SccpDataMessage message) {
                localAddress = message.getCalledPartyAddress();
                SccpAddress remoteAddress = message.getCallingPartyAddress();
                // now decode content
                byte[] data = message.getData();
                // processing a request
                byte[] answerData = new byte[10];
                // put custom executing code here and fill answerData
                HopCounter hc = this.sccpProvider.getParameterFactory().createHopCounter(5);
                SccpDataMessage sccpAnswer = this.sccpProvider.getMessageFactory().createDataMessageClass1(
                                remoteAddress, localAddress, answerData, message.getSls(),
                                localSsn, false, hc, null);
                try {
                        this.sccpProvider.send(sccpAnswer);
                } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
        }

        @Override
        public void onNotice(SccpNoticeMessage message) {
        }

        public void onCoordRequest(int dpc, int ssn, int multiplicityIndicator) {
        }

        public void onCoordResponse(int dpc, int ssn, int multiplicityIndicator) {
        }

        public void onState(int dpc, int ssn, boolean inService, int multiplicityIndicator) {
        }

        @Override
        public void onPcState(int dpc, SignallingPointStatus status, Integer restrictedImportanceLevel,
                        RemoteSccpStatus remoteSccpStatus) {
        }

        @Override
        public void onNetworkIdState(int networkId, NetworkIdState networkIdState) {
        }

        @Override
        public void onConnectIndication(SccpConnection conn, SccpAddress calledAddress,
                        SccpAddress callingAddress, ProtocolClass clazz, Credit credit, byte[] data,
                        Importance importance) throws Exception {
        }

        @Override
        public void onConnectConfirm(SccpConnection conn, byte[] data) {
        }

        @Override
        public void onDisconnectIndication(SccpConnection conn, ReleaseCause reason, byte[] data) {
        }

        @Override
        public void onDisconnectIndication(SccpConnection conn, RefusalCause reason, byte[] data) {
        }

        @Override
        public void onDisconnectIndication(SccpConnection conn, ErrorCause errorCause) {
        }

        @Override
        public void onResetIndication(SccpConnection conn, ResetCause reason) {
        }

        @Override
        public void onResetConfirm(SccpConnection conn) {
        }

        @Override
        public void onData(SccpConnection conn, byte[] data) {
        }

        @Override
        public void onDisconnectConfirm(SccpConnection conn) {
        }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sccp_complete_example"><a class="anchor" href="#_sccp_complete_example"></a>10.4. SCCP User Part Example #2 (connection-oriented protocol class)</h3>
<div class="paragraph">
<p>Below is SCCP User Part example listening for incoming connection-oriented SCCP data message and sending back
new data message via already established protocol class 2 connection</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.restcomm.protocols.ss7.sccp.impl;

import org.restcomm.protocols.ss7.indicator.RoutingIndicator;
import org.restcomm.protocols.ss7.sccp.NetworkIdState;
import org.restcomm.protocols.ss7.sccp.RemoteSccpStatus;
import org.restcomm.protocols.ss7.sccp.SccpConnection;
import org.restcomm.protocols.ss7.sccp.SccpListener;
import org.restcomm.protocols.ss7.sccp.SccpProvider;
import org.restcomm.protocols.ss7.sccp.SignallingPointStatus;
import org.restcomm.protocols.ss7.sccp.impl.parameter.ImportanceImpl;
import org.restcomm.protocols.ss7.sccp.impl.parameter.LocalReferenceImpl;
import org.restcomm.protocols.ss7.sccp.impl.parameter.ProtocolClassImpl;
import org.restcomm.protocols.ss7.sccp.impl.parameter.ReleaseCauseImpl;
import org.restcomm.protocols.ss7.sccp.message.SccpConnCrMessage;
import org.restcomm.protocols.ss7.sccp.message.SccpDataMessage;
import org.restcomm.protocols.ss7.sccp.message.SccpNoticeMessage;
import org.restcomm.protocols.ss7.sccp.parameter.Credit;
import org.restcomm.protocols.ss7.sccp.parameter.ErrorCause;
import org.restcomm.protocols.ss7.sccp.parameter.Importance;
import org.restcomm.protocols.ss7.sccp.parameter.ProtocolClass;
import org.restcomm.protocols.ss7.sccp.parameter.RefusalCause;
import org.restcomm.protocols.ss7.sccp.parameter.ReleaseCause;
import org.restcomm.protocols.ss7.sccp.parameter.ReleaseCauseValue;
import org.restcomm.protocols.ss7.sccp.parameter.ResetCause;
import org.restcomm.protocols.ss7.sccp.parameter.SccpAddress;
import org.restcomm.protocols.ss7.scheduler.Clock;
import org.restcomm.protocols.ss7.scheduler.DefaultClock;
import org.restcomm.protocols.ss7.scheduler.Scheduler;

public class Test2 implements SccpListener {
    private SccpProvider sccpProvider;
    private SccpConnection conn;
    private int localSsn = 8;

    private static SccpProvider getSccpProvider() {
        Clock clock = new DefaultClock();
        Scheduler scheduler = new Scheduler();
        scheduler.setClock(clock);

        Mtp3UserPartImpl mtp3UserPart1 = null;
        SccpStackImpl sccpStack1 = new SccpStackImpl(scheduler, "testSccpStack");
        sccpStack1.setMtp3UserPart(1, mtp3UserPart1);

        scheduler.start();
        sccpStack1.start();

        return sccpStack1.getSccpProvider();
    }

    public void start() throws Exception {
        this.sccpProvider = getSccpProvider();
        this.sccpProvider.registerSccpListener(this.localSsn, this);
    }

    public void stop() {
        this.sccpProvider.deregisterSccpListener(this.localSsn);
    }

    public void connect() throws Exception {
        // assumed that local DPC is 1 and remote DPC is 2, will differ in real life scenario
        SccpAddress localAddress = this.sccpProvider.getParameterFactory().createSccpAddress(RoutingIndicator.ROUTING_BASED_ON_DPC_AND_SSN, null, 1, localSsn);
        SccpAddress remoteAddress = this.sccpProvider.getParameterFactory().createSccpAddress(RoutingIndicator.ROUTING_BASED_ON_DPC_AND_SSN, null, 2, localSsn);

        SccpConnCrMessage crMsg = this.sccpProvider.getMessageFactory().createConnectMessageClass2(8, remoteAddress, localAddress, new byte[] {}, new ImportanceImpl((byte)1));
        crMsg.setSourceLocalReferenceNumber(new LocalReferenceImpl(1));
        crMsg.setProtocolClass(new ProtocolClassImpl(2));

        conn = this.sccpProvider.newConnection(8, new ProtocolClassImpl(2));
        conn.establish(crMsg);
    }

    public void disconnect() throws Exception {
        conn.disconnect(new ReleaseCauseImpl(ReleaseCauseValue.UNQUALIFIED), new byte[] {});
    }

    @Override
    public void onConnectIndication(SccpConnection conn, SccpAddress calledAddress, SccpAddress callingAddress, ProtocolClass clazz, Credit credit, byte[] data, Importance importance) throws Exception {
        this.conn = conn;
        conn.confirm(null, null, new byte[] {});
    }

    @Override
    public void onData(SccpConnection conn, byte[] data) {
        // decoding of content in byte[] data
        // processing a request
        byte[] answerData = new byte[10];
        // put custom executing code here and fill answerData
        try {
            conn.send(answerData);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public void onMessage(SccpDataMessage message) {
    }

    @Override
    public void onNotice(SccpNoticeMessage message) {
    }

    @Override
    public void onCoordResponse(int ssn, int multiplicityIndicator) {

    }

    public void onCoordRequest(int dpc, int ssn, int multiplicityIndicator) {
    }

    public void onCoordResponse(int dpc, int ssn, int multiplicityIndicator) {
    }

    public void onState(int dpc, int ssn, boolean inService, int multiplicityIndicator) {
    }

    @Override
    public void onPcState(int dpc, SignallingPointStatus status, Integer restrictedImportanceLevel,
                          RemoteSccpStatus remoteSccpStatus) {
    }

    @Override
    public void onNetworkIdState(int networkId, NetworkIdState networkIdState) {
    }

    @Override
    public void onConnectConfirm(SccpConnection conn, byte[] data) {
    }

    @Override
    public void onDisconnectIndication(SccpConnection conn, ReleaseCause reason, byte[] data) {
    }

    @Override
    public void onDisconnectIndication(SccpConnection conn, RefusalCause reason, byte[] data) {
    }

    @Override
    public void onDisconnectIndication(SccpConnection conn, ErrorCause errorCause) {
    }

    @Override
    public void onResetIndication(SccpConnection conn, ResetCause reason) {
    }

    @Override
    public void onResetConfirm(SccpConnection conn) {
    }

    @Override
    public void onDisconnectConfirm(SccpConnection conn) {
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tcap"><a class="anchor" href="#tcap"></a>11. TCAP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Transaction Capabilities Application Part (TCAP) is defined in ITU-T Recommendations Q.771-Q.775.
TCAP allows services at network nodes to communicate with each other using an agreed-upon set of data elements.
The primary purpose of TCAP is to facilitate multiple concurrent dialogs between the same sub-systems on the same machines,  using Transaction IDs to differentiate these, similar to the way TCP ports facilitate multiplexing connections between  the same IP addresses on the Internet.</p>
</div>
<div class="sect2">
<h3 id="restcomm-jss7-tcap-usage"><a class="anchor" href="#restcomm-jss7-tcap-usage"></a>11.1. Restcomm jSS7  TCAP Usage</h3>
<div class="paragraph">
<p>The <code class="class">org.restcomm.protocols.ss7.tcap.api.TCAPStack</code> interface defines the methods required to represent the TCAP Protocol Stack.
TCAPStack exposes <code class="class">org.restcomm.protocols.ss7.tcap.api.TCAPProvider</code> that interacts directly with the TCAPStack.
TCAPProvider defines methods that will be used by TCAP User Part to create new  <code class="class">org.restcomm.protocols.ss7.tcap.api.tc.dialog.Dialog</code> to be sent across the network.
TCAP User Part also allows to register<code class="class">org.restcomm.protocols.ss7.tcap.api.TCListener</code> to listen for TCAP messages.</p>
</div>
<div class="paragraph">
<p>TCAPProvider also exposes <code class="class">org.restcomm.protocols.ss7.tcap.api.DialogPrimitiveFactory</code> to create dialog primitives  and <code class="class">org.restcomm.protocols.ss7.tcap.api.ComponentPrimitiveFactory</code> to create components.
Components are a means of invoking an operation at a remote node.</p>
</div>
<div class="paragraph">
<p>The UML Class Diagram is depicted in the figure below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/TCAPClassDiagram.png" alt="TCAPClassDiagram">
</div>
<div class="title">Figure 35. Restcomm jSS7 Stack TCAP Class Diagram</div>
</div>
<div class="paragraph">
<p>The <code class="class">org.restcomm.protocols.ss7.tcap.TCAPStackImpl</code> is a concrete implementation of <code class="class">TCAPStack</code>.
The TCAP User Part gets access to <code class="class">TCAPProvider</code> by doing JNDI lookup as explained in the <a href="#_design_overview_ss7_service">SS7 Service</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">		InitialContext ctx = new InitialContext();
		try {
			String providerJndiName = "java:/restcomm/ss7/tcap";
			this.tcapProvider = ((TCAPProvider) ctx.lookup(providerJndiName));
		} finally {
			ctx.close();
		}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TCAP User Part should register the concrete implementation of  <code class="class">TCListener</code> with <code class="class">TCAPProvider</code> to listen for incoming TCAP messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">	public class ClientTest implements TCListener{
			.....
	        tcapProvider.addTCListener(this);
	        ....
	}</code></pre>
</div>
</div>
<div class="paragraph">
<p>TCAP User Part leverages <code class="class">TCAPProvider</code> to create a new Dialog.
The components between the nodes are exchanged within this Dialog.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">		SccpAddress localAddress = new SccpAddress(RoutingIndicator.ROUTING_BASED_ON_DPC_AND_SSN, 1, null, 8);
		SccpAddress remoteAddress = new SccpAddress(RoutingIndicator.ROUTING_BASED_ON_DPC_AND_SSN, 2, null, 8);
		clientDialog = this.tcapProvider.getNewDialog(localAddress, remoteAddress);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TCAP User Part leverages <code class="class">ComponentPrimitiveFactory</code> to create new components.
These components are sent using the dialog.</p>
</div>
<div class="paragraph">
<p>Below is a list of common scenarios using the TCAP stack :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating a TCAP Dialog by invoking the methods <code>TCAPProvider.getNewDialog()</code> or <code>getNewUnstructuredDialog()</code></p>
</li>
<li>
<p>Adding components into a Dialog for sending by <code>Dialog.sendComponent();</code></p>
</li>
<li>
<p>Sending a TCAP message TC-UNI, TC-BEGIN, TC-CONTINUE, TC-END or TC-ABORT via <code>Dialog.send()</code> methods.</p>
</li>
<li>
<p>Waiting for responses from a peer</p>
</li>
<li>
<p>When the TCAP stack receives a message from a peer, events like <code>TCListener.onTCUni()</code>, <code>onTCBegin()</code>, <code>onTCContinue()</code>, <code>onTCEnd()</code>, <code>onTCUserAbort()</code>, <code>onTCPAbort()</code> will be invoked.</p>
</li>
<li>
<p>After an Invoke component is received, a TCAP-User should process it and do one of the below:</p>
<div class="ulist">
<ul>
<li>
<p>send a response (ReturnResult, ReturnResulLast components) or</p>
</li>
<li>
<p>send an error (ReturnError or Reject components) or</p>
</li>
<li>
<p>invoke Dialog.processInvokeWithoutAnswer() method if TCAP-Users will not answer to the Invoke.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">		//create some INVOKE
        Invoke invoke = cpFactory.createTCInvokeRequest();
        invoke.setInvokeId(this.clientDialog.getNewInvokeId());
        OperationCode oc = cpFactory.createOperationCode();
        oc.setLocalOperationCode(12L);
        invoke.setOperationCode(oc);
        //no parameter
        this.clientDialog.sendComponent(invoke);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="restcomm-jss7-tcap-user-part-example"><a class="anchor" href="#restcomm-jss7-tcap-user-part-example"></a>11.2. Restcomm jSS7  TCAP User Part Example</h3>
<div class="paragraph">
<p>Below is a TCAP User Part example.
This example creates a dialog and exchanges messages within a structured dialog.
Refer to source for function calls.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.restcomm.protocols.ss7.tcap;

import javax.naming.InitialContext;
import javax.naming.NamingException;

import org.restcomm.protocols.ss7.indicator.RoutingIndicator;
import org.restcomm.protocols.ss7.sccp.parameter.SccpAddress;
import org.restcomm.protocols.ss7.tcap.api.ComponentPrimitiveFactory;
import org.restcomm.protocols.ss7.tcap.api.TCAPException;
import org.restcomm.protocols.ss7.tcap.api.TCAPProvider;
import org.restcomm.protocols.ss7.tcap.api.TCAPSendException;
import org.restcomm.protocols.ss7.tcap.api.TCListener;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.Dialog;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCBeginIndication;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCBeginRequest;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCContinueIndication;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCEndIndication;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCEndRequest;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCNoticeIndication;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCPAbortIndication;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCUniIndication;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TCUserAbortIndication;
import org.restcomm.protocols.ss7.tcap.api.tc.dialog.events.TerminationType;
import org.restcomm.protocols.ss7.tcap.asn.ApplicationContextName;
import org.restcomm.protocols.ss7.tcap.asn.comp.Invoke;
import org.restcomm.protocols.ss7.tcap.asn.comp.OperationCode;

/**
 * Simple example demonstrates how to use TCAP Stack
 *
 * @author Amit Bhayani
 *
 */
public class ClientTest implements TCListener {
	// encoded Application Context Name
	public static final long[] _ACN_ = new long[] { 0, 4, 0, 0, 1, 0, 19, 2 };
	private TCAPProvider tcapProvider;
	private Dialog clientDialog;

	ClientTest() throws NamingException {

		InitialContext ctx = new InitialContext();
		try {
			String providerJndiName = "java:/restcomm/ss7/tcap";
			this.tcapProvider = ((TCAPProvider) ctx.lookup(providerJndiName));
		} finally {
			ctx.close();
		}

		this.tcapProvider.addTCListener(this);
	}

	public void sendInvoke() throws TCAPException, TCAPSendException {
		SccpAddress localAddress = new SccpAddress(RoutingIndicator.ROUTING_BASED_ON_DPC_AND_SSN, 1, null, 8);
		SccpAddress remoteAddress = new SccpAddress(RoutingIndicator.ROUTING_BASED_ON_DPC_AND_SSN, 2, null, 8);

		clientDialog = this.tcapProvider.getNewDialog(localAddress, remoteAddress);
		ComponentPrimitiveFactory cpFactory = this.tcapProvider.getComponentPrimitiveFactory();

		// create some INVOKE
		Invoke invoke = cpFactory.createTCInvokeRequest();
		invoke.setInvokeId(this.clientDialog.getNewInvokeId());
		OperationCode oc = cpFactory.createOperationCode();
		oc.setLocalOperationCode(12L);
		invoke.setOperationCode(oc);
		// no parameter
		this.clientDialog.sendComponent(invoke);
		ApplicationContextName acn = this.tcapProvider.getDialogPrimitiveFactory().createApplicationContextName(_ACN_);
		// UI is optional!
		TCBeginRequest tcbr = this.tcapProvider.getDialogPrimitiveFactory().createBegin(this.clientDialog);
		tcbr.setApplicationContextName(acn);
		this.clientDialog.send(tcbr);
	}

	public void onDialogReleased(Dialog d) {
	}

	public void onInvokeTimeout(Invoke tcInvokeRequest) {
	}

	public void onDialogTimeout(Dialog d) {
		d.keepAlive();
	}

	public void onTCBegin(TCBeginIndication ind) {
	}

	public void onTCContinue(TCContinueIndication ind) {
		// send end
		TCEndRequest end = this.tcapProvider.getDialogPrimitiveFactory().createEnd(ind.getDialog());
		end.setTermination(TerminationType.Basic);
		try {
			ind.getDialog().send(end);
		} catch (TCAPSendException e) {
			throw new RuntimeException(e);
		}
	}

	public void onTCEnd(TCEndIndication ind) {
		// should not happen, in this scenario, we send data.
	}

	public void onTCUni(TCUniIndication ind) {
		// not going to happen
	}

	public void onTCPAbort(TCPAbortIndication ind) {
		// TODO Auto-generated method stub
	}

	public void onTCUserAbort(TCUserAbortIndication ind) {
		// TODO Auto-generated method stub
	}

	public void onTCNotice(TCNoticeIndication ind) {
		// TODO Auto-generated method stub

	}

	public static void main(String[] args) {

		try {
			ClientTest c = new ClientTest();
			c.sendInvoke();
		} catch (NamingException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (TCAPException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (TCAPSendException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="restcomm-jss7-tcap-statistic-counters"><a class="anchor" href="#restcomm-jss7-tcap-statistic-counters"></a>11.3. Restcomm jSS7 TCAP statistic counters</h3>
<div class="paragraph">
<p>Below is a list of provided by TCAP Stack statistic counters. Please see the info how to enable statistics in the following chapters: <a href="#_tcap_property_statisticsenabled">Statistics Enabled</a>, <a href="#_managing_statistics">Statistics</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. TCAP statistic counters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CounterType</th>
<th class="tableblock halign-left valign-top">Id</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcUniReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received TC-UNI messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcUniSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent TC-UNI messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcBeginReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received TC-BEGIN messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcBeginSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent TC-BEGIN messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcContinueReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received TC-CONTINUE messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcContinueSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent TC-CONTINUE messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcEndReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received TC-END messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcEndSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent TC-END messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcPAbortReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received TC-PROVIDER-ABORT messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcPAbortSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent TC-PROVIDER-ABORT messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcUserAbortReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received TC-USER-ABORT messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TcUserAbortSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent TC-USER-ABORT messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InvokeReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received Invoke components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InvokeSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent Invoke components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReturnResultReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received ReturtResult components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReturnResultSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent ReturtResult components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReturnResultLastReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received ReturtResultLast components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReturnResultLastSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent ReturtResultLast components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReturnErrorReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received ReturnError components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReturnErrorSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent ReturnError components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RejectReceivedCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received Reject components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RejectSentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of sent Reject components</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DialogTimeoutCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received DialogTimeouts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DialogReleaseCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of received DialogReleases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AllEstablishedDialogsCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of all established Dialogs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AllLocalEstablishedDialogsCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of all established local originated Dialogs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AllRemoteEstablishedDialogsCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A count of all established remote originated Dialogs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MinDialogsCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A min count of established Dialogs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MaxDialogsCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A max count of established Dialogs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SummaryDouble</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AllDialogsDuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A total duration of all released Dialogs (in seconds)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AverageDialogsDuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An average duration of all released Dialogs (in seconds)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ComplexValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OutgoingDialogsPerApplicatioContextName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An outgoing Dialogs count per ApplicationContextNames (in string form)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ComplexValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncomingDialogsPerApplicatioContextName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An incoming Dialogs count per ApplicationContextNames (in string form)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ComplexValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OutgoingInvokesPerOperationCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An outgoing Invokes count per OperationCodes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ComplexValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncomingInvokesPerOperationCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An incoming Invokes count per OperationCodes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ComplexValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OutgoingErrorsPerErrorCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An outgoing ReturtError count per ErrorCodes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ComplexValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncomingErrorsPerErrorCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An incoming ReturtError count per ErrorCodes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ComplexValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OutgoingRejectPerProblem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An outgoing Reject count per Problem</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ComplexValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncomingRejectPerProblem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An incoming Reject count per Problem</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="map"><a class="anchor" href="#map"></a>12. MAP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mobile application part (MAP) is the protocol that is used to allow the  network nodes within the Network Switching Subsystem (NSS) to communicate with each other in order to provide services such as roaming capability, text messaging (SMS), Unstructured Supplementary Service Data (USSD) and subscriber authentication.</p>
</div>
<div class="paragraph">
<p>MAP provides an application layer on which to build the services that support a  network.
This application layer provides a standardized set of services.  uses the services of the GSM network, specifically the Signaling Connection Control Part (SCCP) and the Transaction Capabilities Application Part (TCAP).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For better understanding of this chapter you must be familiar with the specifications defined in <code>GSM 09.02</code>. JSS7 stack supports MAP versions 1, 2, 3, 4 with java interfaces for a version 3GPP TS 29.002 V10.3.0 (2011-06)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>MAP has full implementation for USSD, SMS and LMS (Location Management Service) services  and partial implementation for Mobility Services (updateLocation, sendAuthenticationInfo,  anyTimeInterrogation, checkIMEI operations). You can find the list of implemented MAP messages here: <a href="https://github.com/RestComm/jss7/blob/master/map/MAPMessagesImplemented.ods">MAPMessagesImplemented.ods</a>.
The document uses color coding to represent the status of the implementation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Green</dt>
<dd>
<p>Fully Implemented</p>
</dd>
<dt class="hdlist1">Red</dt>
<dd>
<p>Interface available (but not yet implemented)</p>
</dd>
<dt class="hdlist1">Yellow</dt>
<dd>
<p>Implementation in progress</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Restcomm jSS7 Any contribution to implement other messages are welcome.
We will provide you with all the help that you may require initially.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_map_usage"><a class="anchor" href="#_map_usage"></a>12.1. jSS7  MAP</h3>
<div class="paragraph">
<p>The methods required to represent the MAP Protocol Stack are defined in the interface <code class="class">org.restcomm.protocols.ss7.map.api.MAPStack</code> which exposes <code class="class">org.restcomm.protocols.ss7.map.api.MAPProvider</code>			that interacts directly with the <code class="class">MAPStack</code>.
This interface defines the methods that will be used by any registered MAP-User application.</p>
</div>
<div class="paragraph">
<p>A MAP-User application must implement interfaces to listen for MAP messages and also implement interfaces for dialogue and component handling primitives.
One such interface is <code class="class">org.restcomm.protocols.ss7.map.api.MAPDialogListener</code> which must be implemented for listening associated with dialog events.
Others are one or more interfaces for listening associated with component events based on  <code class="class">org.restcomm.protocols.ss7.map.api.MAPServiceListener</code> interface.</p>
</div>
<div class="paragraph">
<p>Below is a list of MAP Service Listener classes.
A MAP-User interested in listening for messages specific to a particular MAP Service must implement the corresponding MAPServiceListener.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">LMS operations</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.lsm.MAPServiceLsmListener</code></p>
</dd>
<dt class="hdlist1">Mobility operations</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.mobility.MAPServiceMobilityListener</code></p>
</dd>
<dt class="hdlist1">OAM operations</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.oam.MAPServiceOamListener</code></p>
</dd>
<dt class="hdlist1">PDP context activation operations</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.pdpContextActivation.MAPServicePdpContextActivationListener</code></p>
</dd>
<dt class="hdlist1">SMS operations</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.sms.MAPServiceSmsListener</code></p>
</dd>
<dt class="hdlist1">Supplementary operations</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.supplementary.MAPServiceSupplementaryListener</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>A MAP-User interested in all the services must implement all the above Service Listener classes.</p>
</div>
<div class="paragraph">
<p>The <code class="class">org.restcomm.protocols.ss7.map.MAPStackImpl</code> class  is a concrete implementation of <code class="class">MAPStack</code>.
The MAP-User application gets a reference to <code class="class">MAPProvider</code> by doing a JNDI lookup as explained in <a href="#_design_overview_ss7_service">SS7 Service</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String providerJndiName = "java:/restcomm/ss7/map";
this.mapProvider = ((MAPProvider) ctx.lookup(providerJndiName));
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>To listen for incoming MAP Dialog and MAP Primitive messages, the MAP-User application should register the concrete implementation of <code class="class">MAPDialogListener</code> with <code class="class">MAPProvider</code>.</p>
</div>
<div class="paragraph">
<p>To  listen  for  incoming  MAP  Service  messages, the MAP-User application should register the concrete implementation of <code class="class">MAPServiceListener</code> with the corresponding <code class="class">MAPServiceBase `.
The following [class]`MAPServiceBase</code> services are exposed by the <code class="class">MAPProvider</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Call handling service</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.callhandling.MAPServiceCallHandling</code></p>
</dd>
<dt class="hdlist1">LSM service</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.lsm.MAPServiceLsm</code></p>
</dd>
<dt class="hdlist1">Mobility service</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.mobility.MAPServiceMobility</code></p>
</dd>
<dt class="hdlist1">OAM service</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.oam.MAPServiceOam</code></p>
</dd>
<dt class="hdlist1">PDP context activation service</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.pdpContextActivation.MAPServicePdpContextActivation</code></p>
</dd>
<dt class="hdlist1">SMS service</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.sms.MAPServiceSms</code></p>
</dd>
<dt class="hdlist1">Supplementary service</dt>
<dd>
<p><code class="class">org.restcomm.protocols.ss7.map.api.service.supplementary.MAPServiceSupplementary</code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class UssdClientExample implements MAPDialogListener, MAPServiceSupplementaryListener {
        ....
        mapProvider.addMAPDialogListener(this);
        mapProvider.getMAPServiceSupplementary().addMAPServiceListener(this);
        ....
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prior to using any MAP specific service, the corresponding service should be activated as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">        ....
		// Make the supplementary service activated
        mapProvider.getMAPServiceSupplementary().acivate();
        ....</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MAP-User Application leverages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">MAPParameterFactory</code> to create instances of  <code class="class">USSDString</code>, <code class="class">ISDNAddressString</code>					and many other primitives that are used by MAP services.</p>
</li>
<li>
<p><code class="class">MAPSmsTpduParameterFactory</code> to create instances of  SMS TPDU primitives used for sending SMS messages like <code class="class">SmsDeliverTpdu</code> or <code class="class">SmsSubmitTpdu</code>.</p>
</li>
<li>
<p><code class="class">MAPErrorMessageFactory</code> to create instances of  MAP error messages like <code class="class">MAPErrorMessageSystemFailure</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">		MapParameterFactory paramFact = mapProvider.getMapServiceFactory();
        USSDString ussdString = paramFact.createUSSDString("*125*+31628839999#",
                null);
        ISDNAddressString msisdn = paramFact.createISDNAddressString(
                AddressNature.international_number, NumberingPlan.ISDN,
                "31628838002");</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_map_send_request"><a class="anchor" href="#_map_send_request"></a>12.2. jSS7  Sending a MAP request (processUnstructuredSS-Request as an example)</h3>
<div class="paragraph">
<p>For sending a MAP request, you must do the following at the client side:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a new MAP Dialog</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">// First create Dialog
SccpAddress origAddress = createLocalAddress();
ISDNAddressString origReference = client.getMAPProvider().getMAPParameterFactory().
	createISDNAddressString(AddressNature.international_number, NumberingPlan.land_mobile, "31628968300");
SccpAddress destAddress = createRemoteAddress();
ISDNAddressString destReference = client.getMAPProvider().getMAPParameterFactory().
	createISDNAddressString(AddressNature.international_number, NumberingPlan.land_mobile, "204208300008002");

currentMapDialog = mapProvider.getMAPServiceSupplementary().
	createNewDialog(MAPApplicationContext.getInstance(MAPApplicationContextName.networkUnstructuredSsContext,
	MAPApplicationContextVersion.version2), origAddress,
	destReference, remoteAddress, destReference);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add an Invoke component (processUnstructuredSS-Request message)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">// The dataCodingScheme is still byte, as I am not exactly getting how
// to encode/decode this.
byte ussdDataCodingScheme = 0x0f;
// The Charset is null, here we let system use default Charset (UTF-7 as
// explained in GSM 03.38. However if MAP-User wants, it can set its own
// impl of Charset
USSDString ussdString = paramFact.createUSSDString(ussdMessage, null);
ISDNAddressString msisdn = client.getMAPProvider().getMAPParameterFactory().
createISDNAddressString(AddressNature.international_number, NumberingPlan.ISDN, "31628838002");
currentMapDialog.addProcessUnstructuredSSRequest(ussdDataCodingScheme, ussdString, alertingPattern, msisdn);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Send a TC-Begin message to the server peer</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">currentMapDialog.send();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Wait for a response from the server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the server side, when the TC-Begin message is received, the following sequence of events occur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">void MAPDialogListener. onDialogRequest(MAPDialog mapDialog, AddressString destReference,
	AddressString origReference, MAPExtensionContainer extensionContainer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the request for MAP Dialog processing.
A MAP-User can reject the Dialog by invoking the <code>mapDialog.refuse()</code> method.</p>
</div>
<div class="paragraph">
<p>This is followed by the events (one or more) corresponding to the incoming primitives.
In this case it is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">void MAPServiceSupplementaryListener.onProcessUnstructuredSSRequest(ProcessUnstructuredSSRequest procUnstrReqInd);</code></pre>
</div>
</div>
<div class="paragraph">
<p>When processing component-dependant messages, you can add response components.
In this case it is processUnstructuredSS-Response as an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">		USSDString ussdString = ind.getUSSDString();
		String request = ussdString.getString();

		// processing USSD request
		String response = "Your balans is 100$";

		// The dataCodingScheme is still byte, as I am not exactly getting how
		// to encode/decode this.
		byte ussdDataCodingScheme = 0x0f;
		USSDString ussdResponse = paramFact.createUSSDString(response, null);

		try {mapDialog.addProcessUnstructuredSSResponse(ind.getInvokeId(), ussdDataCodingScheme, ussdResponse);
		} catch (MAPException e) {// TODO Auto-generated catch blocke.printStackTrace();
		}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If preparing the response takes more time, you should return the control and prepare the answer asynchronously in a separate thread.</p>
</div>
<div class="paragraph">
<p>If error or reject primitives are included in a TCAP message, the following events occur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void onErrorComponent(MAPDialog mapDialog, Long invokeId, MAPErrorMessage mapErrorMessage);
public void onProviderErrorComponent(MAPDialog mapDialog, Long invokeId, MAPProviderError providerError);
public void onRejectComponent(MAPDialog mapDialog, Long invokeId, Problem problem);</code></pre>
</div>
</div>
<div class="paragraph">
<p>After all incoming components have been processed, the event <code>onDialogDelimiter(MAPDialog mapDialog);</code> or in the case of TC-END, <code>onDialogClose(MAPDialog mapDialog)</code> is invoked.
If all response components have been prepared you can tell the stack to send the response:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">mapDialog.close(false);</code> - to send TC-END</p>
</li>
<li>
<p><code class="class">mapDialog.send();</code> - to send TC-CONTINUE</p>
</li>
<li>
<p><code class="class">mapDialog.close(true);</code> - sends TC-END without any components (prearrangedEnd)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instead of <code>send()</code> and <code>close(boolean prearrangedEnd</code>) methods you can invoke  <code>sendDelayed()</code> or <code>closeDelayed(boolean prearrangedEnd)</code> methods.
These methods are similar to <code>send()</code> and <code>close()</code> methods, but when these methods are invoked from MAP Service message handlers (component handler methods called by stack while parsing incoming components), real sending and dialog closing will occur only when all incoming component events and  <code>onDialogDelimiter() ` or  `onDialogClose()</code> is processed.
If all response components have been prepared you should return the control and  send a response when all components are ready.</p>
</div>
<div class="paragraph">
<p>In case of an error, you can terminate a MAP dialog in any method by invoking</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">mapDialog.abort(mapUserAbortChoice);</code> - sends TC-U-ABORT primitive</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there are no local actions or there is no response from a peer for a long time, a timeout occurs and the following methods are invoked:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">MAPDialogListener.onDialogTimeout(MAPDialog mapDialog);</code></p>
</li>
<li>
<p><code class="class">MAPServiceListener.onInvokeTimeout(MAPDialog mapDialog, Long invokeId);</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the <code class="class">onDialogTimeout()</code> method you can invoke <code class="class">mapDialog.keepAlive();</code> to prevent a Dialog from closing.
For preventing an Invoke timeout you should invoke <code class="class">resetInvokeTimer(Long invokeId);</code>  before <code class="class">onInvokeTimeout()</code> occurs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_map_usage_example"><a class="anchor" href="#_map_usage_example"></a>12.3. jSS7  MAP Usage</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.restcomm.protocols.ss7.map;

import javax.naming.InitialContext;
import javax.naming.NamingException;

import org.restcomm.protocols.ss7.map.api.MAPApplicationContext;
import org.restcomm.protocols.ss7.map.api.MAPApplicationContextName;
import org.restcomm.protocols.ss7.map.api.MAPApplicationContextVersion;
import org.restcomm.protocols.ss7.map.api.MAPDialog;
import org.restcomm.protocols.ss7.map.api.MAPDialogListener;
import org.restcomm.protocols.ss7.map.api.MAPException;
import org.restcomm.protocols.ss7.map.api.MAPMessage;
import org.restcomm.protocols.ss7.map.api.MAPParameterFactory;
import org.restcomm.protocols.ss7.map.api.MAPProvider;
import org.restcomm.protocols.ss7.map.api.datacoding.CBSDataCodingScheme;
import org.restcomm.protocols.ss7.map.api.dialog.MAPAbortProviderReason;
import org.restcomm.protocols.ss7.map.api.dialog.MAPAbortSource;
import org.restcomm.protocols.ss7.map.api.dialog.MAPNoticeProblemDiagnostic;
import org.restcomm.protocols.ss7.map.api.dialog.MAPRefuseReason;
import org.restcomm.protocols.ss7.map.api.dialog.MAPUserAbortChoice;
import org.restcomm.protocols.ss7.map.api.errors.MAPErrorMessage;
import org.restcomm.protocols.ss7.map.api.primitives.AddressString;
import org.restcomm.protocols.ss7.map.api.primitives.AlertingPattern;
import org.restcomm.protocols.ss7.map.api.primitives.IMSI;
import org.restcomm.protocols.ss7.map.api.primitives.ISDNAddressString;
import org.restcomm.protocols.ss7.map.api.primitives.MAPExtensionContainer;
import org.restcomm.protocols.ss7.map.api.primitives.USSDString;
import org.restcomm.protocols.ss7.map.api.service.supplementary.MAPDialogSupplementary;
import org.restcomm.protocols.ss7.map.api.service.supplementary.MAPServiceSupplementaryListener;
import org.restcomm.protocols.ss7.map.api.service.supplementary.ProcessUnstructuredSSRequest;
import org.restcomm.protocols.ss7.map.api.service.supplementary.ProcessUnstructuredSSResponse;
import org.restcomm.protocols.ss7.map.api.service.supplementary.UnstructuredSSNotifyRequest;
import org.restcomm.protocols.ss7.map.api.service.supplementary.UnstructuredSSNotifyResponse;
import org.restcomm.protocols.ss7.map.api.service.supplementary.UnstructuredSSRequest;
import org.restcomm.protocols.ss7.map.api.service.supplementary.UnstructuredSSResponse;
import org.restcomm.protocols.ss7.map.datacoding.CBSDataCodingSchemeImpl;
import org.restcomm.protocols.ss7.sccp.parameter.SccpAddress;
import org.restcomm.protocols.ss7.tcap.asn.ApplicationContextName;
import org.restcomm.protocols.ss7.tcap.asn.comp.Problem;

/**
 * A simple example show-casing how to use MAP stack. Demonstrates how new MAP
 * Dialog is craeted and Invoke is sent to peer.
 *
 * @author Amit Bhayani
 *
 */
public class UssdClientExample implements MAPDialogListener, MAPServiceSupplementaryListener {

	private MAPProvider mapProvider;
	private MAPParameterFactory paramFact;

	public UssdClientExample() throws NamingException {
		InitialContext ctx = new InitialContext();
		try {String providerJndiName = "java:/restcomm/ss7/map";this.mapProvider = ((MAPProvider) ctx.lookup(providerJndiName));
		} finally {ctx.close();
		}
	}

	public MAPProvider getMAPProvider() {
		return mapProvider;
	}

	public void start() {
		// Listen for Dialog events
		mapProvider.addMAPDialogListener(this);
		// Listen for USSD related messages
		mapProvider.getMAPServiceSupplementary().addMAPServiceListener(this);

		// Make the supplementary service activated
		mapProvider.getMAPServiceSupplementary().acivate();
	}

	public void stop() {
		mapProvider.getMAPServiceSupplementary().deactivate();
	}

	public void sendProcessUssdRequest(SccpAddress origAddress, AddressString origReference, SccpAddress remoteAddress,AddressString destReference, String ussdMessage, AlertingPattern alertingPattern, ISDNAddressString msisdn)throws MAPException {
		// First create Dialog
		MAPDialogSupplementary currentMapDialog = mapProvider.getMAPServiceSupplementary().createNewDialog(	MAPApplicationContext.getInstance(MAPApplicationContextName.networkUnstructuredSsContext,			MAPApplicationContextVersion.version2), origAddress, destReference, remoteAddress,	destReference);

		CBSDataCodingScheme ussdDataCodingScheme = new CBSDataCodingSchemeImpl(0x0f);
		// The Charset is null, here we let system use default Charset (UTF-7 as
		// explained in GSM 03.38. However if MAP-User wants, it can set its own
		// impl of Charset
		USSDString ussdString = paramFact.createUSSDString(ussdMessage, null, null);

		currentMapDialog.addProcessUnstructuredSSRequest(ussdDataCodingScheme, ussdString, alertingPattern, msisdn);
		// This will initiate the TC-BEGIN with INVOKE component
		currentMapDialog.send();
	}

	public void onProcessUnstructuredSSResponse(ProcessUnstructuredSSResponse ind) {
		USSDString ussdString = ind.getUSSDString();
		try {String response = ussdString.getString(null);// processing USSD response
		} catch (MAPException e) {// TODO Auto-generated catch blocke.printStackTrace();
		}
	}

	public void onErrorComponent(MAPDialog mapDialog, Long invokeId, MAPErrorMessage mapErrorMessage) {
		// TODO Auto-generated method stub

	}

	public void onRejectComponent(MAPDialog mapDialog, Long invokeId, Problem problem, boolean isLocalOriginated) {
		// TODO Auto-generated method stub

	}

	public void onInvokeTimeout(MAPDialog mapDialog, Long invokeId) {
		// TODO Auto-generated method stub

	}

	public void onMAPMessage(MAPMessage mapMessage) {
		// TODO Auto-generated method stub

	}

	public void onProcessUnstructuredSSRequest(ProcessUnstructuredSSRequest procUnstrReqInd) {
		// TODO Auto-generated method stub

	}

	public void onUnstructuredSSRequest(UnstructuredSSRequest unstrReqInd) {
		// TODO Auto-generated method stub

	}

	public void onUnstructuredSSResponse(UnstructuredSSResponse unstrResInd) {
		// TODO Auto-generated method stub

	}

	public void onUnstructuredSSNotifyRequest(UnstructuredSSNotifyRequest unstrNotifyInd) {
		// TODO Auto-generated method stub

	}

	public void onUnstructuredSSNotifyResponse(UnstructuredSSNotifyResponse unstrNotifyInd) {
		// TODO Auto-generated method stub

	}

	public void onDialogDelimiter(MAPDialog mapDialog) {
		// TODO Auto-generated method stub

	}

	public void onDialogRequest(MAPDialog mapDialog, AddressString destReference, AddressString origReference,MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogRequestEricsson(MAPDialog mapDialog, AddressString destReference, AddressString origReference,IMSI eriImsi, AddressString eriVlrNo) {
		// TODO Auto-generated method stub

	}

	public void onDialogAccept(MAPDialog mapDialog, MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogUserAbort(MAPDialog mapDialog, MAPUserAbortChoice userReason,MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogProviderAbort(MAPDialog mapDialog, MAPAbortProviderReason abortProviderReason,MAPAbortSource abortSource, MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogClose(MAPDialog mapDialog) {
		// TODO Auto-generated method stub

	}

	public void onDialogNotice(MAPDialog mapDialog, MAPNoticeProblemDiagnostic noticeProblemDiagnostic) {
		// TODO Auto-generated method stub

	}

	public void onDialogRelease(MAPDialog mapDialog) {
	}

	public void onDialogTimeout(MAPDialog mapDialog) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogReject(MAPDialog mapDialog, MAPRefuseReason refuseReason,ApplicationContextName alternativeApplicationContext, MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.restcomm.protocols.ss7.map;

import javax.naming.InitialContext;
import javax.naming.NamingException;

import org.restcomm.protocols.ss7.map.api.MAPDialog;
import org.restcomm.protocols.ss7.map.api.MAPDialogListener;
import org.restcomm.protocols.ss7.map.api.MAPException;
import org.restcomm.protocols.ss7.map.api.MAPMessage;
import org.restcomm.protocols.ss7.map.api.MAPParameterFactory;
import org.restcomm.protocols.ss7.map.api.MAPProvider;
import org.restcomm.protocols.ss7.map.api.datacoding.CBSDataCodingScheme;
import org.restcomm.protocols.ss7.map.api.dialog.MAPAbortProviderReason;
import org.restcomm.protocols.ss7.map.api.dialog.MAPAbortSource;
import org.restcomm.protocols.ss7.map.api.dialog.MAPNoticeProblemDiagnostic;
import org.restcomm.protocols.ss7.map.api.dialog.MAPRefuseReason;
import org.restcomm.protocols.ss7.map.api.dialog.MAPUserAbortChoice;
import org.restcomm.protocols.ss7.map.api.errors.MAPErrorMessage;
import org.restcomm.protocols.ss7.map.api.primitives.AddressString;
import org.restcomm.protocols.ss7.map.api.primitives.IMSI;
import org.restcomm.protocols.ss7.map.api.primitives.MAPExtensionContainer;
import org.restcomm.protocols.ss7.map.api.primitives.USSDString;
import org.restcomm.protocols.ss7.map.api.service.supplementary.MAPDialogSupplementary;
import org.restcomm.protocols.ss7.map.api.service.supplementary.MAPServiceSupplementaryListener;
import org.restcomm.protocols.ss7.map.api.service.supplementary.ProcessUnstructuredSSRequest;
import org.restcomm.protocols.ss7.map.api.service.supplementary.ProcessUnstructuredSSResponse;
import org.restcomm.protocols.ss7.map.api.service.supplementary.UnstructuredSSNotifyRequest;
import org.restcomm.protocols.ss7.map.api.service.supplementary.UnstructuredSSNotifyResponse;
import org.restcomm.protocols.ss7.map.api.service.supplementary.UnstructuredSSRequest;
import org.restcomm.protocols.ss7.map.api.service.supplementary.UnstructuredSSResponse;
import org.restcomm.protocols.ss7.map.datacoding.CBSDataCodingSchemeImpl;
import org.restcomm.protocols.ss7.tcap.asn.ApplicationContextName;
import org.restcomm.protocols.ss7.tcap.asn.comp.Problem;

/**
 * A simple example show-casing how to use MAP stack. Demonstrates how to listen
 * to incoming Dialog from peer and process the MAP messages and send response.
 *
 * @author Amit Bhayani
 *
 */
public class UssdServerExample implements MAPDialogListener, MAPServiceSupplementaryListener {

	private MAPProvider mapProvider;
	private MAPParameterFactory paramFact;

	public UssdServerExample() throws NamingException {
		InitialContext ctx = new InitialContext();
		try {String providerJndiName = "java:/restcomm/ss7/map";this.mapProvider = ((MAPProvider) ctx.lookup(providerJndiName));
		} finally {ctx.close();
		}
	}

	public MAPProvider getMAPProvider() {
		return mapProvider;
	}

	public void start() {
		// Listen for Dialog events
		mapProvider.addMAPDialogListener(this);
		// Listen for USSD related messages
		mapProvider.getMAPServiceSupplementary().addMAPServiceListener(this);

		// Make the supplementary service activated
		mapProvider.getMAPServiceSupplementary().acivate();
	}

	public void stop() {
		mapProvider.getMAPServiceSupplementary().deactivate();
	}

	public void onProcessUnstructuredSSRequest(ProcessUnstructuredSSRequest ind) {

		USSDString ussdString = ind.getUSSDString();
		MAPDialogSupplementary currentMapDialog = ind.getMAPDialog();

		try {String request = ussdString.getString(null);
// processing USSD requestString response = "Your balans is 100$";
CBSDataCodingScheme ussdDataCodingScheme = new CBSDataCodingSchemeImpl(0x0f);USSDString ussdResponse = paramFact.createUSSDString(response, null, null);
currentMapDialog.addProcessUnstructuredSSResponse(ind.getInvokeId(), ussdDataCodingScheme, ussdResponse);
		} catch (MAPException e1) {// TODO Auto-generated catch blocke1.printStackTrace();
		}
	}

	public void onDialogDelimiter(MAPDialog mapDialog) {
		// This will initiate the TC-END with ReturnResultLast component
		try {mapDialog.send();
		} catch (MAPException e) {// TODO Auto-generated catch blocke.printStackTrace();
		}
	}

	public void onErrorComponent(MAPDialog mapDialog, Long invokeId, MAPErrorMessage mapErrorMessage) {
		// TODO Auto-generated method stub

	}

	public void onRejectComponent(MAPDialog mapDialog, Long invokeId, Problem problem, boolean isLocalOriginated) {
		// TODO Auto-generated method stub

	}

	public void onInvokeTimeout(MAPDialog mapDialog, Long invokeId) {
		// TODO Auto-generated method stub

	}

	public void onMAPMessage(MAPMessage mapMessage) {
		// TODO Auto-generated method stub

	}

	public void onProcessUnstructuredSSResponse(ProcessUnstructuredSSResponse ind) {
		// TODO Auto-generated method stub

	}

	public void onUnstructuredSSRequest(UnstructuredSSRequest unstrReqInd) {
		// TODO Auto-generated method stub

	}

	public void onUnstructuredSSResponse(UnstructuredSSResponse unstrResInd) {
		// TODO Auto-generated method stub

	}

	public void onUnstructuredSSNotifyRequest(UnstructuredSSNotifyRequest unstrNotifyInd) {
		// TODO Auto-generated method stub

	}

	public void onUnstructuredSSNotifyResponse(UnstructuredSSNotifyResponse unstrNotifyInd) {
		// TODO Auto-generated method stub

	}

	public void onDialogRequest(MAPDialog mapDialog, AddressString destReference, AddressString origReference,MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogRequestEricsson(MAPDialog mapDialog, AddressString destReference, AddressString origReference,IMSI eriImsi, AddressString eriVlrNo) {
		// TODO Auto-generated method stub

	}

	public void onDialogAccept(MAPDialog mapDialog, MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogReject(MAPDialog mapDialog, MAPRefuseReason refuseReason,ApplicationContextName alternativeApplicationContext, MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogUserAbort(MAPDialog mapDialog, MAPUserAbortChoice userReason,MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogProviderAbort(MAPDialog mapDialog, MAPAbortProviderReason abortProviderReason,MAPAbortSource abortSource, MAPExtensionContainer extensionContainer) {
		// TODO Auto-generated method stub

	}

	public void onDialogClose(MAPDialog mapDialog) {
		// TODO Auto-generated method stub

	}

	public void onDialogNotice(MAPDialog mapDialog, MAPNoticeProblemDiagnostic noticeProblemDiagnostic) {
		// TODO Auto-generated method stub

	}

	public void onDialogRelease(MAPDialog mapDialog) {
	}

	public void onDialogTimeout(MAPDialog mapDialog) {
		// TODO Auto-generated method stub

	}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cap"><a class="anchor" href="#cap"></a>13. CAP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The  (Customized Applications for Mobile network Enhanced Logic) Application Part (CAP) protocol is used by network operators to provide their subscribers  with operator specific services even when roaming outside the HPLMN.  provides services such as prepaid roaming services, fraud control, special numbers  and closed user groups (e.g., office extension numbers that work everywhere). CAP has been defined in four versions (phases), each of which has an accompanying specification that builds upon the previous phase.
This application layer provides a standardized set of services.  uses the services of the <code>SS7</code>		network, specifically the Signaling Connection Control Part (SCCP)  and the Transaction Capabilities Application Part (TCAP)</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For better understanding of this chapter you must be familiar with the specifications defined in <code>3GPP TS 22.078</code> (service aspects) and <code>3GPP TS 23.078</code> (technical realization). JSS7 stack supports CAP versions 1, 2, 3, 4 with java interfaces for a version V11.0.0 (2011-09).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Restcomm jSS7 CAP has full implementation for Phase 1 and Phase 2.
The list of implemented operations can be found at <a href="https://github.com/RestComm/jss7/blob/master/cap/CAPMessagesImplemented.ods">CAPMessagesImplemented.ods</a>.
You can find the list of implemented operations here: <a href="https://github.com/RestComm/jss7/blob/master/cap/CAPMessagesImplemented.ods">CAPMessagesImplemented.ods</a>.
The document uses color coding to represent the status of the implementation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Green</dt>
<dd>
<p>Fully Implemented</p>
</dd>
<dt class="hdlist1">Red</dt>
<dd>
<p>Interface available (but not yet implemented)</p>
</dd>
<dt class="hdlist1">Yellow</dt>
<dd>
<p>Implementation in progress</p>
</dd>
<dt class="hdlist1">Blue</dt>
<dd>
<p>Implemeted only for CAP V2 and not available for CAP V3 and V4</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Restcomm jSS7 Any contribution to implement other messages are welcome.
We will provide you with all the help that you may require initially.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_cap_usage"><a class="anchor" href="#_cap_usage"></a>13.1. jSS7  CAP</h3>
<div class="paragraph">
<p>The <code class="class">org.restcomm.protocols.ss7.cap.api.CAPStack</code>			interface defines the methods required to represent CAP Protocol Stack.
CAPStack exposes <code class="class">org.restcomm.protocols.ss7.cap.api.CAPProvider</code>			that interacts directly with CAPStack.
This interface defines the methods that will be used by any registered CAP-User application.
CAP-User application must implement interfaces to listen for CAP messages and for dialogue and component handling primitives.
One interface is <code class="class">org.restcomm.protocols.ss7.cap.api.CAPDialogListener</code>  (listening associated with dialog events). Others are one or more interfaces for listening to messages associated with component events based on  <code class="class">org.restcomm.protocols.ss7.cap.api.CAPServiceListener</code> interface.</p>
</div>
<div class="paragraph">
<p>Each CAP-User interested in listening to messages specific to a CAP Service must implement the specific <code class="class">CAPServiceListener</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CAP-User interested only in circuit switched call operations implements <code class="class">org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.
CAPServiceCircuitSwitchedCallListener</code></p>
</li>
<li>
<p>CAP-User interested only in GPRS operations implements <code class="class">org.restcomm.protocols.ss7.cap.api.service.gprs.CAPServiceGprsListener</code></p>
</li>
<li>
<p>CAP-User interested only in SMS operations implements <code class="class">org.restcomm.protocols.ss7.cap.api.service.sms.CAPServiceSmsListener</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>CAP-User interested in all the services must implement all the service listener classes.</p>
</div>
<div class="paragraph">
<p>The <code class="class">org.restcomm.protocols.ss7.cap.CAPStackImpl</code>  is a concrete implementation of <code class="class">CAPStack.</code>			The CAP-User application gets access to <code class="class">CAPProvider</code> by doing a JNDI look-up as explained in <a href="#_design_overview_ss7_service">SS7 Service</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String providerJndiName = "java:/restcomm/ss7/cap";
this.capProvider = ((CAPProvider) ctx.lookup(providerJndiName));
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CAP-User application should register the concrete implementation of <code class="class">CAPDialogListener</code>  with <code class="class">CAPProvider</code> to listen for incoming CAP Dialog and CAP Primitive messages.
The CAP-User application should register the concrete implementation of <code class="class">CAPServiceListener</code>  with  corresponding <code class="class">CAPServiceBase ` to  listen  for  incoming  CAP  Service  messages.
Following CAPServiceBase are exposed by [class]`CAPProvider</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For circuit switched call service <code class="class">org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.
CAPServiceCircuitSwitchedCall</code></p>
</li>
<li>
<p>For GPRS service <code class="class">org.restcomm.protocols.ss7.cap.api.service.gprs.CAPServiceGprs</code></p>
</li>
<li>
<p>For SMS service <code class="class">org.restcomm.protocols.ss7.cap.api.service.sms.CAPServiceSms</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class CAPExample implements CAPDialogListener, CAPServiceCircuitSwitchedCallListener {
	    ....
        capProvider.addCAPDialogListener(this);
		capProvider.getCAPServiceCircuitSwitchedCall().addCAPServiceListener(this);
        ....
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before any CAP specific service can be used, the corresponding service should be activated as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">        ....
		// Make the circuitSwitchedCall service activated
        capProvider.getCAPServiceCircuitSwitchedCall().acivate();
        ....</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CAP-User Application leverages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">MAPParameterFactory</code> to create instances of  <code class="class">IMSI</code>, <code class="class">ISDNAddressString</code>					and many other MAP primitives that are used by CAP services.</p>
</li>
<li>
<p><code class="class">CAPParameterFactory</code> to create instances of  CAP primitives that are used by CAP services.</p>
</li>
<li>
<p><code class="class">ISUPParameterFactory</code> to create instances of  ISUP primitives that are used by CAP services.</p>
</li>
<li>
<p><code class="class">INAPPParameterFactory</code> to create instances of  INAP primitives that are used by CAP services.</p>
</li>
<li>
<p><code class="class">CAPErrorMessageFactory</code> to create instances of  CAP error messages like <code class="class">CAPErrorMessageSystemFailure</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">		MapParameterFactory mapParamFact = capProvider.getMapServiceFactory();
		CapParameterFactory capParamFact = capProvider.getCapServiceFactory();
        ISDNAddressString msisdn = mapParamFact.createISDNAddressString(
                AddressNature.international_number, NumberingPlan.ISDN,
                "31628838002");
		BCSMEvent ev = capParamFact.createBCSMEvent(EventTypeBCSM.routeSelectFailure,
				MonitorMode.notifyAndContinue, null, null, false);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cap_send_request"><a class="anchor" href="#_cap_send_request"></a>13.2. jSS7  Sending a CAP request (InitialDPRequest as an example)</h3>
<div class="paragraph">
<p>For sending a CAP request you must do the following at the SSF side:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a new CAP Dialog</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">// First create Dialog
SccpAddress origAddress = createLocalAddress();
SccpAddress destAddress = createRemoteAddress();
CAPApplicationContext acn = CAPApplicationContext.CapV2_gsmSSF_to_gsmSCF;
currentCapDialog = capProvider.getCAPServiceCircuitSwitchedCall().
	createNewDialog(acn, origAddress, remoteAddress);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add an Invoke component (InitialDPRequest message)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">int serviceKey = 1;

CalledPartyNumber calledPartyNumber = client.getCAPProvider().
	getISUPParameterFactory().createCalledPartyNumber();
calledPartyNumber.setAddress("552348762");
calledPartyNumber.setNatureOfAddresIndicator(NAINumber._NAI_INTERNATIONAL_NUMBER);
calledPartyNumber.setNumberingPlanIndicator(CalledPartyNumber._NPI_ISDN);
calledPartyNumber.setInternalNetworkNumberIndicator(CalledPartyNumber._INN_ROUTING_ALLOWED);
CalledPartyNumberCap calledPartyNumberCap = client.getCAPProvider().
	getCAPParameterFactory().createCalledPartyNumberCap(calledPartyNumber);

CallingPartyNumber callingPartyNumber = client.getCAPProvider().
	getISUPParameterFactory().createCallingPartyNumber();
callingPartyNumber.setAddress("55998223");
callingPartyNumber.setNatureOfAddresIndicator(NAINumber._NAI_INTERNATIONAL_NUMBER);
callingPartyNumber.setNumberingPlanIndicator(CalledPartyNumber._NPI_ISDN);
callingPartyNumber.setAddressRepresentationREstrictedIndicator(CallingPartyNumber._APRI_ALLOWED);
callingPartyNumber.setScreeningIndicator(CallingPartyNumber._SI_NETWORK_PROVIDED);
CallingPartyNumberCap callingPartyNumberCap = client.getCAPProvider().
	getCAPParameterFactory().createCallingPartyNumberCap(callingPartyNumber);

LocationNumber locationNumber = client.getCAPProvider().getISUPParameterFactory().
	createLocationNumber();
locationNumber.setAddress("55200001");
locationNumber.setNatureOfAddresIndicator(NAINumber._NAI_INTERNATIONAL_NUMBER);
locationNumber.setNumberingPlanIndicator(LocationNumber._NPI_ISDN);
locationNumber.setAddressRepresentationRestrictedIndicator(LocationNumber._APRI_ALLOWED);
locationNumber.setScreeningIndicator(LocationNumber._SI_NETWORK_PROVIDED);
locationNumber.setInternalNetworkNumberIndicator(LocationNumber._INN_ROUTING_ALLOWED);
LocationNumberCap locationNumberCap = client.getCAPProvider().getCAPParameterFactory().
	createLocationNumberCap(locationNumber);

ISDNAddressString vlrNumber = client.getCAPProvider().getMAPParameterFactory()
		.createISDNAddressString(AddressNature.international_number,
		NumberingPlan.ISDN, "552000002");
LocationInformation locationInformation = client.getCAPProvider().getMAPParameterFactory()
		.createLocationInformation(10, null, vlrNumber, null,
		null, null, null, vlrNumber, null, false, false, null, null);

currentCapDialog.addInitialDPRequest(serviceKey, calledPartyNumber, callingPartyNumber,
		null, null, null, locationNumber, null, null, null, null, null,
		eventTypeBCSM, null, null, null, null, null, null, null, false,
		null, null, locationInformation, null, null, null, null, null, false, null);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Send a TC-Begin message to the server peer</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">// This will initiate the TC-BEGIN with INVOKE component
currentCapDialog.send();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Wait for a response and other instructions from the SCF</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the SCF side when the TC-Begin message is received, the following sequence of events occur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">void CAPDialogListener.onDialogRequest(CAPDialog capDialog,
	CAPGprsReferenceNumber capGprsReferenceNumber);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the request for CAP Dialog processing.
A CAP-User can reject the Dialog by invoking <code>capDialog.abort(CAPUserAbortReason abortReason)</code> method.</p>
</div>
<div class="paragraph">
<p>Then the incoming primitives corresponding events (one or more) occur.
In this case it is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">void CAPServiceCircuitSwitchedCallListener.onInitialDPRequest(InitialDPRequest ind);</code></pre>
</div>
</div>
<div class="paragraph">
<p>When processing component-dependant messages you can add response components or add other Invoke requests.
In this case it is RequestReportBCSMEventRequest as an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ArrayList&lt;BCSMEvent&gt; bcsmEventList = new ArrayList&lt;BCSMEvent&gt;();
BCSMEvent ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(
	EventTypeBCSM.routeSelectFailure, MonitorMode.notifyAndContinue,
	null, null, false);
bcsmEventList.add(ev);
ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(EventTypeBCSM.oCalledPartyBusy,
	MonitorMode.interrupted, null, null, false);
bcsmEventList.add(ev);
ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(EventTypeBCSM.oNoAnswer,
	MonitorMode.interrupted, null, null, false);
bcsmEventList.add(ev);
ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(EventTypeBCSM.oAnswer,
	MonitorMode.notifyAndContinue, null, null, false);
bcsmEventList.add(ev);
LegID legId = this.capProvider.getINAPParameterFactory().createLegID(true, LegType.leg1);
ev = this.capProvider.getCAPParameterFactory()
		.createBCSMEvent(EventTypeBCSM.oDisconnect, MonitorMode.notifyAndContinue, legId, null, false);
bcsmEventList.add(ev);
legId = this.capProvider.getINAPParameterFactory().createLegID(true, LegType.leg2);
ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(EventTypeBCSM.oDisconnect,
	MonitorMode.interrupted, legId, null, false);
bcsmEventList.add(ev);
ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(EventTypeBCSM.oAbandon,
	MonitorMode.notifyAndContinue, null, null, false);
bcsmEventList.add(ev);
currentCapDialog.addRequestReportBCSMEventRequest(bcsmEventList, null);

currentCapDialog.send();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If preparing the response takes time, you should return the control and prepare the answer in a separate thread.</p>
</div>
<div class="paragraph">
<p>If error or reject primitives are included into a TCAP message the following events occur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void onErrorComponent(CAPDialog capDialog, Long invokeId, CAPErrorMessage capErrorMessage);
public void onProviderErrorComponent(CAPDialog capDialog, Long invokeId,
	CAPComponentErrorReason providerError);
public void onRejectComponent(CAPDialog capDialog, Long invokeId, Problem problem);</code></pre>
</div>
</div>
<div class="paragraph">
<p>After all incoming components have been processed, the event <code>onDialogDelimiter(CAPDialog capDialog);</code>  event is invoked (or <code>onDialogClose(CAPDialog capDialog)</code> in TC-END case).  If all response components have been prepared you can tell the Stack to send response:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">capDialog.close(false);</code> - to send TC-END</p>
</li>
<li>
<p><code class="class">capDialog.send();</code> - to send TC-CONTINUE</p>
</li>
<li>
<p><code class="class">capDialog.close(true);</code> - sends TC-END without any components (prearrangedEnd)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Instead of the methods <code>send()</code> and <code>close(boolean prearrangedEnd)</code>, you can invoke  <code>sendDelayed()</code> or <code>closeDelayed(boolean prearrangedEnd)</code>.
These methods are the same as  <code>send()</code> and <code>close(boolean prearrangedEnd)</code> methods, but when invoking them from events of parsing incoming components real sending and dialog closing will occur only when all incoming component events and onDialogDelimiter() or onDialogClose() would be processed.
If all response components have been prepared you should return the control and  send a response when all components are ready.</p>
</div>
<div class="paragraph">
<p>In case of an error, you can terminate a CAP dialog in any method by invoking:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">capDialog.abort(CAPUserAbortReason abortReason);</code> - sends TC-U-ABORT primitive</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there are no local actions or no response from a remote size for a long time, timeouts occur and the following methods are invoked:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code class="class">CAPDialogListener.onDialogTimeout(CAPDialog capDialog);</code></p>
</li>
<li>
<p><code class="class">CAPServiceListener.onInvokeTimeout(CAPDialog capDialog, Long invokeId);</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the <code class="class">onDialogTimeout()</code> method you can invoke <code class="class">capDialog.keepAlive();</code> to prevent a Dialog from closing.
For preventing an Invoke timeout you should invoke <code class="class">resetInvokeTimer(Long invokeId);</code>  (before <code class="class">onInvokeTimeout()</code> occurs).</p>
</div>
</div>
<div class="sect2">
<h3 id="_cap_usage_example"><a class="anchor" href="#_cap_usage_example"></a>13.3. jSS7  CAP Usage</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.restcomm.protocols.ss7.cap;

import org.restcomm.protocols.ss7.cap.api.EsiBcsm.OAnswerSpecificInfo;
import org.restcomm.protocols.ss7.cap.api.EsiBcsm.ODisconnectSpecificInfo;
import org.restcomm.protocols.ss7.cap.api.isup.CalledPartyNumberCap;
import org.restcomm.protocols.ss7.cap.api.isup.CallingPartyNumberCap;
import org.restcomm.protocols.ss7.cap.api.isup.CauseCap;
import org.restcomm.protocols.ss7.cap.api.isup.LocationNumberCap;
import org.restcomm.protocols.ss7.cap.api.primitives.EventTypeBCSM;
import org.restcomm.protocols.ss7.cap.api.primitives.ReceivingSideID;
import org.restcomm.protocols.ss7.inap.api.primitives.LegType;
import org.restcomm.protocols.ss7.inap.api.primitives.MiscCallInfo;
import org.restcomm.protocols.ss7.inap.api.primitives.MiscCallInfoMessageType;
import org.restcomm.protocols.ss7.indicator.RoutingIndicator;
import org.restcomm.protocols.ss7.isup.message.parameter.CalledPartyNumber;
import org.restcomm.protocols.ss7.isup.message.parameter.CallingPartyNumber;
import org.restcomm.protocols.ss7.isup.message.parameter.CauseIndicators;
import org.restcomm.protocols.ss7.isup.message.parameter.LocationNumber;
import org.restcomm.protocols.ss7.isup.message.parameter.NAINumber;
import org.restcomm.protocols.ss7.map.api.primitives.AddressNature;
import org.restcomm.protocols.ss7.map.api.primitives.ISDNAddressString;
import org.restcomm.protocols.ss7.map.api.primitives.NumberingPlan;
import org.restcomm.protocols.ss7.map.api.service.mobility.subscriberInformation.LocationInformation;
import org.restcomm.protocols.ss7.sccp.parameter.SccpAddress;

public class Example {

	private static SccpAddress createLocalAddress() {
		return new SccpAddress(RoutingIndicator.ROUTING_BASED_ON_DPC_AND_SSN, 1, null, 146);
	}

	private static SccpAddress createRemoteAddress() {
		return new SccpAddress(RoutingIndicator.ROUTING_BASED_ON_DPC_AND_SSN, 2, null, 146);
	}


	public static void startCallSsf() throws Exception {
		CallSsfExample client = new CallSsfExample();

		client.start();

		// starting a call
		SccpAddress origAddress = createLocalAddress();
		SccpAddress destAddress = createRemoteAddress();

		int serviceKey = 1;

		CalledPartyNumber calledPartyNumber = client.getCAPProvider().getISUPParameterFactory()
			.createCalledPartyNumber();
		calledPartyNumber.setAddress("552348762");
		calledPartyNumber.setNatureOfAddresIndicator(NAINumber._NAI_INTERNATIONAL_NUMBER);
		calledPartyNumber.setNumberingPlanIndicator(CalledPartyNumber._NPI_ISDN);
		calledPartyNumber.setInternalNetworkNumberIndicator(CalledPartyNumber._INN_ROUTING_ALLOWED);
		CalledPartyNumberCap calledPartyNumberCap = client.getCAPProvider()
			.getCAPParameterFactory().createCalledPartyNumberCap(calledPartyNumber);

		CallingPartyNumber callingPartyNumber = client.getCAPProvider().getISUPParameterFactory()
			.createCallingPartyNumber();
		callingPartyNumber.setAddress("55998223");
		callingPartyNumber.setNatureOfAddresIndicator(NAINumber._NAI_INTERNATIONAL_NUMBER);
		callingPartyNumber.setNumberingPlanIndicator(CalledPartyNumber._NPI_ISDN);
		callingPartyNumber.setAddressRepresentationREstrictedIndicator(CallingPartyNumber._APRI_ALLOWED);
		callingPartyNumber.setScreeningIndicator(CallingPartyNumber._SI_NETWORK_PROVIDED);
		CallingPartyNumberCap callingPartyNumberCap = client.getCAPProvider()
			.getCAPParameterFactory().createCallingPartyNumberCap(callingPartyNumber);

		LocationNumber locationNumber = client.getCAPProvider().getISUPParameterFactory()
		.createLocationNumber();
		locationNumber.setAddress("55200001");
		locationNumber.setNatureOfAddresIndicator(NAINumber._NAI_INTERNATIONAL_NUMBER);
		locationNumber.setNumberingPlanIndicator(LocationNumber._NPI_ISDN);
		locationNumber.setAddressRepresentationRestrictedIndicator(LocationNumber._APRI_ALLOWED);
		locationNumber.setScreeningIndicator(LocationNumber._SI_NETWORK_PROVIDED);
		locationNumber.setInternalNetworkNumberIndicator(LocationNumber._INN_ROUTING_ALLOWED);
		LocationNumberCap locationNumberCap = client.getCAPProvider().getCAPParameterFactory()
			.createLocationNumberCap(locationNumber);

		ISDNAddressString vlrNumber = client.getCAPProvider().getMAPParameterFactory()
				.createISDNAddressString(AddressNature.international_number, NumberingPlan.ISDN,
						"552000002");
		LocationInformation locationInformation = client.getCAPProvider().getMAPParameterFactory()
				.createLocationInformation(10, null, vlrNumber, null, null, null, null,
						vlrNumber, null, false, false, null, null);

		client.sendInitialDP(origAddress, destAddress, serviceKey, calledPartyNumberCap,
				callingPartyNumberCap, locationNumberCap, EventTypeBCSM.collectedInfo,
				locationInformation);

		// sending oAnswer in 5 sec
		Thread.sleep(5000);
		OAnswerSpecificInfo oAnswerSpecificInfo = client.getCAPProvider().getCAPParameterFactory()
				.createOAnswerSpecificInfo(null, false, false, null, null, null);
		ReceivingSideID legID = client.getCAPProvider().getCAPParameterFactory()
			.createReceivingSideID(LegType.leg2);
		MiscCallInfo miscCallInfo = client.getCAPProvider().getINAPParameterFactory()
			.createMiscCallInfo(MiscCallInfoMessageType.notification, null);
		client.sendEventReportBCSM_OAnswer(oAnswerSpecificInfo, legID, miscCallInfo);

		// sending oDisconnect in 20 sec
		Thread.sleep(20000);
		CauseIndicators causeIndicators = client.getCAPProvider().getISUPParameterFactory()
			.createCauseIndicators();
		causeIndicators.setLocation(CauseIndicators._LOCATION_USER);
		causeIndicators.setCodingStandard(CauseIndicators._CODING_STANDARD_ITUT);
		causeIndicators.setCauseValue(CauseIndicators._CV_ALL_CLEAR);
		CauseCap releaseCause = client.getCAPProvider().getCAPParameterFactory()
			.createCauseCap(causeIndicators);
		ODisconnectSpecificInfo oDisconnectSpecificInfo = client.getCAPProvider()
			.getCAPParameterFactory().createODisconnectSpecificInfo(releaseCause);
		legID = client.getCAPProvider().getCAPParameterFactory().createReceivingSideID(LegType.leg1);
		miscCallInfo = client.getCAPProvider().getINAPParameterFactory()
			.createMiscCallInfo(MiscCallInfoMessageType.notification, null);
		client.sendEventReportBCSM_ODisconnect(oDisconnectSpecificInfo, legID, miscCallInfo);

		// wait for answer
		Thread.sleep(600000);

		client.stop();
	}

	public static void startCallScf() throws Exception {
		CallScfExample server = new CallScfExample();

		server.start();

		// wait for a request
		Thread.sleep(600000);

		server.stop();
	}
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.restcomm.protocols.ss7.cap;

import javax.naming.InitialContext;
import javax.naming.NamingException;

import org.restcomm.protocols.ss7.cap.api.CAPApplicationContext;
import org.restcomm.protocols.ss7.cap.api.CAPDialog;
import org.restcomm.protocols.ss7.cap.api.CAPDialogListener;
import org.restcomm.protocols.ss7.cap.api.CAPException;
import org.restcomm.protocols.ss7.cap.api.CAPMessage;
import org.restcomm.protocols.ss7.cap.api.CAPParameterFactory;
import org.restcomm.protocols.ss7.cap.api.CAPProvider;
import org.restcomm.protocols.ss7.cap.api.CAPStack;
import org.restcomm.protocols.ss7.cap.api.EsiBcsm.OAnswerSpecificInfo;
import org.restcomm.protocols.ss7.cap.api.EsiBcsm.ODisconnectSpecificInfo;
import org.restcomm.protocols.ss7.cap.api.dialog.CAPGeneralAbortReason;
import org.restcomm.protocols.ss7.cap.api.dialog.CAPGprsReferenceNumber;
import org.restcomm.protocols.ss7.cap.api.dialog.CAPNoticeProblemDiagnostic;
import org.restcomm.protocols.ss7.cap.api.dialog.CAPUserAbortReason;
import org.restcomm.protocols.ss7.cap.api.errors.CAPErrorMessage;
import org.restcomm.protocols.ss7.cap.api.isup.CalledPartyNumberCap;
import org.restcomm.protocols.ss7.cap.api.isup.CallingPartyNumberCap;
import org.restcomm.protocols.ss7.cap.api.isup.LocationNumberCap;
import org.restcomm.protocols.ss7.cap.api.primitives.EventTypeBCSM;
import org.restcomm.protocols.ss7.cap.api.primitives.ReceivingSideID;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ActivityTestRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ActivityTestResponse;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ApplyChargingReportRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ApplyChargingRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.AssistRequestInstructionsRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CAPDialogCircuitSwitchedCall;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CAPServiceCircuitSwitchedCallListener;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CallInformationReportRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CallInformationRequestRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CancelRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ConnectRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ConnectToResourceRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ContinueRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.DisconnectForwardConnectionRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.EstablishTemporaryConnectionRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.EventReportBCSMRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.FurnishChargingInformationRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.InitialDPRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.PlayAnnouncementRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.PromptAndCollectUserInformationRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.PromptAndCollectUserInformationResponse;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ReleaseCallRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.RequestReportBCSMEventRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ResetTimerRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.SendChargingInformationRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.SpecializedResourceReportRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.primitive.DestinationRoutingAddress;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.primitive.EventSpecificInformationBCSM;
import org.restcomm.protocols.ss7.inap.api.primitives.MiscCallInfo;
import org.restcomm.protocols.ss7.map.api.MAPProvider;
import org.restcomm.protocols.ss7.map.api.service.mobility.subscriberInformation.LocationInformation;
import org.restcomm.protocols.ss7.sccp.SccpProvider;
import org.restcomm.protocols.ss7.sccp.parameter.SccpAddress;
import org.restcomm.protocols.ss7.tcap.asn.comp.PAbortCauseType;
import org.restcomm.protocols.ss7.tcap.asn.comp.Problem;

public class CallSsfExample implements CAPDialogListener, CAPServiceCircuitSwitchedCallListener {

	private CAPProvider capProvider;
	private CAPParameterFactory paramFact;
	private CAPDialogCircuitSwitchedCall currentCapDialog;
	private CallContent cc;

	public CallSsfExample() throws NamingException {
		InitialContext ctx = new InitialContext();
		try {
			String providerJndiName = "java:/restcomm/ss7/cap";
			this.capProvider = ((CAPProvider) ctx.lookup(providerJndiName));
		} finally {
			ctx.close();
		}

		paramFact = capProvider.getCAPParameterFactory();

		capProvider.addCAPDialogListener(this);
		capProvider.getCAPServiceCircuitSwitchedCall().addCAPServiceListener(this);
	}

	public CAPProvider getCAPProvider() {
		return capProvider;
	}

	public void start() {
		// Make the circuitSwitchedCall service activated
        capProvider.getCAPServiceCircuitSwitchedCall().acivate();

        currentCapDialog = null;
	}

	public void stop() {
		 capProvider.getCAPServiceCircuitSwitchedCall().deactivate();
	}

	public void sendInitialDP(SccpAddress origAddress, SccpAddress remoteAddress,
			int serviceKey, CalledPartyNumberCap calledPartyNumber,
			CallingPartyNumberCap callingPartyNumber, LocationNumberCap locationNumber,
			EventTypeBCSM eventTypeBCSM, LocationInformation locationInformation)
			throws CAPException {
		// First create Dialog
		CAPApplicationContext acn = CAPApplicationContext.CapV2_gsmSSF_to_gsmSCF;
		currentCapDialog = capProvider.getCAPServiceCircuitSwitchedCall().createNewDialog(
				acn, origAddress, remoteAddress);

		currentCapDialog.addInitialDPRequest(serviceKey, calledPartyNumber,
				callingPartyNumber, null, null, null, locationNumber, null, null,
				null, null, null,
				eventTypeBCSM, null, null, null, null, null, null, null, false,
				null, null, locationInformation, null, null, null, null, null, false, null);
		// This will initiate the TC-BEGIN with INVOKE component
		currentCapDialog.send();

		this.cc.step = Step.initialDPSent;
		this.cc.calledPartyNumber = calledPartyNumber;
		this.cc.callingPartyNumber = callingPartyNumber;

	}

	public void sendEventReportBCSM_OAnswer(OAnswerSpecificInfo oAnswerSpecificInfo,
			ReceivingSideID legID, MiscCallInfo miscCallInfo) throws CAPException {
		if (currentCapDialog != null &amp;&amp; this.cc != null) {
			EventSpecificInformationBCSM eventSpecificInformationBCSM =
				this.capProvider.getCAPParameterFactory().createEventSpecificInformationBCSM(
						oAnswerSpecificInfo);
			currentCapDialog.addEventReportBCSMRequest(EventTypeBCSM.oAnswer,
					eventSpecificInformationBCSM, legID, miscCallInfo, null);
			currentCapDialog.send();
			this.cc.step = Step.answered;
		}
	}

	public void sendEventReportBCSM_ODisconnect(ODisconnectSpecificInfo oDisconnectSpecificInfo,
			ReceivingSideID legID, MiscCallInfo miscCallInfo) throws CAPException {
		if (currentCapDialog != null &amp;&amp; this.cc != null) {
			EventSpecificInformationBCSM eventSpecificInformationBCSM =
				this.capProvider.getCAPParameterFactory().createEventSpecificInformationBCSM(
						oDisconnectSpecificInfo);
			currentCapDialog.addEventReportBCSMRequest(EventTypeBCSM.oDisconnect,
					eventSpecificInformationBCSM, legID, miscCallInfo, null);
			currentCapDialog.send();
			this.cc.step = Step.disconnected;
		}
	}

	@Override
	public void onRequestReportBCSMEventRequest(RequestReportBCSMEventRequest ind) {
		if (currentCapDialog != null &amp;&amp; this.cc != null &amp;&amp; this.cc.step != Step.disconnected) {
			this.cc.requestReportBCSMEventRequest = ind;

			// initiating BCSM events processing
		}
		ind.getCAPDialog().processInvokeWithoutAnswer(ind.getInvokeId());
	}

	@Override
	public void onActivityTestRequest(ActivityTestRequest ind) {
		if (currentCapDialog != null &amp;&amp; this.cc != null &amp;&amp; this.cc.step != Step.disconnected) {
			this.cc.activityTestInvokeId = ind.getInvokeId();
		}
	}

	@Override
	public void onActivityTestResponse(ActivityTestResponse ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onContinueRequest(ContinueRequest ind) {
		this.cc.step = Step.callAllowed;
		ind.getCAPDialog().processInvokeWithoutAnswer(ind.getInvokeId());
		// sending Continue to use the original calledPartyAddress
	}

	@Override
	public void onConnectRequest(ConnectRequest ind) {
		this.cc.step = Step.callAllowed;
		this.cc.destinationRoutingAddress = ind.getDestinationRoutingAddress();
		ind.getCAPDialog().processInvokeWithoutAnswer(ind.getInvokeId());
		// sending Connect to force routing the call to a new  number
	}

	@Override
	public void onDialogTimeout(CAPDialog capDialog) {
		if (currentCapDialog != null &amp;&amp; this.cc != null &amp;&amp; this.cc.step != Step.disconnected) {
			// if the call is still up - keep the sialog alive
			currentCapDialog.keepAlive();
		}
	}

	@Override
	public void onDialogDelimiter(CAPDialog capDialog) {
		if (currentCapDialog != null &amp;&amp; this.cc != null &amp;&amp; this.cc.step != Step.disconnected) {
			if (this.cc.activityTestInvokeId != null) {
				try {
					currentCapDialog.addActivityTestResponse(this.cc.activityTestInvokeId);
					this.cc.activityTestInvokeId = null;
					currentCapDialog.send();
				} catch (CAPException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	}

	@Override
	public void onErrorComponent(CAPDialog capDialog, Long invokeId, CAPErrorMessage capErrorMessage) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onRejectComponent(CAPDialog capDialog, Long invokeId, Problem problem,
			boolean isLocalOriginated) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onInvokeTimeout(CAPDialog capDialog, Long invokeId) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onCAPMessage(CAPMessage capMessage) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onInitialDPRequest(InitialDPRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onApplyChargingRequest(ApplyChargingRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onEventReportBCSMRequest(EventReportBCSMRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onApplyChargingReportRequest(ApplyChargingReportRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onReleaseCallRequest(ReleaseCallRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onCallInformationRequestRequest(CallInformationRequestRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onCallInformationReportRequest(CallInformationReportRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onAssistRequestInstructionsRequest(AssistRequestInstructionsRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onEstablishTemporaryConnectionRequest(EstablishTemporaryConnectionRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDisconnectForwardConnectionRequest(DisconnectForwardConnectionRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onConnectToResourceRequest(ConnectToResourceRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onResetTimerRequest(ResetTimerRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onFurnishChargingInformationRequest(FurnishChargingInformationRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onSendChargingInformationRequest(SendChargingInformationRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onSpecializedResourceReportRequest(SpecializedResourceReportRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onPlayAnnouncementRequest(PlayAnnouncementRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onPromptAndCollectUserInformationRequest(PromptAndCollectUserInformationRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onPromptAndCollectUserInformationResponse(PromptAndCollectUserInformationResponse ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onCancelRequest(CancelRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogRequest(CAPDialog capDialog, CAPGprsReferenceNumber capGprsReferenceNumber) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogAccept(CAPDialog capDialog, CAPGprsReferenceNumber capGprsReferenceNumber) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogUserAbort(CAPDialog capDialog, CAPGeneralAbortReason generalReason,
			CAPUserAbortReason userReason) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogProviderAbort(CAPDialog capDialog, PAbortCauseType abortCause) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogClose(CAPDialog capDialog) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogRelease(CAPDialog capDialog) {
		this.currentCapDialog = null;
		this.cc = null;
	}

	@Override
	public void onDialogNotice(CAPDialog capDialog, CAPNoticeProblemDiagnostic noticeProblemDiagnostic) {
		// TODO Auto-generated method stub

	}

	private enum Step {
		initialDPSent,
		callAllowed,
		answered,
		disconnected;
	}

	private class CallContent {
		public Step step;
		public Long activityTestInvokeId;

		public CalledPartyNumberCap calledPartyNumber;
		public CallingPartyNumberCap callingPartyNumber;
		public RequestReportBCSMEventRequest requestReportBCSMEventRequest;
		public DestinationRoutingAddress destinationRoutingAddress;
	}

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.restcomm.protocols.ss7.cap;

import java.util.ArrayList;

import javax.naming.InitialContext;
import javax.naming.NamingException;

import org.restcomm.protocols.ss7.cap.api.CAPDialog;
import org.restcomm.protocols.ss7.cap.api.CAPDialogListener;
import org.restcomm.protocols.ss7.cap.api.CAPException;
import org.restcomm.protocols.ss7.cap.api.CAPMessage;
import org.restcomm.protocols.ss7.cap.api.CAPParameterFactory;
import org.restcomm.protocols.ss7.cap.api.CAPProvider;
import org.restcomm.protocols.ss7.cap.api.dialog.CAPGeneralAbortReason;
import org.restcomm.protocols.ss7.cap.api.dialog.CAPGprsReferenceNumber;
import org.restcomm.protocols.ss7.cap.api.dialog.CAPNoticeProblemDiagnostic;
import org.restcomm.protocols.ss7.cap.api.dialog.CAPUserAbortReason;
import org.restcomm.protocols.ss7.cap.api.errors.CAPErrorMessage;
import org.restcomm.protocols.ss7.cap.api.isup.CalledPartyNumberCap;
import org.restcomm.protocols.ss7.cap.api.primitives.BCSMEvent;
import org.restcomm.protocols.ss7.cap.api.primitives.EventTypeBCSM;
import org.restcomm.protocols.ss7.cap.api.primitives.MonitorMode;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ActivityTestRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ActivityTestResponse;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ApplyChargingReportRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ApplyChargingRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.AssistRequestInstructionsRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CAPDialogCircuitSwitchedCall;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CAPServiceCircuitSwitchedCallListener;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CallInformationReportRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CallInformationRequestRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.CancelRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ConnectRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ConnectToResourceRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ContinueRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.DisconnectForwardConnectionRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.EstablishTemporaryConnectionRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.EventReportBCSMRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.FurnishChargingInformationRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.InitialDPRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.PlayAnnouncementRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.PromptAndCollectUserInformationRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.PromptAndCollectUserInformationResponse;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ReleaseCallRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.RequestReportBCSMEventRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.ResetTimerRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.SendChargingInformationRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.SpecializedResourceReportRequest;
import org.restcomm.protocols.ss7.cap.api.service.circuitSwitchedCall.primitive.DestinationRoutingAddress;
import org.restcomm.protocols.ss7.inap.api.primitives.LegID;
import org.restcomm.protocols.ss7.inap.api.primitives.LegType;
import org.restcomm.protocols.ss7.isup.message.parameter.CalledPartyNumber;
import org.restcomm.protocols.ss7.isup.message.parameter.NAINumber;
import org.restcomm.protocols.ss7.tcap.asn.comp.PAbortCauseType;
import org.restcomm.protocols.ss7.tcap.asn.comp.Problem;

public class CallScfExample implements CAPDialogListener, CAPServiceCircuitSwitchedCallListener {

	private CAPProvider capProvider;
	private CAPParameterFactory paramFact;
	private CAPDialogCircuitSwitchedCall currentCapDialog;
	private CallContent cc;

	public CallScfExample() throws NamingException {
		InitialContext ctx = new InitialContext();
		try {
			String providerJndiName = "java:/restcomm/ss7/cap";
			this.capProvider = ((CAPProvider) ctx.lookup(providerJndiName));
		} finally {
			ctx.close();
		}
		paramFact = capProvider.getCAPParameterFactory();

		capProvider.addCAPDialogListener(this);
		capProvider.getCAPServiceCircuitSwitchedCall().addCAPServiceListener(this);
	}

	public CAPProvider getCAPProvider() {
		return capProvider;
	}

	public void start() {
		// Make the circuitSwitchedCall service activated
        capProvider.getCAPServiceCircuitSwitchedCall().acivate();

        currentCapDialog = null;
	}

	public void stop() {
		capProvider.getCAPServiceCircuitSwitchedCall().deactivate();
	}

	@Override
	public void onInitialDPRequest(InitialDPRequest ind) {
		this.cc = new CallContent();
		this.cc.idp = ind;
		this.cc.step = Step.initialDPRecieved;

		ind.getCAPDialog().processInvokeWithoutAnswer(ind.getInvokeId());
	}

	@Override
	public void onEventReportBCSMRequest(EventReportBCSMRequest ind) {
		if (this.cc != null) {
			this.cc.eventList.add(ind);

			switch (ind.getEventTypeBCSM()) {
			case oAnswer:
				this.cc.step = Step.answered;
				break;
			case oDisconnect:
				this.cc.step = Step.disconnected;
				break;
			}
		}

		ind.getCAPDialog().processInvokeWithoutAnswer(ind.getInvokeId());
	}

	@Override
	public void onDialogDelimiter(CAPDialog capDialog) {
		try {
			if (this.cc != null) {
				switch (this.cc.step) {
				case initialDPRecieved:
					// informing SSF of BCSM events processing
					ArrayList&lt;BCSMEvent&gt; bcsmEventList = new ArrayList&lt;BCSMEvent&gt;();
					BCSMEvent ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(
							EventTypeBCSM.routeSelectFailure, MonitorMode.notifyAndContinue,
							null, null, false);
					bcsmEventList.add(ev);
					ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(
							EventTypeBCSM.oCalledPartyBusy, MonitorMode.interrupted, null,
							null, false);
					bcsmEventList.add(ev);
					ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(
							EventTypeBCSM.oNoAnswer, MonitorMode.interrupted, null, null, false);
					bcsmEventList.add(ev);
					ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(
							EventTypeBCSM.oAnswer, MonitorMode.notifyAndContinue, null,
							null, false);
					bcsmEventList.add(ev);
					LegID legId = this.capProvider.getINAPParameterFactory().createLegID(
							true, LegType.leg1);
					ev = this.capProvider.getCAPParameterFactory()
							.createBCSMEvent(EventTypeBCSM.oDisconnect,
									MonitorMode.notifyAndContinue, legId, null, false);
					bcsmEventList.add(ev);
					legId = this.capProvider.getINAPParameterFactory().createLegID(true,
							LegType.leg2);
					ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(
							EventTypeBCSM.oDisconnect, MonitorMode.interrupted, legId,
							null, false);
					bcsmEventList.add(ev);
					ev = this.capProvider.getCAPParameterFactory().createBCSMEvent(
							EventTypeBCSM.oAbandon, MonitorMode.notifyAndContinue, null,
							null, false);
					bcsmEventList.add(ev);
					currentCapDialog.addRequestReportBCSMEventRequest(bcsmEventList, null);

					// calculating here a new called party number if it is needed
					String newNumber = "22123124";
					if (newNumber != null) {
						// sending Connect to force routing the call to a new  number
						ArrayList&lt;CalledPartyNumberCap&gt; calledPartyNumber =
							new ArrayList&lt;CalledPartyNumberCap&gt;();
						CalledPartyNumber cpn = this.capProvider.getISUPParameterFactory()
							.createCalledPartyNumber();
						cpn.setAddress("5599999988");
						cpn.setNatureOfAddresIndicator(NAINumber._NAI_INTERNATIONAL_NUMBER);
						cpn.setNumberingPlanIndicator(CalledPartyNumber._NPI_ISDN);
						cpn.setInternalNetworkNumberIndicator(
								CalledPartyNumber._INN_ROUTING_ALLOWED);
						CalledPartyNumberCap cpnc = this.capProvider.getCAPParameterFactory()
						.createCalledPartyNumberCap(cpn);
						calledPartyNumber.add(cpnc);
						DestinationRoutingAddress destinationRoutingAddress = this.capProvider
							.getCAPParameterFactory().createDestinationRoutingAddress(
								calledPartyNumber);
						currentCapDialog.addConnectRequest(destinationRoutingAddress, null,
								null, null, null, null, null, null, null, null, null,
								null, null,
								false, false, false, null, false);
					} else {
						// sending Continue to use the original calledPartyAddress
						currentCapDialog.addContinueRequest();
					}

					currentCapDialog.send();
					break;

				case disconnected:
					// the call is terminated - close dialog
					currentCapDialog.close(false);
					break;
				}
			}
		} catch (CAPException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	@Override
	public void onDialogTimeout(CAPDialog capDialog) {
		if (currentCapDialog != null &amp;&amp; this.cc != null &amp;&amp; this.cc.step != Step.disconnected
				&amp;&amp; this.cc.activityTestInvokeId == null) {
			// check the SSF if the call is still alive
			currentCapDialog.keepAlive();
			try {
				this.cc.activityTestInvokeId = currentCapDialog.addActivityTestRequest();
				currentCapDialog.send();
			} catch (CAPException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
	}

	@Override
	public void onActivityTestResponse(ActivityTestResponse ind) {
		if (currentCapDialog != null &amp;&amp; this.cc != null) {
			this.cc.activityTestInvokeId = null;
		}
	}

	@Override
	public void onInvokeTimeout(CAPDialog capDialog, Long invokeId) {
		if (currentCapDialog != null &amp;&amp; this.cc != null) {
			if (this.cc.activityTestInvokeId == invokeId) { // activityTest failure
				try {
					currentCapDialog.close(true);
				} catch (CAPException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	}

	@Override
	public void onErrorComponent(CAPDialog capDialog, Long invokeId,
			CAPErrorMessage capErrorMessage) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onRejectComponent(CAPDialog capDialog, Long invokeId, Problem problem,
			boolean isLocalOriginated) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onCAPMessage(CAPMessage capMessage) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onRequestReportBCSMEventRequest(RequestReportBCSMEventRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onApplyChargingRequest(ApplyChargingRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onContinueRequest(ContinueRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onApplyChargingReportRequest(ApplyChargingReportRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onReleaseCallRequest(ReleaseCallRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onConnectRequest(ConnectRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onCallInformationRequestRequest(CallInformationRequestRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onCallInformationReportRequest(CallInformationReportRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onActivityTestRequest(ActivityTestRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onAssistRequestInstructionsRequest(AssistRequestInstructionsRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onEstablishTemporaryConnectionRequest(EstablishTemporaryConnectionRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDisconnectForwardConnectionRequest(DisconnectForwardConnectionRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onConnectToResourceRequest(ConnectToResourceRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onResetTimerRequest(ResetTimerRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onFurnishChargingInformationRequest(FurnishChargingInformationRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onSendChargingInformationRequest(SendChargingInformationRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onSpecializedResourceReportRequest(SpecializedResourceReportRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onPlayAnnouncementRequest(PlayAnnouncementRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onPromptAndCollectUserInformationRequest(PromptAndCollectUserInformationRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onPromptAndCollectUserInformationResponse(PromptAndCollectUserInformationResponse ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onCancelRequest(CancelRequest ind) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogRequest(CAPDialog capDialog, CAPGprsReferenceNumber capGprsReferenceNumber) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogAccept(CAPDialog capDialog, CAPGprsReferenceNumber capGprsReferenceNumber) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogUserAbort(CAPDialog capDialog, CAPGeneralAbortReason generalReason,
			CAPUserAbortReason userReason) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogProviderAbort(CAPDialog capDialog, PAbortCauseType abortCause) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogClose(CAPDialog capDialog) {
		// TODO Auto-generated method stub

	}

	@Override
	public void onDialogRelease(CAPDialog capDialog) {
		this.currentCapDialog = null;
		this.cc = null;
	}

	@Override
	public void onDialogNotice(CAPDialog capDialog,
			CAPNoticeProblemDiagnostic noticeProblemDiagnostic) {
		// TODO Auto-generated method stub

	}

	private enum Step {
		initialDPRecieved,
		answered,
		disconnected;
	}

	private class CallContent {
		public Step step;
		public InitialDPRequest idp;
		public ArrayList&lt;EventReportBCSMRequest&gt; eventList = new ArrayList&lt;EventReportBCSMRequest&gt;();
		public Long activityTestInvokeId;
	}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simulator"><a class="anchor" href="#_simulator"></a>14. SS7 Simulator</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SS7 Simulator is an application for testing the Restcomm jSS7 and understanding its functionality.
The test cases will allow you to conduct various test scenarios and explore the Stack.
The Simulator is also a good example of how to use this Stack.
For details on installing the Simulator please refer to the Installation Guide.
To know more about Running the Simulator please refer to <a href="#_running_ss7_simulator">Running Restcomm jSS7  Simulator</a> in this guide.</p>
</div>
<div class="paragraph">
<p>Before running a test all relevant layers of the Simulator must be configured.
After running a test, you can perform some actions depending on the test.
The results of the test are emitted as "notifications". Notifications are displayed in the GUI interface of the Simulator and JConsole application (which is also a GUI interface). Notifications are also written into a file "&lt;host name&gt;.log" (for example "a1.log") as well as printed onto a console.</p>
</div>
<div class="sect2">
<h3 id="_simulator_configuring_layers"><a class="anchor" href="#_simulator_configuring_layers"></a>14.1. Configuring Restcomm jSS7  Simulator</h3>
<div class="paragraph">
<p>You must configure all relevant layers and the Testing Task prior to running a test with the Simulator.
For details on how to launch the form for configuring the simulator, refer to <a href="#_procedure_test_simulator">[_procedure_test_simulator]</a>.</p>
</div>
<div class="sect3">
<h4 id="_simulator_configuring_layers_sccp"><a class="anchor" href="#_simulator_configuring_layers_sccp"></a>14.1.1. SCCP Layer of the Simulator</h4>
<div class="paragraph">
<p>SCCP layer supports message processing in two modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Route on DPC and SSN mode</p>
</li>
<li>
<p>Route on GlobalTitle mode</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For both modes you must set the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remote SPC</p>
</li>
<li>
<p>Local SPC</p>
</li>
<li>
<p>Network indicator</p>
</li>
<li>
<p>Remote SSN</p>
</li>
<li>
<p>Local SSN</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the SCCP layer is started, the following are created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mtp3ServiceAccessPoint (using Local SPC and Network indicator) with a single Mtp3Destination (Remote SPC, all SLS&#8217;s)</p>
</li>
<li>
<p>RemoteSpc (using Remote SPC)</p>
</li>
<li>
<p>RemoteSsn (using Remote SPC and Remote SSN)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For "Route on GlobalTitle" mode there are few extra options as below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GlobalTitle type ("Nature of address indicator only", "Translation type only", "Translation type, numbering plan and encoding scheme", "Translation type, numbering plan, encoding scheme and NOA ind"), the last choice is default.</p>
</li>
<li>
<p>AddressNature</p>
</li>
<li>
<p>NumberingPlan</p>
</li>
<li>
<p>Translation type (those four options are used for CalledPartyAddress, CallingPartyAddress and routing rules)</p>
</li>
<li>
<p>CallingPartyAddress digits</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the "Route on GlobalTitle" mode is used, two rules for routing are created when the SCCP layer is started.
All remotely originated messages are routed to a local user,  All locally originated messages are routed to a remote user (to a peer with Remote SPC address).</p>
</div>
<div class="paragraph">
<p>SCCP layer provide CalledPartyAddress and CallingPartyAddress for upper layers and test cases.
When "Route on DPC and SSN" mode is used, these are  ROUTING_BASED_ON_DPC_AND_SSN with no GlobalTitle, pc=Local SPC (for CallingPartyAddress) or Remote SSN (for CalledPartyAddress), SSN=Local SSN and Remote SSN accordingly.</p>
</div>
<div class="paragraph">
<p>When "Route on GlobalTitle" mode ROUTING_BASED_ON_GT is used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CallingPartyAddress is created based on CallingPartyAddress digits and Local SSN.</p>
</li>
<li>
<p>CalledPartyAddress is created using digits and SSN that are supplied by upper levels or test cases.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example9.png" alt="Simulator Example9">
</div>
<div class="title">Figure 36. SCCP Settings Form</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simulator_tests"><a class="anchor" href="#_simulator_tests"></a>14.2. SS7 Simulator Test Cases</h3>
<div class="sect3">
<h4 id="_simulator_test_ussdserver"><a class="anchor" href="#_simulator_test_ussdserver"></a>14.2.1. USSD Server</h4>
<div class="paragraph">
<p>UssdServer test can work in manual and automatic modes.
In the manual mode a user manually inserts the response message value and sends ProcessUnstructuredSs response (or UnstructuredSs request) to the Ussd client.
In the automatic mode UssdServer automatically sends a predefined message as an ProcessUnstructuredSs response ("Auto sending ProcessUnstructuredSsResponse" option) or automatically sends a predefined message as an UnstructuredSs request and then  sends a predefined message ProcessUnstructuredSs response ("Auto sending Unstructured_SS_Request then after response sending ProcessUnstructuredSsResponse" option). Use "Auto sending ProcessUnstructuredSsResponse" option for UssdServer if UssdClient is used for a load test ("Auto sending ProcessUnstructuredSSRequest"). For load tests we recommend to check the option "One notification for 100 dialogs" for preventing too many notifications when load testing.</p>
</div>
<div class="paragraph">
<p>UssdServer test can perform followng tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sending a ProcessUnstructuredSs response / UnstructuredSs request in automatic or manual modes.
Ussd Client must initiate a dialog using ProcessUnstructuredSs request.</p>
</li>
<li>
<p>Manually sending an UnstructuredSsNotify.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example8.png" alt="Simulator Example8">
</div>
<div class="title">Figure 37. Ussd Server settings form</div>
</div>
</div>
<div class="sect3">
<h4 id="_simulator_test_ussdclient"><a class="anchor" href="#_simulator_test_ussdclient"></a>14.2.2. USSD Client</h4>
<div class="paragraph">
<p>UssdClient test can perform following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sending a ProcessUnstructuredSs request, waiting for the answer and displaying the answer</p>
</li>
<li>
<p>Sending a UnstructuredSs response as an answer for UnstructuredSs request</p>
</li>
<li>
<p>Receiving UnstructuredSs notify and displaying it</p>
</li>
<li>
<p>Special case for load testing: Sending to the Ussd server a flow of ProcessUnstructuredSs requests without stopping (and receiving responses).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For working in the manual mode select the option "Manual operation", for auto sending messages - the option "Auto sending ProcessUnstructuredSSRequest".   You can send ProcessUnstructuredSs request and UnstructuredSs response only manually by inserting a message text and  pressing buttons.
For working in the auto mode you should define the string of auto processUnstructuredSs request and the count of maximum active MAP dialogs (default value is 10). The more dialogs is defined the more messages per second will be sent.
Msisdn, data coding schema and alerting pattern values should be also configured before test starting.
For the auto mode we recomment to check the option "One notification for 100 dialogs" for preventing too many notifications when load testing.</p>
</div>
<div class="paragraph">
<p>You can send ProcessUnstructuredSs request and UnstructuredSs response manually by inserting a message text and  pressing buttons.
You can not send a new ProcessUnstructiredSs request till the response for previos request has been received (or till dialog timeout). You can also manually close the current dialog by pressing "Close current dialog" button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example7.png" alt="Simulator Example7">
</div>
<div class="title">Figure 38. Ussd Client settings form</div>
</div>
</div>
<div class="sect3">
<h4 id="_simulator_test_smsserver"><a class="anchor" href="#_simulator_test_smsserver"></a>14.2.3. SMS Server</h4>
<div class="paragraph">
<p>SMS Server simulates the behavior of SMSC, it can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Send sendRoutingInfoForSM to the HLR and receive the response</p>
</li>
<li>
<p>Send mt-forwardSM to the VLR and receive the response</p>
</li>
<li>
<p>Send sendRoutingInfoForSM to the HLR, receive the response and send mt-forwardSM using data from the first request</p>
</li>
<li>
<p>Receive mo-forwardSM request from VLR and display the received message</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We need to set the following options to SMS server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AddressNature and NumberingPlan for AddressString creation</p>
</li>
<li>
<p>TypeOfNumber and NumberingPlanIdentification SMS tpdu addresses</p>
</li>
<li>
<p>MAP protocol version (1, 2 or 3) (version 3 is default)</p>
</li>
<li>
<p>Character set for SMS message encoding (GSM7 or UCS2)</p>
</li>
<li>
<p>Origination Service center address string (this address must be equal the SCCP layer CallingPartyAddress digits)</p>
</li>
<li>
<p>HLR and VLR SSN values (default values are 8 and 6)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
if you want to use SMS Server and SMS Client for sending SMS to each other: set HLR SSN at SMS Server the equal value that VLR SSN (8 in our case)
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example11.png" alt="Simulator Example11">
</div>
<div class="title">Figure 39. SMS client settings form</div>
</div>
<div class="paragraph">
<p>After starting SMS server you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For sending sendRoutingInfoForSM ("Send SRIForSM" button) we should set "Destination ISDN number"</p>
</li>
<li>
<p>For sending sendRoutingInfoForSM and then mt-forwardSM ("Send SRIForSM + MtForwardSM" button) we should set "Message text", "Destination ISDN number" and "Origination ISDN number"</p>
</li>
<li>
<p>For sending mt-forwardSM only ("Send MtForwardSM" button) we should set "Message text", "IMSI", "VLR number" and "Origination ISDN number"</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simulator_test_smsclient"><a class="anchor" href="#_simulator_test_smsclient"></a>14.2.4. SMS Client</h4>
<div class="paragraph">
<p>SMS Client simulates the behavior of HLR or VLR, it can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Receive sendRoutingInfoForSM from SMSC and send as a response predefined IMSI and VLR number</p>
</li>
<li>
<p>Receive mt-forwardSM from SMSC and display the received message</p>
</li>
<li>
<p>Send mo-forwardSM to the SMSC</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We need to set the following options to SMS client:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AddressNature and NumberingPlan for AddressString creation</p>
</li>
<li>
<p>TypeOfNumber and NumberingPlanIdentification SMS tpdu addresses</p>
</li>
<li>
<p>MAP protocol version (1, 2 or 3) (version 3 is default)</p>
</li>
<li>
<p>Character set for SMS message encoding (GSM7 or UCS2)</p>
</li>
<li>
<p>Destination Service center address string (this address must be equal the SCCP layer CallingPartyAddress digits)</p>
</li>
<li>
<p>SMSC SSN value (default value is 8)</p>
</li>
<li>
<p>IMSI and VLR addresses values that will be used when responding on sendRoutingInfoForSM</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example10.png" alt="Simulator Example10">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example10_01.png" alt="Simulator Example10 01">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example10_02.png" alt="Simulator Example10 02">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example10_03.png" alt="Simulator Example10 03">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example10_04.png" alt="Simulator Example10 04">
</div>
<div class="title">Figure 40. SMS client settings form</div>
</div>
<div class="paragraph">
<p>After starting SMS client you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For sending mo-forwardSM ("Send MoForwardSM" button) we should set "Message text", "Destination ISDN number" and "Origination ISDN number"</p>
</li>
<li>
<p>When recieving sendRoutingInfoForSM client automatically generate a response with preconfigured IMSI and VLR address</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simulator_test_cap_scf"><a class="anchor" href="#_simulator_test_cap_scf"></a>14.2.5. CAMEL SCF part</h4>
<div class="paragraph">
<p>CAMEL SCF part simulates the behavior of CAMEL Service Control Function, it can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Send InitiateCallAttempt message to CAMEL SSF</p>
</li>
<li>
<p>Send ApplyCharging message to CAMEL SSF</p>
</li>
<li>
<p>Send Cancel message to CAMEL SSF</p>
</li>
<li>
<p>Send Connect message to CAMEL SSF</p>
</li>
<li>
<p>Send Continue message to CAMEL SSF</p>
</li>
<li>
<p>Send ReleaseCall message to CAMEL SSF</p>
</li>
<li>
<p>Send RequestReportBCSMEvent message to CAMEL SSF</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We need to set the following options to CAMEL SCF:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CAP Apllication content</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters of messages are hardcorded in current version and can not be configured.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example12.png" alt="Simulator Example12">
</div>
<div class="title">Figure 41. CAMEL SCF settings form</div>
</div>
<div class="paragraph">
<p>After CAMEL SCF server starting you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For initiating of CAP dialog and sending InitiateCallAttempt - press "InitiateCallAttempt" button.</p>
</li>
<li>
<p>For continuing of CAP dialog with sending ApplyCharging, Cancel, Connect, Continue, ReleaseCall or RequestReportBCSMEvent - press corresponded buttons.</p>
</li>
<li>
<p>For ending of CAP dialog - press "Close Dialog" button.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simulator_test_cap_ssf"><a class="anchor" href="#_simulator_test_cap_ssf"></a>14.2.6. CAMEL SSF part</h4>
<div class="paragraph">
<p>CAMEL SSF part simulates the behavior of CAMEL Service Switching Function, it can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Send InitialDP message to CAMEL SCF</p>
</li>
<li>
<p>Send AssistRequestInstructions message to CAMEL SCF</p>
</li>
<li>
<p>Send ApplyChargingReport message to CAMEL SCF</p>
</li>
<li>
<p>Send EventReportBCSM message to CAMEL SCF</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We need to set the following options to CAMEL SSF:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CAP Apllication content</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters of messages are hardcorded in current version and can not be configured.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example13.png" alt="Simulator Example13">
</div>
<div class="title">Figure 42. CAMEL SSF settings form</div>
</div>
<div class="paragraph">
<p>After CAMEL SSF server starting you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For initiating of CAP dialog and sending InitialDP or AssistRequestInstructions message - press corresponded button.</p>
</li>
<li>
<p>For continuing of CAP dialog with sending ApplyChargingReport or EventReportBCSM - press corresponded buttons.</p>
</li>
<li>
<p>For ending of CAP dialog - press "Close Dialog" button.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simulator_test_atiserver"><a class="anchor" href="#_simulator_test_atiserver"></a>14.2.7. ATI Server</h4>
<div class="paragraph">
<p>ATI operation server task can be used for responding for AniTimeInterrogation MAP request.
There are no configurable options for this mode now.
SS7 Simulator will auto respond with ARI response with hardcoded parameters.</p>
</div>
<div class="paragraph">
<p>ATI Server test can perform followng tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Auto sending of ATI Response.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simulator_test_aticlient"><a class="anchor" href="#_simulator_test_aticlient"></a>14.2.8. ATI Client</h4>
<div class="paragraph">
<p>ATI Client test can perform following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sending a AnyTimeInterrogation MAP (ATI) request and displaying of ATI response.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For sending of ATI Request we need to specify IMSI / MSISDN digits and push "Send ATI Request" button.</p>
</div>
<div class="paragraph">
<p>Before running of ATI Client a user need to specify parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subscriber identity type (IMSI / MSISDN (default)).</p>
</li>
<li>
<p>AddressNature and NumberingPlan for AddressString Creation.</p>
</li>
<li>
<p>Requested info - which parameters will be requested from ATI server.</p>
</li>
<li>
<p>GSM SCF address digits.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Simulator-Example14.png" alt="Simulator Example14">
</div>
<div class="title">Figure 43. ATI Client settings form</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_traceparser"><a class="anchor" href="#_traceparser"></a>15. Trace Parser Tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Restcomm jSS7 Trace Parser is a simple tool that can parse trace capture data files (of some formats) and log its content in some log file in a text form.
This tool can be very handy to debug the flow of SS7 messages.</p>
</div>
<div class="sect2">
<h3 id="_traceparser_running"><a class="anchor" href="#_traceparser_running"></a>15.1. Running Restcomm jSS7  Trace Parser</h3>
<div class="paragraph">
<p>The Restcomm jSS7 Stack comes with a Trace Parser module.
You can install and run the module on any machine.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change the working directory to the bin folder in the Simulator&#8217;s installation directory.</p>
<div class="listingblock">
<div class="content">
<pre>downloads]$ cd restcomm-jss7-&lt;version&gt;/ss7/restcomm-ss7-traceparser/bin</pre>
</div>
</div>
</li>
<li>
<p>(Optional) Ensure that the <em class="path">run.sh</em> start script is executable.</p>
<div class="listingblock">
<div class="content">
<pre>bin$ chmod +x run.sh</pre>
</div>
</div>
</li>
<li>
<p>Execute the <em class="path">run.sh</em> Bourne shell script.</p>
<div class="listingblock">
<div class="content">
<pre>bin$ ./run.sh</pre>
</div>
</div>
</li>
<li>
<p>Result: This will launch the GUI application as shown in the figure below:</p>
<div class="imageblock">
<div class="content">
<img src="./images/Traceparser-Example1.png" alt="Traceparser Example1">
</div>
<div class="title">Figure 44. Running Trace Parser</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_traceparser_configuration"><a class="anchor" href="#_traceparser_configuration"></a>15.2. Configuring Trace Parser</h3>
<div class="paragraph">
<p>Once trace parser is started user can configure tool depending on requirements as explained below</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Trace file type : User can configure a trace file type for parsing.
Possible values are:</p>
<div class="ulist">
<ul>
<li>
<p>Acterna - file format of logs of some Acterna family devices</p>
</li>
<li>
<p>Simple sequence - binary file format that content consists of several records.
When you have some unsupported data format you can convert your data into this format.
Each record has the following structure:</p>
<div class="ulist">
<ul>
<li>
<p>2 bytes of binary encoded integer value with record length</p>
</li>
<li>
<p>without two length bytes (less significant byte is first) binary code of legacy SS7 message (Routing label and user data)</p>
</li>
</ul>
</div>
</li>
<li>
<p>PCAP - pcap wireshark file format.
DLT_EN10MB, DLT_LINUX_SLL and DLT_MTP3 network formats are supported now</p>
</li>
<li>
<p>Hex stream - special encoded hex text file format, it is not covered in this manaul.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Protocol: MAP, CAP or ISUP - defines which protocol will be parsed.</p>
</li>
<li>
<p>Trace file path: you have to select a file for parsing</p>
</li>
<li>
<p>ApplicationContext filter - this value is used only for MAP protocol.
It is integer value and used for message filtering.
The value of this field is 7th number of MAP application context.
For example for USSD services this value is 19.
So can be filtered only all versions for a concrete application context.</p>
</li>
<li>
<p>DialogId filter - for MAP and CAP protocols it is possible to filter one dialog chain.
Two values in the integer form  (as they are present in the text log of Trace Parser) can be used (to define origination and destination TCAP Transaction Id).  Also can be only one Integer value used.</p>
</li>
<li>
<p>OPC / DPC filter - this filter filters messages only for defined SS7 point codes.
You can define several point codes, for example: "123,124,125". Use this filter when trace file contains a lot of data between several point  codes and you want to select messages.</p>
</li>
<li>
<p>Message logging - User have to define a file where text parsed data will be stored.
User also needs to define which details will be saved into a log  (TCAP message source data, MAP/CAP dialog portion details, components portion details)</p>
</li>
<li>
<p>Recording of dialog message chains log - user can write another log that contains trace of which DPC / OPC nodes dialogs are sent.
Look at log format for other details.
If there are several dialogs with the same path they will be present only once in the log.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>User can start parsing with the button "Start", stop with the button "Stop".  After the parsing process is finished, user can get some statistic info like how many different TCAP primitives are exchanged, messages for separate Application contexts and operational codes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="revision-history"><a class="anchor" href="#revision-history"></a>Appendix A: Revision History</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-08-14 16:42:49 UTC
</div>
</div>
</body>
</html>